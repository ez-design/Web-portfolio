// [Bang & olufsen]  Build version: 1.0.0 - Thursday, May 6th, 2021, 7:33:19 AM  
 (window.webpackJsonp=window.webpackJsonp||[]).push([[55],{"/jKG":function(e,t,i){"use strict";var s=i("J33/");i.d(t,"a",function(){return s.a})},"8HGU":function(e,t,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/story-detail",function(){return i("k9d9")}])},Di78:function(e,t){!function(e){const t=e?e.noise={}:window.noise={};function i(e,t,i){this.x=e,this.y=t,this.z=i}i.prototype.dot2=function(e,t){return this.x*e+this.y*t},i.prototype.dot3=function(e,t,i){return this.x*e+this.y*t+this.z*i};const s=[new i(1,1,0),new i(-1,1,0),new i(1,-1,0),new i(-1,-1,0),new i(1,0,1),new i(-1,0,1),new i(1,0,-1),new i(-1,0,-1),new i(0,1,1),new i(0,-1,1),new i(0,1,-1),new i(0,-1,-1)],n=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],o=new Array(512),a=new Array(512);t.seed=function(e){e>0&&e<1&&(e*=65536),(e=Math.floor(e))<256&&(e|=e<<8);for(let i=0;i<256;i++){var t;t=1&i?n[i]^255&e:n[i]^e>>8&255,o[i]=o[i+256]=t,a[i]=a[i+256]=s[t%12]}},t.seed(0);const r=.5*(Math.sqrt(3)-1),h=(3-Math.sqrt(3))/6,c=1/6;function d(e){return e*e*e*(e*(6*e-15)+10)}function l(e,t,i){return(1-i)*e+i*t}t.simplex2=function(e,t){let i,s;const n=(e+t)*r;let c=Math.floor(e+n),d=Math.floor(t+n);const l=(c+d)*h,m=e-c+l,p=t-d+l;let u,g;m>p?(u=1,g=0):(u=0,g=1);const w=m-u+h,f=p-g+h,v=m-1+2*h,b=p-1+2*h,y=a[(c&=255)+o[d&=255]],x=a[c+u+o[d+g]],S=a[c+1+o[d+1]];let O=.5-m*m-p*p,E=.5-w*w-f*f,T=.5-v*v-b*b;return 70*((i=O<0?0:(O*=O)*O*y.dot2(m,p))+(s=E<0?0:(E*=E)*E*x.dot2(w,f))+(T<0?0:(T*=T)*T*S.dot2(v,b)))},t.simplex3=function(e,t,i){let s,n,r;const h=(e+t+i)*(1/3);let d=Math.floor(e+h),l=Math.floor(t+h),m=Math.floor(i+h);const p=(d+l+m)*c,u=e-d+p,g=t-l+p,w=i-m+p;let f,v,b,y,x,S;u>=g?g>=w?(f=1,v=0,b=0,y=1,x=1,S=0):u>=w?(f=1,v=0,b=0,y=1,x=0,S=1):(f=0,v=0,b=1,y=1,x=0,S=1):g<w?(f=0,v=0,b=1,y=0,x=1,S=1):u<w?(f=0,v=1,b=0,y=0,x=1,S=1):(f=0,v=1,b=0,y=1,x=1,S=0);const O=u-f+c,E=g-v+c,T=w-b+c,R=u-y+2*c,j=g-x+2*c,P=w-S+2*c,C=u-1+.5,A=g-1+.5,k=w-1+.5,I=a[(d&=255)+o[(l&=255)+o[m&=255]]],M=a[d+f+o[l+v+o[m+b]]],H=a[d+y+o[l+x+o[m+S]]],N=a[d+1+o[l+1+o[m+1]]];let _=.6-u*u-g*g-w*w,L=.6-O*O-E*E-T*T,z=.6-R*R-j*j-P*P,D=.6-C*C-A*A-k*k;return 32*((s=_<0?0:(_*=_)*_*I.dot3(u,g,w))+(n=L<0?0:(L*=L)*L*M.dot3(O,E,T))+(r=z<0?0:(z*=z)*z*H.dot3(R,j,P))+(D<0?0:(D*=D)*D*N.dot3(C,A,k)))},t.perlin2=function(e,t){let i=Math.floor(e),s=Math.floor(t);e-=i,t-=s;const n=a[(i&=255)+o[s&=255]].dot2(e,t),r=a[i+o[s+1]].dot2(e,t-1),h=a[i+1+o[s]].dot2(e-1,t),c=a[i+1+o[s+1]].dot2(e-1,t-1),m=d(e);return l(l(n,h,m),l(r,c,m),d(t))},t.perlin3=function(e,t,i){let s=Math.floor(e),n=Math.floor(t),r=Math.floor(i);e-=s,t-=n,i-=r;const h=a[(s&=255)+o[(n&=255)+o[r&=255]]].dot3(e,t,i),c=a[s+o[n+o[r+1]]].dot3(e,t,i-1),m=a[s+o[n+1+o[r]]].dot3(e,t-1,i),p=a[s+o[n+1+o[r+1]]].dot3(e,t-1,i-1),u=a[s+1+o[n+o[r]]].dot3(e-1,t,i),g=a[s+1+o[n+o[r+1]]].dot3(e-1,t,i-1),w=a[s+1+o[n+1+o[r]]].dot3(e-1,t-1,i),f=a[s+1+o[n+1+o[r+1]]].dot3(e-1,t-1,i-1),v=d(e),b=d(t),y=d(i);return l(l(l(h,u,v),l(c,g,v),y),l(l(m,w,v),l(p,f,v),y),b)}}(this)},Gw6M:function(e,t,i){"use strict";var s=i("mXGw"),n=i.n(s),o=i("8Jek"),a=i.n(o),r=i("kMCw"),h=i("hsHj"),c=i("UutA"),d=i("yAx5"),l=Object(c.b)(["&.contentNotFound{@media ","{max-width:unset;padding:0 26px;}@media ","{padding:0 24px;}@media ","{padding:0 36px;}.o-error{text-align:center;font-family:",";color:",";p{letter-spacing:0.4px;}}.o-imageContainer{position:relative;width:100%;}.o-oh-no{font-size:32px;font-weight:",";margin-top:10px;@media ","{font-size:",";}}.o-error__status{font-weight:",";margin-top:40px;color:",";font-size:",";@media ","{margin-top:150px;}}.o-error__description{margin-top:18px;color:",";font-size:",";@media ","{margin-top:10px;}}.return-home{@media ","{margin-bottom:100px;}}}"],e=>e.theme.mediaQuery.large,e=>e.theme.mediaQuery.mediumOnly,e=>e.theme.mediaQuery.medium,e=>e.theme.fonts.primaryFontFamily,e=>e.theme.colors.BLACK,e=>e.theme.fonts.fontWeight.light,e=>e.theme.mediaQuery.medium,e=>Object(d.c)(e.theme.fonts.fontSize.heading.large.h2),e=>e.theme.fonts.fontWeight.medium,e=>e.theme.colors.BLACK,e=>Object(d.c)(e.theme.fonts.fontSize.icon.tertiary),e=>e.theme.mediaQuery.medium,e=>e.theme.colors.GREY111,e=>Object(d.c)(e.theme.fonts.fontSize.body.small.primary),e=>e.theme.mediaQuery.medium,e=>e.theme.mediaQuery.medium),m=i("dXIF"),p=i("Qqhj"),u=i("WRbp"),g=n.a.createElement;class w extends s.PureComponent{render(){const{errorInfo:e,locale:t,className:i}=this.props,s=a()("container contentNotFound",i),n=e&&e.get("title"),o=e&&e.get("description"),h=e&&e.get("descriptionRichText"),c=e&&e.get("subtitle"),d=e&&e.get("callToAction"),l=d&&d.get("url"),u=Object(r.V)({pathname:l,query:{language:t}}),w="".concat(l).concat(t),f=d&&d.get("title");return e?g("div",{className:s},g("div",{className:"o-imageContainer"},g("div",{className:"o-error"},g("div",{className:"col-xs-12 col-md-offset-3 col-md-6 "},g("p",{className:"o-error__status"},n),g("h2",{className:"o-oh-no"},c),g("p",{className:"o-error__description"},o),h&&g(p.a,{data:h,className:"o-error__description"}),g(m.a,{variant:"secondary",className:"return-home",labelText:f,as:w,to:u}))))):null}}w.displayName="ContentNotAvailable";const f=Object(u.a)(w);var v=Object(h.a)(f,l);i.d(t,"a",function(){return v})},k9d9:function(e,t,i){"use strict";i.r(t);var s=i("Rbzu"),n=i("2Fjn"),o=i("z3IF"),a=i("azxR"),r=i("mXGw"),h=i.n(r),c=i("FvK5"),d=i("/gfI"),l=i.n(d);const m="LOAD_STORY_DETAIL",p="article",u="immersive",g="podcast";var w=i("7XJb"),f=i("sW4n");const v=e=>({type:"LOAD_STORY_DETAIL_SUCCESS",data:e});var b=[e=>({type:m,data:e})],y=i("v0uu"),x=i("D36L");function*S(e){try{const i=yield Object(w.b)(f.a.fetch,"".concat(y.k.storyDetail,"/").concat(e.data.slug),e);yield Object(w.c)(v(i))}catch(t){yield Object(w.c)(Object(x.f)(t))}}var O=i("/jKG"),E=i("lgvl"),T=i("ZjZ4"),R=i.n(T),j=i("gCY8"),P=i("OONx"),C=i("8Jek"),A=i.n(C),k=i("hsHj"),I=i("UutA"),M=i("yAx5"),H=Object(I.b)(["&.m-pageTitle{color:",";z-index:",";a{color:",";text-decoration:none;border-bottom:1px solid ",";padding-bottom:unset;span{background:none;}}.page-description{p{font-size:",";color:",";line-height:1.25;letter-spacing:1px;.a-markdownContent__link{span{color:",";padding-bottom:3px;background:none;}}}}&.-light{background-color:",";.a-tag{border:",";}.page-description{p{color:",";}}}&.-hasBackground{&.-light{.a-tag{color:",";border-color:",";}}&.-dark{.a-tag{color:",";border-color:",";}}}.m-pageTitle__wrapper{padding-top:80px;padding-bottom:80px;@media ","{padding-top:",";padding-bottom:",";}&.-hasBackgroundImg{padding:0;}}&.-isFullScreen{height:100%;display:flex;.m-pageTitle__wrapper{min-height:100vh;width:100%;display:flex;flex-direction:column;justify-content:center;align-items:center;&.-minHeightAuto{min-height:auto;}}}.-description-wrapper{margin:0;&::after{content:none;}}.m-tags{& + div.-description-wrapper{margin-top:30px;}}.a-soundCloud{margin-top:40px;@media ","{margin-top:60px;}}.groupTitles{margin-bottom:0;display:flex;flex-direction:column;.titleSpace{position:absolute;height:1px;width:1px;overflow:hidden;}}}"],e=>e.theme.colors.WHITE,e=>e.theme.zIndex.zDefault,e=>e.inlineStyle?e.inlineStyle.color:e.theme.colors.BLACK,e=>e.inlineStyle?e.inlineStyle.color:e.theme.colors.TEXT.GREY1,e=>Object(M.c)(e.theme.fonts.fontSize.heading.large.h4),e=>e.theme.colors.BLACK,e=>e.theme.colors.BLACK,e=>e.theme.colors.BLACK,e=>e.theme.borders.quaternary,e=>e.theme.colors.WHITE,e=>e.theme.colors.WHITE,e=>e.theme.colors.WHITE,e=>e.theme.colors.BLACK,e=>e.theme.colors.BLACK,e=>e.theme.mediaQuery.small,e=>e.theme.padding.paddingExtraExtraLarge,e=>e.theme.padding.paddingExtraExtraLarge,e=>e.theme.mediaQuery.small),N=i("4H89"),_=i("2W2t"),L=i("bN0n"),z=i("Qqhj"),D=i("ulNC"),B=i("WRbp"),F=h.a.createElement;class W extends r.PureComponent{render(){const{className:e,data:t,isFullScreen:i,slnId:s,minHeightAuto:n=!1,customStyle:o,hasBackgroundImg:a,inlineStyle:r,locale:h}=this.props,c=t.get("title"),d=t.get("subtitle"),l=t.get("description"),m=t.get("descriptionRichText"),p=t.get("soundCloudUrl"),u=t.get("hasPlaylist"),g=t.get("colorTheme"),w="light"===g?"-light":"-dark",f=a?"dark"===g?"-dark":"-light":w,v=t.get("backgroundColor"),b={backgroundColor:v},y=A()("".concat(e," m-pageTitle focus-styling"),w,{"-isFullScreen":i,"-hasBackground":v}),x=A()("m-pageTitle__wrapper",{"-minHeightAuto":n,"-hasBackgroundImg":a});return F(N.a,{className:y,style:b},F("div",{className:x},F(_.a,{disablePadding:!0,className:o},F("div",{className:"row","data-sln-id":"".concat(s,"_container")},F("div",{className:"col-xs-12 col-sm-8 col-sm-offset-2 col-md-6 col-md-offset-3"},F("h1",{className:"groupTitles"},d&&F("span",{className:"h5 -secondary ".concat(f," -staggerInUp -stagger1 margin-bottom-10"),"data-sln-id":"".concat(s,"_pageSubTitle"),style:r},d),F("span",{className:"titleSpace"},"\xa0\xa0"),c&&F("span",{className:"h1 ".concat(f," -staggerInUp -stagger2 margin-bottom-20"),"data-sln-id":"".concat(s,"_pageTitle"),style:r},c)),l&&F("div",{className:"h4 ".concat(f," -staggerInUp -stagger4"),style:r},F(D.a,{className:"page-description",data:t,inlineStyle:r,locale:h})),m&&F(z.a,{data:m,className:"h4 ".concat(w," -staggerInUp -stagger4")}),p&&F(L.a,{className:"-staggerInUp -stagger4",url:p,hasPlaylist:u,slnId:"".concat(s,"_pageTitle")}))))))}}W.displayName="PageTitle";const V=Object(B.a)(W);var U=Object(k.a)(V,H),G=i("fGYw"),X=Object(I.b)(["&.m-pageTitleBackground{.m-pageTitleBackground__wrapper{&.-position{position:relative;}&.hero__wrapper{position:relative;margin:0 auto;width:100%;min-height:100vh;display:flex;flex-direction:column;justify-content:center;overflow:hidden;.o-hero__bg,.o-hero__bgImg,.o-hero__bgImmersive,.o-hero__bgVideo,.o-hero__fullVideo,.a-responsiveImage{position:absolute;width:100%;height:100%;top:0;left:0;}&.-dark{&::after{","}}.o-hero__bgImg{.a-responsiveImage{width:100%;height:100%;}.a-parallaxImage{position:absolute;top:0;right:0;bottom:0;left:0;.parallax-inner{transform:translate3d(0%,6.61028%,0);position:absolute;top:0;right:0;bottom:0;left:0;> div{width:100%;height:100%;}}}img{",";}}}&.-overlap{margin-top:-60px;}.-info{top:80px;@media ","{top:120px;}}}}"],e=>G.a.imageOverlay([{hex:e.theme.colors.BLACK,opacity:.5}]),G.a.objectFit(),e=>e.theme.mediaQuery.medium),q=i("LqsF"),Y=h.a.createElement;class Q extends r.PureComponent{render(){const{className:e,data:t,isFullScreen:i,slnId:s,minHeightAuto:n=!1,overlapHeader:o,inlineStyle:a,wide:r,locale:h,viewportInfo:c}=this.props,d=t.get("backgroundImage"),l="light"===t.get("theme")?"-light":"-dark",m=A()("".concat(e," m-pageTitleBackground__wrapper"),{"-overlap":o,"-wide":r});return Y(N.a,{className:"".concat(e," m-pageTitleBackground focus-styling")},Y("div",{className:"".concat(m," -position hero__wrapper ").concat(l)},d&&Y(q.a,{backgroundImage:d,slnId:s,viewportInfo:c,wide:!0,pictureTag:!0}),t&&Y(U,{data:t,inlineStyle:a,customStyle:"-info",hasBackgroundImg:!0,isFullScreen:i,minHeightAuto:n,locale:h})))}}Q.displayName="PageTitleBackground";const K=Object(B.a)(Q);var J=Object(k.a)(K,X),Z=i("Lyzh"),$=i("Gtlg"),ee=i("xDfw"),te=i("ti5g"),ie=h.a.createElement;const se={[P.c.ProductListing]:{componentName:"ProductListing",customDataProp:"items",customProps:{template:"product",slnId:"atm_ProductListing",centerAligned:!0},isDataAtRoot:!1,isObjectExpected:!1}};class ne extends r.PureComponent{constructor(){var e;super(...arguments),e=this,Object(a.a)(this,"getPageTitle",()=>{const{data:e}=this.props,t=e.get("tags"),i=e.get("storyHeader"),s=i&&i.get("colorTheme"),n=i&&i.get("backgroundColor"),o=i&&i.getIn(["item","0"]),a=o&&o.get("title"),r=o&&o.get("subtitle"),h=o&&o.get("description"),c=o&&o.get("descriptionRichText");return{tags:t,theme:s,backgroundColor:n,title:a,subtitle:r,description:h,backgroundImage:i&&i.get("backgroundImage"),textColor:i&&i.get("textColor"),descriptionRichText:c}}),Object(a.a)(this,"createImpressionData",(e,t)=>{const i=e.map(e=>{let i=Object(c.List)();i=i.push(Object(c.fromJS)(e));const{position:s}=e;let n=Object(c.Map)({variants:i,position:s});return n=Object(c.List)(n?[n]:[]),Object(te.i)(n,"".concat(ee.ne,": ").concat(t)).toJS()});return R()(i)}),Object(a.a)(this,"productPosition",0),Object(a.a)(this,"productCardData",e=>{const{productDetail:t,variants:i}=e,n=[];return n.push(Object(s.a)({},t,i[0],{position:this.productPosition})),this.productPosition+=1,n}),Object(a.a)(this,"refineProduct",e=>e&&e.toJS().reduce((e,t)=>{switch(t.cardType){case ee.Dd:e.push(Object(s.a)({},t.item[0].productDetails,{position:this.productPosition})),this.productPosition+=1;break;case ee.Fd:t.item&&e.push(...this.refineProduct(Object(c.fromJS)(t.item)));break;case ee.Ad:e.push(...this.productCardData(t.item[0]));break;case ee.de:e.push(Object(s.a)({},t.item[0].productDetails,{position:this.productPosition})),this.productPosition+=1;break;default:return e}return e},[])),Object(a.a)(this,"addToCartSuccessAction",function(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ee.gd.ARTICLE,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ee.u;const{cartData:n}=e.props;let o=Object(c.List)();o=o.push(t);const a=Object(c.Map)({variants:o}),r={productDetails:Object(c.List)(a?[a]:[]),showCartValue:!0,cartData:n,variantId:t.get("variantId"),noPosition:!0};Object($.e)(r,s,"".concat(ee.ne,": ").concat(i))})}componentDidMount(){const{data:e,cartData:t,userInfo:i,currencyCode:s}=this.props,n=e.get("slug"),o=e.getIn(["storyItem","articleVariants"]),a=this.refineProduct(o),r=Object($.b)({userInfo:i,pageType:ee.ne,pageName:ee.gd.ARTICLE,story_title:e.get("slug"),cartData:t,currencyCode:s,impressions:this.createImpressionData(a,n)});Object($.a)(r)}render(){const{data:e,toggleHeader:t,toggleSupportingNav:i,socialShareOnClick:s,locale:n,viewportInfo:o}=this.props,a=e.get("storyItem"),r=a&&a.get("hero"),h=r&&r.get("cardType"),d=a&&a.get("articleVariants"),l=this.getPageTitle(),{backgroundImage:m,textColor:p}=l,u=m?J:U,g={color:p},w=e.get("slug");return d?ie("div",null,r&&ie(Z.a,{immersiveVariant:h,hero:r,offsets:{yMax:15,yMin:0,xMax:0,xMin:0},viewportInfo:o,overlapHeader:!0,withoutSubNav:!0}),l&&ie(u,{data:Object(c.fromJS)(l),isFullScreen:!0,minHeightAuto:!0,overlapHeader:!0,inlineStyle:g,locale:n,viewportInfo:o}),d&&ie(j.a,{items:d,toggleHeader:t,toggleSupportingNav:i,addToCartSuccessAction:this.addToCartSuccessAction,pageType:ee.gd.ARTICLE,socialShareOnClick:s,listName:"".concat(ee.ne,":").concat(w),customSettings:se})):null}}Object(a.a)(ne,"defaultProps",{toggleHeader(){},toggleSupportingNav(){}}),ne.displayName="ArticlePage";var oe=Object(B.a)(ne),ae=i("T5cu"),re=i.n(ae),he=i("W0B4"),ce=i.n(he),de=Object(I.b)([""]),le=i("kMCw"),me=61,pe=i("npKj"),ue=i("kvnU"),ge=Object(I.b)(["&.m-narration{&.-paused{.a-narrationSentence{animation-play-state:paused !important;}}&.-ready{.a-narrationSentence{animation-name:none;}}&.-playing{.a-narrationSentence:first-child{animation-play-state:running;}}.a-container{padding-top:110px;padding-bottom:110px;}.focus-visible:focus{",";}}"],Object(ue.a)()),we=i("FdmI"),fe=i.n(we),ve=e=>{const t="".concat(e,"\n").split("\n");let i=0;const s=[];let n={content:""};return t.reduce((e,t)=>{const o=t.trim();if(o&&!n.id)n.id=o;else if(n.start)if(""!==o){const e=""!==n.content?" ".concat(o):o;n.content+=e}else s.push(n),n={content:""};else{const e=o.split(" --\x3e "),t={minutes:e[0].split(":")[1],seconds:e[0].split(":")[2].split(",")[0],milliseconds:e[0].split(":")[2].split(",")[1]},s=new Date("2000-01-01T00:".concat(t.minutes,":").concat(t.seconds,".").concat(t.milliseconds)),a=fe()("".concat(t.seconds).concat(t.milliseconds),10),r={minutes:e[1].split(":")[1],seconds:e[1].split(":")[2].split(",")[0],milliseconds:e[1].split(":")[2].split(",")[1]},h=new Date("2000-01-01T00:".concat(r.minutes,":").concat(r.seconds,".").concat(r.milliseconds)),c=fe()("".concat(r.seconds).concat(r.milliseconds),10);n.delay=a-i,i=c,n.start=s.getTime()-new Date("2000-01-01T00:00:00.00").getTime(),n.duration=h-s,n.end=a+n.duration}return s},0)},be=Object(I.b)(["&.a-chapterTitle{.a-chapterTitle__chapter{display:flex;align-items:center;margin-bottom:",";}.a-svgIcon{height:30px;width:30px;margin-right:8px;display:",";@media ","{display:block;}}.h5{margin:0;padding:0;}}"],e=>e.chapterTitle&&"10px",e=>!e.chapterTitle&&"none",e=>!e.chapterTitle&&e.theme.mediaQuery.small),ye=i("Lz8P"),xe=h.a.createElement;class Se extends r.PureComponent{render(){const{className:e,chapterNumber:t,chapterTotal:i,chapterTitle:s,colorTheme:n}=this.props,o="light"===n,a=o?"-light":"-dark";return xe("div",{className:"".concat(e," a-chapterTitle ").concat(a)},xe("div",{className:"a-chapterTitle__chapter"},xe(ye.a,{icon:"audio",invertColor:o}),xe("h3",{className:"".concat(a," h5")},void 0===t?"".concat(y.l):"".concat(y.x," ").concat(t+1," ").concat(i?"/ ".concat(i):""))),s&&xe("h3",{className:a},xe("span",null,s)))}}Se.displayName="ChapterTitle";var Oe=Object(k.a)(Se,be),Ee=i("v4gl");const Te=Object(I.d)([" "," "],Ee.a.narrationText.highlight);var Re=Object(I.b)(["&.a-narrationSentence{background:",";color:",";background-size:200%;background-position:0 0;display:inline;animation-name:",";animation-play-state:paused;animation-direction:normal;animation-timing-function:linear;padding:6px 0;white-space:normal;&.-isReset{animation-name:none;}&.-isRead{background:",";animation-name:none;& + .a-narrationSentence{animation-play-state:running;}}}"],e=>"linear-gradient(to right, transparent 50%, ".concat("dark"===e.colorTheme?e.theme.colors.TEXT.PINK1:e.theme.colors.TEXT.PINK2," 50%)"),e=>"dark"===e.colorTheme?e.theme.colors.TEXT.GREY2:e.theme.colors.TEXT.WHITE,Te,e=>"dark"===e.colorTheme?e.theme.colors.TEXT.PINK1:e.theme.colors.TEXT.PINK2),je=h.a.createElement;class Pe extends r.PureComponent{constructor(){super(...arguments),Object(a.a)(this,"state",{isRead:!1,isReset:!1}),Object(a.a)(this,"onAnimationEnd",()=>{this.setState({isRead:!0})}),Object(a.a)(this,"resetState",()=>{this.setState({isRead:!1,isReset:!0})})}componentDidUpdate(){const{isRead:e}=this.state,{resetState:t}=this.props;t&&e&&this.resetState()}render(){const{isRead:e,isReset:t}=this.state,{className:i,data:{content:s},details:{initialDelay:n,duration:o}}=this.props,a={animationDuration:"".concat(o,"ms"),animationDelay:"".concat(n,"ms")},r=A()(i,"a-narrationSentence",{"-isRead":e,"-isReset":e&&t});return je("span",{className:r,style:a,onAnimationEnd:()=>this.onAnimationEnd()},s," ")}}Pe.displayName="NarrationSentence";var Ce=Object(k.a)(Pe,Re),Ae=h.a.createElement;class ke extends r.PureComponent{constructor(e){super(e),Object(a.a)(this,"convertData",()=>{const{data:e}=this.props,t=e.get("description");this.setState({narrationText:t?ve(t):[]})}),Object(a.a)(this,"startNarration",()=>{this.setState({hasPlayed:!0,resetState:!1})}),Object(a.a)(this,"pauseNarration",()=>{this.setState({isPaused:!0})}),Object(a.a)(this,"resumeNarration",()=>{this.setState({isPaused:!1})}),Object(a.a)(this,"resetNarration",e=>{this.setState({isPaused:!1,hasPlayed:!1,resetState:!0},this.startNarration()),e&&setTimeout(()=>{this.startNarration()},1)}),Object(a.a)(this,"renderContent",()=>{const{narrationText:e}=this.state,{colorTheme:t}=this.props;return e.map(e=>{const i={initialDelay:e.delay,duration:e.duration};return Ae(Ce,{data:e,details:i,colorTheme:t,key:e.id,resetState:this.state.resetState})})}),this.timeoutsArray=[],this.state={narrationText:[],hasPlayed:!1,isPaused:!1,resetState:!1}}componentDidMount(){this.convertData()}render(){const{narrationText:e,hasPlayed:t,isPaused:i}=this.state,{className:s,data:n,chapterNumber:o,colorTheme:a}=this.props,r=n.get("title"),h=A()(s,"m-narration",{"-ready":!t,"-playing":t,"-paused":i});return Ae("div",{className:h},Ae(_.a,null,Ae("div",{className:"row"},Ae("div",{className:"col-xs-12 col-sm-8 col-sm-offset-2 col-md-6 col-md-offset-3",tabIndex:y.zc},Ae(Oe,{chapterNumber:o,chapterTitle:r,colorTheme:a}),e.length>0&&Ae("p",{className:"m-narration__copy"},this.renderContent())))))}}ke.displayName="NarrationText";const Ie=Object(B.a)(ke);var Me=Object(k.a)(Ie,ge),He=Object(I.b)(["&.m-audioPlayer{position:fixed;right:0;bottom:-44px;left:0;z-index:",";transition:transform "," ",";@media ","{bottom:-64px;}&.-isVisible{padding-top:30px;transform:translateY(-44px);@media ","{transform:translateY(-64px);}&.-inPartialView{@media ","{transform:translateY(-2px);transition-delay:2700ms;}}&:hover{transform:translateY(-44px);transition-delay:0s;@media ","{transform:translateY(-64px);}}}.m-audioPlayer__tracks{height:2px;position:relative;@media ","{height:4px;}}.m-audioPlayer__trackBuffered,.m-audioPlayer__trackPlayback{height:100%;width:100%;position:absolute;top:0;left:0;transform-origin:left;}.m-audioPlayer__trackBuffered{background-color:",";transition:transform 1s ease;}@keyframes playback{0%{transform:scaleX(0);}100%{transform:scaleX(1);}}.m-audioPlayer__trackPlayback{background-color:",";transform:scaleX(0);animation:playback linear;animation-play-state:paused;animation-delay:100ms;}.m-audioPlayer__controls{height:42px;display:flex;align-items:center;background-color:",";@media ","{height:60px;}}.m-audioPlayer__playPause{height:100%;width:42px;text-indent:100%;white-space:nowrap;overflow:hidden;position:relative;margin:0;padding:0;background-color:",";cursor:pointer;transition:background-color "," ",";@media ","{width:60px;}.a-animatedIcon{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;justify-content:center;align-items:center;}&:hover,&:active,&:focus{background-color:",";.a-animatedIcon{&::before{background-color:",";}}}}.m-audioPlayer__trackInfo{display:flex;flex:1;align-items:center;padding:0 12px 0 16px;@media ","{padding:0 22px 0 30px;}}.a-chapterTitle{flex:1 0 auto;}.m-audioPlayer__chapterControls{display:flex;button{background-color:transparent;padding:4px;width:20px;margin:0;height:20px;overflow:hidden;cursor:pointer;box-sizing:content-box;transition:transform "," ",";@media ","{padding:8px;}& + button{margin-left:4px;}&:not(:disabled){&.m-audioPlayer__previousChapter{&:hover,&:active,&:focus{transform:translateY(-5px);}}&.m-audioPlayer__nextChapter{&:hover,&:active,&:focus{transform:translateY(5px);}}}@media ","{&:not(:disabled){&.m-audioPlayer__previousChapter{&:hover,&:active,&:focus{transform:translateY(0);}&.mobileView_AudioPlayerBtn{transform:translateY(-5px);}}&.m-audioPlayer__nextChapter{&:hover,&:active,&:focus{transform:translateY(0);}&.mobileView_AudioPlayerBtn{transform:translateY(5px);}}}}.a-svgIcon{transition:fill "," ",";}&:disabled{cursor:default;.a-svgIcon{fill:",";}}span{text-indent:100%;display:block;overflow:hidden;}}}.m-audioPlayer__muteControl{position:relative;display:flex;&::before,&::after{content:'';position:absolute;left:0;display:block;width:1px;height:8px;background:",";opacity:0.8;}&::before{top:0;}&::after{bottom:0;}.m-audioPlayer__mute{position:relative;background-color:transparent;width:20px;height:16px;margin:0;padding:12px 11px 9px;overflow:hidden;cursor:pointer;box-sizing:content-box;transition:transform "," ",";@media ","{padding:20px;}.a-svgIcon{width:16px;height:16px;transition:fill "," ",";}&::after{content:'';position:absolute;top:9px;left:21px;display:block;width:2px;height:23px;background:",";box-shadow:1px 1px 3px rgba(0,0,0,1);opacity:0;transform:scale(0.7) rotate(45deg);transform-origin:50% 50%;transition:all "," ",";@media ","{top:17px;left:30px;}}}}&.-reset{.m-audioPlayer__trackPlayback{transform:scaleX(0);animation:0s ease;}}&.-hasPlayed{.m-audioPlayer__trackPlayback{animation-fill-mode:forwards;}}&.-hasEnded{.m-audioPlayer__trackPlayback{transform:scaleX(1);animation:0s ease;}}&.-isPlaying{@media ","{transition-delay:2700ms;transform:translateY(-4px);}.m-audioPlayer__trackPlayback{animation-play-state:running;}}&.-isPaused{.m-audioPlayer__trackPlayback{animation-play-state:paused;}}&.-isMuted{.m-audioPlayer__muteControl{.m-audioPlayer__mute{.a-svgIcon{fill:",";}&::after{opacity:1;background:",";transform:scale(1) rotate(45deg);}}}}}"],e=>{let{theme:t}=e;return t.zIndex.zDefault},e=>{let{theme:t}=e;return t.duration.normal},e=>{let{theme:t}=e;return t.easing.easeOutQuart},e=>{let{theme:t}=e;return t.mediaQuery.small},e=>{let{theme:t}=e;return t.mediaQuery.small},e=>{let{theme:t}=e;return t.mediaQuery.medium},e=>{let{theme:t}=e;return t.mediaQuery.small},e=>{let{theme:t}=e;return t.mediaQuery.small},e=>Object(M.e)(.7,e.theme.colors.ACTION.RED1),e=>{let{theme:t}=e;return t.colors.ACTION.RED1},e=>{let{theme:t}=e;return t.colors.BLACK},e=>{let{theme:t}=e;return t.mediaQuery.small},e=>{let{theme:t}=e;return t.colors.UI.GREY4},e=>{let{theme:t}=e;return t.duration.normal},e=>{let{theme:t}=e;return t.easing.easeOutQuart},e=>{let{theme:t}=e;return t.mediaQuery.small},e=>{let{theme:t}=e;return t.colors.UI.GREY3},e=>{let{theme:t}=e;return t.colors.UI.GREY3},e=>{let{theme:t}=e;return t.mediaQuery.small},e=>{let{theme:t}=e;return t.duration.normal},e=>{let{theme:t}=e;return t.easing.primary},e=>{let{theme:t}=e;return t.mediaQuery.small},e=>{let{theme:t}=e;return t.mediaQuery.xSmallMax},e=>{let{theme:t}=e;return t.duration.normal},e=>{let{theme:t}=e;return t.easing.primary},e=>{let{theme:t}=e;return t.colors.TEXT.GREY2},e=>e.theme.colors.TEXT.GREY1,e=>{let{theme:t}=e;return t.duration.normal},e=>{let{theme:t}=e;return t.easing.primary},e=>{let{theme:t}=e;return t.mediaQuery.small},e=>{let{theme:t}=e;return t.duration.normal},e=>{let{theme:t}=e;return t.easing.primary},e=>{let{theme:t}=e;return t.colors.TEXT.WHITE},e=>{let{theme:t}=e;return t.duration.normal},e=>{let{theme:t}=e;return t.easing.primary},e=>{let{theme:t}=e;return t.mediaQuery.small},e=>{let{theme:t}=e;return t.mediaQuery.medium},e=>{let{theme:t}=e;return t.colors.ACTION.RED1},e=>{let{theme:t}=e;return t.colors.ACTION.RED1}),Ne=i("1Xds"),_e=500,Le=i("gOf/"),ze=h.a.createElement;class De extends r.PureComponent{constructor(e){super(e),Object(a.a)(this,"onLoad",()=>{this.setState({duration:this.audioNode.duration})}),Object(a.a)(this,"onEnded",()=>{this.setState({isPlaying:!1,hasEnded:!0}),this.props.setNarrationState("idle")}),Object(a.a)(this,"onPlaying",()=>{this.setState({resetPlayer:!1}),this.props.setNarrationState("playing")}),Object(a.a)(this,"onClick",()=>{const{isPlaying:e,hasPlayed:t,hasEnded:i,isBackgroundPlaying:s}=this.state,{handlePauseClick:n,handlePlayClick:o,handleResetClick:a,hasBegunStory:r,chapterNumber:h}=this.props;void 0!==h?(this.setState({hasPlayed:!0,isPlaying:!e,hasEnded:!1}),e&&(this.audioNode.pause(),n()),e||!t||i||(this.audioNode.play(),o(!0)),e||t||i||(this.audioNode.play(),o()),i&&(this.audioNode.play(),a())):r&&(s?this.backgroundAudioNode.pause():this.backgroundAudioNode.play(),this.setState(e=>({isBackgroundPlaying:!e.isBackgroundPlaying})))}),Object(a.a)(this,"onProgressUpdate",()=>{setTimeout(()=>{this.updateDownloadProgress(this.audioNode.buffered)},100)}),Object(a.a)(this,"updateDownloadProgress",e=>{const{duration:t}=this.state;if(e.length){const i=100*e.end(0)/t/100;this.setState({buffered:i})}}),Object(a.a)(this,"resetAudioPlayer",()=>{this.setState({hasPlayed:!1,isPlaying:!1,resetPlayer:!0})}),Object(a.a)(this,"rewindAudio",()=>{this.audioNode.pause(),this.audioNode.currentTime=0}),Object(a.a)(this,"nextChapter",()=>{const{chapterNumber:e,handleChapterNavigation:t}=this.props,i=e+1;t(),this.scrollToSectionById(i),this.setState({addNextBtnClass:!0},()=>{this.timer=setTimeout(()=>{this.setState({addNextBtnClass:!1})},100)})}),Object(a.a)(this,"previousChapter",()=>{const{chapterNumber:e,handleChapterNavigation:t}=this.props,i=e-1;t(),this.scrollToSectionById(i),this.setState({addPrevBtnClass:!0},()=>{this.timer=setTimeout(()=>{this.setState({addPrevBtnClass:!1})},100)})}),Object(a.a)(this,"scrollToSectionById",e=>{const t=document.querySelector('[data-chapter-id="'.concat(e,'"]'));t&&Object(le.b)(t.offsetTop-Ne.b,_e)}),Object(a.a)(this,"toggleMute",()=>{const{isMuted:e}=this.state;e?(this.audioNode.muted=!1,this.backgroundAudioNode.muted=!1):(this.audioNode.muted=!0,this.backgroundAudioNode.muted=!0),this.setState(e=>({isMuted:!e.isMuted}))}),this.state={hasPlayed:!1,hasEnded:!1,isMuted:!1,isPlaying:!1,isBackgroundPlaying:!1,resetPlayer:!1,buffered:0,duration:0,addPrevBtnClass:!1,addNextBtnClass:!1},this.timer=null,this.backgroundAudioNode=Object(r.createRef)()}componentDidMount(){this.audioNode.addEventListener("progress",this.onProgressUpdate)}componentDidUpdate(e){e.audioFileUrl!==this.props.audioFileUrl&&(this.resetAudioPlayer(),this.onProgressUpdate()),this.props.hasBegunStory!==e.hasBegunStory&&this.setState({isBackgroundPlaying:!0})}componentWillUnmount(){this.audioNode.removeEventListener("progress",this.onProgressUpdate,!1),clearTimeout(this.timer)}render(){const{resetPlayer:e,hasPlayed:t,hasEnded:i,isMuted:s,isPlaying:n,buffered:o,duration:a,isBackgroundPlaying:r,addNextBtnClass:h,addPrevBtnClass:c}=this.state,{className:d,chapterNumber:l,chapterTotal:m,audioFileUrl:p,backgroundAudioFileUrl:u,isVisible:g,hasBegunStory:w,inPartialView:f}=this.props,v=A()(d,"m-audioPlayer",{"-hasPlayed":t&&!i,"-hasEnded":i,"-isPlaying":n||w,"-isMuted":s,"-isVisible":g||w,"-inPartialView":f,"-reset":e,"-isPaused":!n}),b={transform:"scaleX(".concat(o,")")},x={animationDuration:"".concat(a,"s")},S=l===m-1,O=0===l,E=n||void 0===l&&r;return ze("div",{className:v,"data-sln-id":"automation_audioPlayer_container"},u&&ze("audio",{src:u,playsInline:!0,id:"background-audio",loop:!0,crossOrigin:"anonymous",ref:e=>{this.backgroundAudioNode=e}}),ze("audio",{src:p||void 0,onPlaying:this.onPlaying,onEnded:this.onEnded,onLoadedData:this.onLoad,playsInline:!0,ref:e=>{this.audioNode=e}}),ze("div",{className:"m-audioPlayer__container"},ze("div",{className:"m-audioPlayer__tracks"},ze("span",{className:"m-audioPlayer__trackBuffered",style:b}),ze("span",{className:"m-audioPlayer__trackPlayback",style:x})),ze("div",{className:"m-audioPlayer__controls"},ze("button",{className:"m-audioPlayer__playPause",onClick:this.onClick},E?y.Ib:y.Pb,ze(Le.a,{icon:"playPause",animate:E})),ze("div",{className:"m-audioPlayer__trackInfo"},ze(Oe,{chapterNumber:l,chapterTotal:m,colorTheme:"light"}),m>1&&void 0!==l&&ze("div",{className:"m-audioPlayer__chapterControls"},ze("button",{className:"m-audioPlayer__nextChapter ".concat(h?"mobileView_AudioPlayerBtn":""),onClick:this.nextChapter,disabled:S},ze(ye.a,{icon:"arrowThinDown",invertColor:!0}),ze("span",null,y.y)),ze("button",{className:"m-audioPlayer__previousChapter ".concat(c?"mobileView_AudioPlayerBtn":""),onClick:this.previousChapter,disabled:O},ze(ye.a,{icon:"arrowThinUp",invertColor:!0}),ze("span",null,y.z)))),ze("div",{className:"m-audioPlayer__muteControl"},ze("button",{id:"mute-toggle",className:"m-audioPlayer__mute",onClick:this.toggleMute},ze(ye.a,{icon:"volume",invertColor:!0}),ze("span",null,s?y.Ec:y.Bb))))))}}Object(a.a)(De,"defaultProps",{setNarrationState:()=>{}}),De.displayName="AudioPlayer";const Be=Object(B.a)(De);var Fe=Object(k.a)(Be,He),We=i("Di78"),Ve=i.n(We);function Ue(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this._x=e,this._y=t,this._z=i}var Ge=i("AxDq"),Xe=i("ZOIa"),qe=i.n(Xe);const Ye={url:e=>new qe.a((t,i)=>{const s=document.createElement("script");s.type="text/javascript",s.src=e,s.addEventListener("load",()=>t(s),!1),s.addEventListener("error",()=>i(s),!1),document.body.appendChild(s)}),urls:e=>qe.a.all(e.map(Ye.url))};var Qe=Ye,Ke=e=>{Qe.url(Ge.o).then(()=>{e&&e()}).catch(e=>{console.warn("Failed to load THREE.js: ".concat(e))})},Je=(e,t)=>{Qe.url(Ge.a).then(()=>{Qe.urls(t).then(()=>{e&&e()}).catch(e=>{console.warn("Failed to load THREE.js libraries: ".concat(e))})}).catch(e=>{console.warn("Failed to load THREE.EffectComposer: ".concat(e))})},Ze=()=>window&&window.THREE,$e=()=>window&&window.THREE&&window.THREE.CopyShader&&window.THREE.EffectComposer&&window.THREE.ShaderPass&&window.THREE.RenderPass,et=()=>window&&window.TweenMax,tt=e=>{Qe.url(Ge.p).then(()=>{e&&e()}).catch(e=>{console.warn("Failed to load TweenMax: ".concat(e))})};"".concat(y.w,"/static/1.4.0.1948-ne/audio/immersive/beolab-piano.mp3");var it=h.a.createElement,st=h.a.createElement;"".concat(y.w,"/static/1.4.0.1948-ne/audio/immersive/beolab-piano.mp3");var nt=h.a.createElement,ot=i("/m4v");const at="".concat(y.w,"/static/1.4.0.1948-ne/images/hero-immersive/B1/sea.gif"),rt="".concat(y.w,"/static/1.4.0.1948-ne/video/hero-immersive/B1/sea.mp4"),ht="".concat(y.w,"/static/1.4.0.1948-ne/images/hero-immersive/B1/sprite.png"),ct="".concat(y.w,"/static/1.4.0.1948-ne/images/hero-immersive/B1/video-mask-fallback.gif"),dt="The shape of sound";var lt=i("e5j3"),mt=h.a.createElement,pt=Object(ot.connect)(e=>({isMaskSupported:e.getIn(["global","globalData","deviceInfo","featureSupport","cssmask"])}),null)(class extends r.PureComponent{constructor(){super(...arguments),Object(a.a)(this,"onToggleclick",()=>{this.isScrolling=!0,setTimeout(()=>{this.isScrolling=!1,this.drawFrame()},2e3)}),Object(a.a)(this,"setupAnimation",()=>{this.step=0,this.sceneSetup(),this.panSetup(),this.cameraSetup(),this.objectSetup(),this.createCanvas(),this.drawFrame(),this.addListeners(),this.isSetup=!0}),Object(a.a)(this,"initialise",()=>{Ze()?this.setupAnimation():Ke(this.setupAnimation)}),Object(a.a)(this,"sceneSetup",()=>{this.updateScreenResolutionValues(),this.scene=new window.THREE.Scene,this.scene.fog=new window.THREE.FogExp2(0,.00499),this.renderer=new window.THREE.WebGLRenderer,this.renderer.setSize(this.sceneWidth,this.sceneHeight),this.renderer.setPixelRatio(window.devicePixelRatio)}),Object(a.a)(this,"panSetup",()=>{this.maxScrolledAmount=2*this.sceneHeight,this.scrolledAmount=window.scrollY||window.pageYOffset,this.pctScrolled=100*this.scrolledAmount/this.maxScrolledAmount,this.decimalScrolled=this.pctScrolled/100}),Object(a.a)(this,"cameraSetup",()=>{this.camera=new window.THREE.PerspectiveCamera(45,this.sceneWidth/this.sceneHeight,.01,1e4),this.camera.position.set(0,50,150),this.camera.lookAt(this.scene.position)}),Object(a.a)(this,"objectSetup",()=>{const e=new window.THREE.PlaneGeometry(500,500,200,200),t=new window.THREE.MeshBasicMaterial({color:16777215,transparent:!0,opacity:.5}),i=new window.THREE.Mesh(e,t);i.rotation.x=-.5*Math.PI,i.position.set(0,0,0);const s=new window.THREE.Geometry;s.vertices=e.vertices;const{data:n}=this.props,o=n&&n.getIn(["backgroundImage","media"]),a=o&&o.get("defaultAssetUrl")||ht,r=(new window.THREE.TextureLoader).load(a),h=new window.THREE.PointsMaterial({sizeAttenuation:!1,color:16777215,size:2,map:r,opacity:.9,transparent:!0});this.particles=new window.THREE.Points(s,h),this.particles.rotation.x=-.15*Math.PI,this.particles.rotation.z=-.25*Math.PI,this.particles.position.set(0,0,0),this.scene.add(this.particles)}),Object(a.a)(this,"pan",()=>{this.scrolledAmount=window.scrollY||window.pageYOffset,this.pctScrolled=100*this.scrolledAmount/this.maxScrolledAmount,this.decimalScrolled=this.pctScrolled/100}),Object(a.a)(this,"updateScreenResolutionValues",()=>{if(this.sceneContainer.current){const e=this.sceneContainer.current.getBoundingClientRect();this.sceneWidth=e.width,this.sceneHeight=e.height}else this.sceneWidth=window.innerWidth,this.sceneHeight=window.innerHeight}),Object(a.a)(this,"resize",()=>{this.updateScreenResolutionValues(),this.camera&&(this.camera.aspect=this.sceneWidth/this.sceneHeight,this.camera.updateProjectionMatrix()),this.renderer&&(this.renderer.setSize(this.sceneWidth,this.sceneHeight),this.renderer.setPixelRatio(window.devicePixelRatio))}),Object(a.a)(this,"drawFrame",()=>{const{isInView:e}=this.props;if(e){this.renderLoop=window.requestAnimationFrame(this.drawFrame),this.step+=.04;const e=new window.THREE.Vector2(0,0);this.particles.geometry.vertices.forEach(t=>{const i=t,s=new window.THREE.Vector2(i.x,i.y).sub(e);i.z=3.5*Math.sin(s.length()/-5+this.step)}),this.particles.geometry.verticesNeedUpdate=!0,this.particles.rotation.x=-(.15+.5*this.decimalScrolled)*Math.PI,this.camera.position.set(0,90,150),this.camera.lookAt(0,0,0),this.camera.position.set(0,90+60*this.decimalScrolled,150+50*this.decimalScrolled),this.renderer&&this.renderer.render(this.scene,this.camera)}}),Object(a.a)(this,"createCanvas",()=>{this.sceneContainer&&(this.sceneContainer.current.innerHTML="",this.sceneContainer.current.appendChild(this.renderer.domElement),this.resize())}),Object(a.a)(this,"addListeners",()=>{window.addEventListener("scroll",this.throttledOnScroll,!1),window.addEventListener("resize",this.throttledOnResize,!1),this.resize()}),Object(a.a)(this,"removeListeners",()=>{window.removeEventListener("scroll",this.throttledOnScroll,!1),window.removeEventListener("resize",this.throttledOnResize,!1)}),Object(a.a)(this,"destroyScene",()=>{this.stopAnimation(),this.scene&&this.scene.dispose(),this.sound&&(this.sound.setVolume(0),this.sound.stop())}),Object(a.a)(this,"stopAnimation",()=>{window.cancelAnimationFrame(this.renderLoop),this.renderer&&this.renderer.dispose&&this.renderer.dispose(),this.removeListeners()}),Object(a.a)(this,"restartAnimation",()=>{this.drawFrame(),this.removeListeners(),this.addListeners()}),Object(a.a)(this,"sceneContainer",Object(r.createRef)()),Object(a.a)(this,"throttledOnScroll",re()(this.pan,1)),Object(a.a)(this,"throttledOnResize",re()(this.resize,50))}componentDidMount(){this.initialise()}componentDidUpdate(e){const{isInView:t}=this.props;t&&this.isSetup?this.restartAnimation():e.isInView&&!t&&this.stopAnimation()}componentWillUnmount(){this.destroyScene()}render(){const{data:e,isMaskSupported:t,slnId:i}=this.props,s=e&&e.get("item").get(0),n=s&&s.getIn(["backgroundMedia","media"]),o=n&&n.get("defaultAssetUrl")||rt,a=n&&n.get("posterImageAssetUrl")||at;return mt("figure",{className:"o-hero__bgImmersive -B1 -fadeInSlow","data-slnm-id":"".concat(i,"_immersiveB1")},mt("div",{className:"o-hero__videoTextMask"},mt("div",{className:"o-hero__maskWrapper"},mt("div",{className:"o-hero__scene",ref:this.sceneContainer}),mt("div",{className:"o-hero__mask"},t?mt("video",{className:"o-hero__maskVideo",title:dt,autoPlay:!0,playsInline:!0,muted:!0,loop:!0,poster:a},mt("source",{src:o})):mt(lt.a,{className:"o-hero__maskImage",src:ct,alt:dt,size:lt.a.SIZES.SMALL,transparent:!0})))))}});var ut=function(e){const t=e;let i=()=>{},s=!1,n=window.innerHeight,o=window.innerWidth,a=n>o,r=4e3,h=0,c=0,d=2e3;const l=()=>{const e=t.canvas.parentNode.parentNode,i=e.offsetHeight,s=e?fe()(e.getBoundingClientRect().top,10):0,o=i+n,r=Math.abs(s-(a?2*n:n));c=(h=100*r/o)/100},m=()=>{n=window.innerHeight,o=window.innerWidth,r=(a=n>o)?3*n:3*o,t.resizeCanvas(o,n)},p=(e,i)=>{const s=137.5*e,n=(0+.0055*e)*t.sqrt(e),o=n*t.cos(s),a=n*t.sin(s);let r=t.sin(d-.4*e);r=t.map(r,-1,1,0,160),t.stroke(r,0,120-r/2),t.noFill(),t.ellipse(o,a,i,i)};t.setOnReady=e=>{i=e},t.setVisibility=e=>{(s=e)?(t.removeListeners(),t.addListeners()):t.removeListeners()},t.setup=()=>{t.createCanvas(window.innerWidth,window.innerHeight),t.angleMode(t.DEGREES),t.colorMode(t.HSB),i()},t.draw=()=>{if(s){let e=7,i=810;const s=r*c,n=a?85:70;t.background(0),t.translate(t.width/2,t.height/2),t.rotate(.1*d),h>n&&(i=810+30*(h-n));for(let t=0;t<s;t+=1)t>i&&t<s&&p(t,e+=9e-6*t);d+=4}},t.addListeners=()=>{window.addEventListener("scroll",l),window.addEventListener("resize",m),l(),m()},t.removeListeners=()=>{window.removeEventListener("scroll",l),window.removeEventListener("resize",m)}},gt=h.a.createElement,wt=i("JYC+"),ft=i.n(wt);const vt="".concat(y.w,"/static/1.4.0.1948-ne/images/hero-immersive/C1/bg.jpg"),bt="".concat(y.w,"/static/1.4.0.1948-ne/images/hero-immersive/C1/logo.png"),yt="".concat(y.w,"/static/1.4.0.1948-ne/images/hero-immersive/C1/logo-portrait.png");var xt=h.a.createElement;const St="".concat(y.w,"/static/1.4.0.1948-ne/images/hero-immersive"),Ot="-portrait",Et="c2-products",Tt="c2-backgrounds",Rt="c2-texts",jt=["".concat(St,"/C2/products/product-01.png"),"".concat(St,"/C2/products/product-02.png"),"".concat(St,"/C2/products/product-03.png"),"".concat(St,"/C2/products/product-04.png")],Pt=["".concat(St,"/C2/products/portrait/product-01.png"),"".concat(St,"/C2/products/portrait/product-02.png"),"".concat(St,"/C2/products/portrait/product-03.png"),"".concat(St,"/C2/products/portrait/product-04.png")],Ct=["".concat(St,"/C2/background/bg-01.jpg"),"".concat(St,"/C2/background/bg-02.jpg"),"".concat(St,"/C2/background/bg-03.jpg"),"".concat(St,"/C2/background/bg-04.jpg")],At=["".concat(St,"/C2/background/portrait/bg-01.jpg"),"".concat(St,"/C2/background/portrait/bg-02.jpg"),"".concat(St,"/C2/background/portrait/bg-03.jpg"),"".concat(St,"/C2/background/portrait/bg-04.jpg")],kt=["".concat(St,"/C2/text/text-01.svg"),"".concat(St,"/C2/text/text-02.svg"),"".concat(St,"/C2/text/text-03.svg"),"".concat(St,"/C2/text/text-04.svg")],It=["".concat(St,"/C2/text/portrait/text-01.svg"),"".concat(St,"/C2/text/portrait/text-02.svg"),"".concat(St,"/C2/text/portrait/text-03.svg"),"".concat(St,"/C2/text/portrait/text-04.svg")],Mt="-active",Ht=1.25,Nt={UP:"up",DOWN:"down"},_t="top",Lt="bottom";var zt=h.a.createElement,Dt=i("goqd"),Bt=i.n(Dt);const Ft=("".concat(y.w,"/static/1.4.0.1948-ne/audio/immersive/d1-beosound-shape.mp3"),.01);var Wt=h.a.createElement;const Vt=Math.ceil(5e3*Math.PI/180),Ut=e=>"\n  100% {\n    transform: translateX(".concat(e,"px) rotate(").concat(20,"deg);\n  }\n"),Gt=e=>"\n  0% {\n    transform: translateX(".concat(e,"px) rotate(").concat(20,"deg);\n  }\n\n  100% {\n    transform: translateX(0px) rotate(").concat(0,"deg);\n  }\n\n"),Xt=e=>"\n  100% {\n    transform: translateX(".concat(-1*e,"px) rotate(").concat(-20,"deg);\n  }\n"),qt=e=>"\n  0% {\n    transform: translateX(".concat(-1*e,"px) rotate(").concat(-20,"deg);\n  }\n\n  100% {\n    transform: translateX(0px) rotate(").concat(0,"deg);\n  }\n"),Yt=Object(I.d)([" "," "],Ut(Vt)),Qt=Object(I.d)([" "," "],Ut(.75*Vt)),Kt=Object(I.d)([" "," "],Ut(.33*Vt)),Jt=Object(I.d)([" "," "],Gt(Vt)),Zt=Object(I.d)([" "," "],Gt(.75*Vt)),$t=Object(I.d)([" "," "],Gt(.33*Vt)),ei=Object(I.d)([" "," "],Xt(Vt)),ti=Object(I.d)([" "," "],Xt(.75*Vt)),ii=Object(I.d)([" "," "],Xt(.33*Vt)),si=Object(I.d)([" "," "],qt(Vt)),ni=Object(I.d)([" "," "],qt(.75*Vt)),oi=Object(I.d)([" "," "],qt(.33*Vt));var ai=Object(I.b)(["& #-edge-1-container{width:100%;height:100%;position:relative;overflow:hidden;display:flex;align-items:center;text-align:center;flex:1 1 0%;#background-image{width:100%;height:100%;position:absolute;overflow:hidden;background-size:cover;background-position:50% 50%;background-image:url(","/static/1.4.0.1948-ne/images/hero-immersive/Edge1/edge-hero-bg-1920x1400.jpg);@media ","{background-image:url(","/static/1.4.0.1948-ne/images/hero-immersive/Edge1/edge-hero-bg-1920x1920.jpg);}}#circle-wrapper{position:relative;width:","px;height:","px;left:50%;margin:0 0 150px ","px;@media ","{width:","px;height:","px;margin:0 0 150px ","px;}@media ","{width:","px;height:","px;margin:0 0 150px ","px;}#circle{position:relative;width:100%;height:100%;left:0;transform:rotate(","deg);&.right-rolling{animation:"," 1s ease-in-out 0s 1,"," 2s ease-in-out 1s 1;@media ","{animation:"," 1s ease-in-out 0s 1,"," 2s ease-in-out 1s 1;}@media ","{animation:"," 1s ease-in-out 0s 1,"," 2s ease-in-out 1s 1;}}&.left-rolling{animation:"," 1s ease-in-out 0s 1,"," 2s ease-in-out 1s 1;@media ","{animation:"," 1s ease-in-out 0s 1,"," 2s ease-in-out 1s 1;}@media ","{animation:"," 1s ease-in-out 0s 1,"," 2s ease-in-out 1s 1;}}text{font-family:'Helvetica Neue',Arial;font-size:24px;letter-spacing:10px;color:",";text-transform:uppercase;}svg{position:absolute;left:0;top:0;width:100%;height:100%;}}}#buttonWrapper{width:200px;height:50px;left:50%;margin-left:-100px;position:relative;button{border:2px solid white;background:transparent;padding:10px;font-size:26px;color:white;cursor:pointer;}}}"],y.w,e=>e.theme.mediaQuery.smallMax,y.w,500,500,-250,e=>e.theme.mediaQuery.mediumMax,375,375,-187.5,e=>e.theme.mediaQuery.smallMax,165,165,-82.5,0,Yt,Jt,e=>e.theme.mediaQuery.mediumMax,Qt,Zt,e=>e.theme.mediaQuery.smallMax,Kt,$t,ei,si,e=>e.theme.mediaQuery.mediumMax,ti,ni,e=>e.theme.mediaQuery.smallMax,ii,oi,e=>e.theme.colors.TEXT.WHITE),ri=h.a.createElement;class hi extends r.PureComponent{constructor(e){super(e),Object(a.a)(this,"setupAnimation",()=>{this.addListeners(),this.isSetup=!0}),Object(a.a)(this,"getPositionAndRotation",e=>{const t=window.getComputedStyle(e);return{top:t.top,left:t.left,transform:t.transform}}),Object(a.a)(this,"drawFrame",e=>{let t,i;const{isInView:s}=this.props;if(s&&this.backgroundImageRef.current){if(e-this.animationStartTime>=this.BACKGROUND_EASE_ANIMATION_DURATION)return void this.stopAnimation();t=(e-this.animationStartTime)/this.BACKGROUND_EASE_ANIMATION_DURATION,i=this.easingFunction(t),this.xNew=this.xStart+(this.xDestination-this.xStart)*i,this.yNew=this.yStart+(this.yDestination-this.yStart)*i,this.backgroundImageRef.current.style.backgroundPosition="".concat(this.xNew,"px ").concat(this.yNew,"px"),this.renderLoop=window.requestAnimationFrame(this.drawFrame)}}),Object(a.a)(this,"addListeners",()=>{window.addEventListener("mousemove",this.throttledOnMouse),window.addEventListener("touchmove",this.throttledOnTouch),window.addEventListener("resize",this.throttledOnResize,!1),window.addEventListener("orientationchange",this.throttledOnResize,!1),this.resize()}),Object(a.a)(this,"removeListeners",()=>{window.removeEventListener("mousemove",this.throttledOnMouse),window.removeEventListener("touchmove",this.throttledOnTouch),window.removeEventListener("resize",this.throttledOnResize,!1),window.removeEventListener("orientationchange",this.throttledOnResize,!1)}),Object(a.a)(this,"destroyScene",()=>{this.stopAnimation(),this.removeListeners()}),Object(a.a)(this,"stopAnimation",()=>{window.cancelAnimationFrame(this.renderLoop)}),Object(a.a)(this,"restartAnimation",()=>{window.requestAnimationFrame(this.startBackgroundAnimation),this.removeListeners(),this.addListeners()}),Object(a.a)(this,"easingFunction",e=>e*(2-e)),Object(a.a)(this,"updateScreenResolutionValues",()=>{if(this.sceneContainer.current){const e=this.sceneContainer.current.getBoundingClientRect();this.sceneWidth=e.width,this.sceneHeight=e.height}else this.sceneWidth=window.innerWidth,this.sceneHeight=window.innerHeight}),Object(a.a)(this,"resize",()=>{this.updateScreenResolutionValues(),this.sceneHalfWidth=Math.floor(this.sceneWidth/2),this.sceneHalfHeight=Math.floor(this.sceneHeight/2)}),Object(a.a)(this,"respondToTouch",e=>{e.touches[0]&&"undefined"!==typeof e.touches[0].clientX&&this.respondToMouse(e.touches[0])}),Object(a.a)(this,"respondToMouse",e=>{if(!this.props.isInView||!this.circleRef.current)return;const t=e.clientX||e.touches[0].clientX,i=e.clientX||e.touches[0].clientY;if(t>this.sceneHalfWidth){if(this.rollingDirection!==this.RIGHT&&this.lastMoveDirrection!==this.RIGHT){this.lastMoveDirrection=this.RIGHT,this.rollingDirection=this.RIGHT;const e=this.getPositionAndRotation(this.circleRef.current);this.circleRef.current.style.transform=e.transform,this.circleRef.current.className="right-rolling",window.clearTimeout(this.rollingAnimationTimeoutId),this.rollingAnimationTimeoutId=setTimeout(()=>{this.rollingDirection="",this.circleRef.current.style.transform="translateX(0px) rotate(0deg)",this.circleRef.current.className=""},3e3)}}else if(this.rollingDirection!==this.LEFT&&this.lastMoveDirrection!==this.LEFT){this.lastMoveDirrection=this.LEFT,this.rollingDirection=this.LEFT;const e=this.getPositionAndRotation(this.circleRef.current);this.circleRef.current.style.left=e.left,this.circleRef.current.style.transform=e.transform,this.circleRef.current.className="left-rolling",window.clearTimeout(this.rollingAnimationTimeoutId),this.rollingAnimationTimeoutId=setTimeout(()=>{this.rollingDirection="",this.circleRef.current.style.transform="translateX(0px) rotate(0deg)",this.circleRef.current.className=""},3e3)}this.xDiff=(t-this.sceneHalfWidth)*this.BACKGROUND_SPEED,this.yDiff=(i-this.sceneHalfHeight)*this.BACKGROUND_SPEED,window.requestAnimationFrame(this.startBackgroundAnimation)}),Object(a.a)(this,"startBackgroundAnimation",e=>{this.xStart=this.xNew,this.yStart=this.yNew,this.xDestination=-1*this.xDiff,this.yDestination=-1*this.yDiff,this.animationStartTime=e,this.renderLoop=window.requestAnimationFrame(this.drawFrame)}),Object(a.a)(this,"throttledOnResize",re()(this.resize,50)),Object(a.a)(this,"throttledOnMouse",re()(this.respondToMouse,50)),Object(a.a)(this,"throttledOnTouch",re()(this.respondToTouch,50)),this.backgroundImageRef=Object(r.createRef)(),this.circleRef=Object(r.createRef)(),this.sceneContainer=Object(r.createRef)(),this.circleSvg="".concat(y.w,"/static/1.4.0.1948-ne/images/hero-immersive/Edge1/edge-hero-title.svg"),this.isSetup=!1,this.rollingDirection="",this.lastMoveDirrection="",this.rollingAnimationTimeoutId=null,this.animationStartTime=0,this.xNew=0,this.yNew=0,this.xDiff=0,this.yDiff=0,this.xStart=0,this.yStart=0,this.xDestination=0,this.yDestination=0,this.BACKGROUND_SPEED=.03,this.BACKGROUND_EASE_ANIMATION_DURATION=800,this.RIGHT="RIGHT",this.LEFT="LEFT"}componentDidMount(){this.updateScreenResolutionValues(),this.xNew=-(this.sceneHeight-this.sceneWidth)/2,this.yNew=0,this.setupAnimation()}componentDidUpdate(e){const{isInView:t}=this.props;t&&this.isSetup?this.restartAnimation():e.isInView&&!t&&this.stopAnimation()}componentWillUnmount(){this.destroyScene()}render(){const{slnId:e,className:t}=this.props;return ri("figure",{className:"".concat(t," o-hero__bgImmersive -Edge2 -fadeInSlow"),"data-slnm-id":"".concat(e,"_immersiveEdge2")},ri("div",{id:"-edge-1-container"},ri("div",{ref:this.backgroundImageRef,id:"background-image"}),ri("div",{id:"circle-wrapper"},ri("div",{id:"circle",ref:this.circleRef},ri("img",{id:"svg-circle",alt:"The Balance Tipping",src:this.circleSvg})))))}}hi.displayName="HeroImmersiveEdge1";var ci=Object(k.a)(hi,ai),di=i("s20r"),li=i.n(di),mi=i("yLsn"),pi=i.n(mi),ui=Object(I.b)(["&.-Edge2gbplt{canvas#webgl-canvas-edge2{width:100%;height:100%;background:#fafafa;}#left-arrow,#right-arrow{position:absolute;width:15%;cursor:pointer;left:0;top:0;height:100%;background:url(","/static/1.4.0.1948-ne/images/common/chevron-left.svg) 50% 50% no-repeat;background-color:transparent;background-size:35px 35px;}.-invisibleLabel{display:none;}#right-arrow{left:85%;background-image:url(","/static/1.4.0.1948-ne/images/common/chevron-right.svg);}#full-volume{display:inline-block;width:85%;height:4px;background:#646464;margin:4px 22px 4px 0;}#current-volume{width:50%;height:4px;background:#83d7ef;box-shadow:inset 0 1px 2px rgba(0,0,0,0.6);}#edge-volume-indicator-circle{display:inline-block;width:12px;height:12px;border-radius:8px;border:2px solid #646464;}#volume-indicator{width:80%;max-width:400px;height:12px;padding:18px 0;margin:-50px auto;position:relative;}}"],y.w,y.w),gi=h.a.createElement,wi=Object(k.a)(class extends r.PureComponent{constructor(e){var t;super(e),t=this,Object(a.a)(this,"onLoadGLTF",e=>{this.object=e.scene,this.object.animations=e.animations,this.object.mixer=new window.THREE.AnimationMixer(this.object),this.object.asset=e.asset,this.object.updateMatrixWorld(),this.rotationBox=new window.THREE.Object3D,this.scene.add(this.rotationBox),this.rotationBox.add(this.object),this.containingBox=(new window.THREE.Box3).setFromObject(this.rotationBox);const t=this.containingBox.getSize(new window.THREE.Vector3);this.object.position.set(0,-t.y/2,0),this.frameArea()}),Object(a.a)(this,"onEXRLoaded",e=>{e.minFilter=window.THREE.NearestFilter,e.magFilter=window.THREE.NearestFilter;const t=new window.THREE.EquirectangularToCubeGenerator(e,{resolution:1024,type:window.THREE.HalfFloatType}).update(this.renderer),i=new window.THREE.PMREMGenerator(t);i.update(this.renderer);const s=new window.THREE.PMREMCubeUVPacker(i.cubeLods);s.update(this.renderer),this.hdr=s.CubeUVRenderTarget,e.dispose(),t.dispose(),i.dispose(),s.dispose()}),Object(a.a)(this,"onEXRAndGLTFLoaded",()=>{this.ao=(new window.THREE.TextureLoader).load("".concat(y.w,"/static/1.4.0.1948-ne/images/hero-immersive/Edge2/3d/BeoSound_edge_floorstandAmbient_Occlusion.png")),this.traverseMaterials(this.object,e=>{(e.isMeshStandardMaterial||e.isGLTFSpecularGlossinessMaterial)&&(e.name.includes("Shadowplane")?(e.transparent=!0,e.visible=!1):(e.aoMap=this.ao,e.aoMapIntensity=1,e.envMap=this.hdr.texture,e.envMapIntensity=3),e.needsUpdate=!0)}),setTimeout(()=>{this.didLoad=!0,this.drawFrame()},500)}),Object(a.a)(this,"setupAnimation",()=>{this.updateScreenResolutionValues(),this.sceneSetup(),this.lightSetup(),this.cameraSetup(),this.effectSetup(),this.objectSetup().then(()=>{this.isSetup=!0}),this.createCanvas(),this.resize(),window.requestAnimationFrame(this.drawFrame),window.edge2renderer=this}),Object(a.a)(this,"getCurrentVolumeValue",()=>{const e=pi()(this.volumeIndicator.current.style.width.replace("%",""));return e>100?100:e<0?0:e}),Object(a.a)(this,"initialise",()=>{$e()?this.setupAnimation():Ke(()=>Je(this.setupAnimation,[Ge.c,Ge.e,Ge.d,Ge.k,Ge.j,Ge.f]))}),Object(a.a)(this,"sceneSetup",()=>{this.isPortrait=this.sceneHeight>this.sceneWidth,this.scene=new window.THREE.Scene,this.renderer=new window.THREE.WebGLRenderer({antialias:!0,alpha:!0}),this.renderer.setSize(this.sceneWidth,this.sceneHeight),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.toneMapping=window.THREE.LinearToneMapping,this.renderer.toneMappingExposure=1,this.renderer.gammaOutput=!0,this.renderer.gammaInput=!1,this.renderer.physicallyCorrectLights=!0}),Object(a.a)(this,"cameraSetup",()=>{this.aspectRatio=this.sceneWidth/this.sceneHeight,this.camera=new window.THREE.PerspectiveCamera(75,this.aspectRatio,1,2e3),this.camera.position.set(0,0,-2),this.camera.lookAt(0,0,0),this.camera.add(this.directionalLight),this.scene.add(this.camera),this.raycaster=new window.THREE.Raycaster}),Object(a.a)(this,"objectSetup",()=>{window.THREE.DRACOLoader.setDecoderPath("".concat(y.w,"/static/1.4.0.1948-ne/libs/threejs/"));const e=this.loadEXR("".concat(y.w,"/static/1.4.0.1948-ne/images/hero-immersive/Edge2/ReflectionProbeLargeBlur5.exr")).then(e=>this.onEXRLoaded(e)),t=this.loadGLTF("".concat(y.w,"/static/1.4.0.1948-ne/images/hero-immersive/Edge2/3d/BeoSound_Edge_Floorstand.glb")).then(e=>this.onLoadGLTF(e));return qe.a.all([e,t]).then(()=>this.onEXRAndGLTFLoaded())}),Object(a.a)(this,"lightSetup",()=>{this.directionalLight=new window.THREE.DirectionalLight(16777215,Math.PI),this.directionalLight.position.set(0,1,0),this.directionalLight.castShadow=!0,this.scene.add(this.directionalLight)}),Object(a.a)(this,"effectSetup",()=>{this.mouseVector=new window.THREE.Vector3;const e=(new window.THREE.TextureLoader).load("https://threejsfundamentals.org/threejs/resources/images/roundshadow.png"),t=new window.THREE.PlaneBufferGeometry(1,1),i=new window.THREE.MeshBasicMaterial({map:e,transparent:!0,depthWrite:!1});this.shadowMesh=new window.THREE.Mesh(t,i),this.shadowMesh.rotation.x=-.5*Math.PI,this.shadowMesh.scale.set(.3,.15,.3),this.scene.add(this.shadowMesh)}),Object(a.a)(this,"frameArea",()=>{this.containingBox=this.containingBox.setFromObject(this.rotationBox);const e=this.containingBox.getSize(new window.THREE.Vector3),t=e.length(),i=this.containingBox.getCenter(new window.THREE.Vector3),s=1.05*t*.5*(this.isPortrait?1.1:.6),n=window.THREE.Math.degToRad(.5*this.camera.fov),o=s/Math.tan(n);this.shadowMesh.position.set(0,-e.y/2-(this.isPortrait?.02:.035),.04);const a=(new window.THREE.Vector3).subVectors(this.camera.position,i).normalize();this.camera.aspect=this.sceneWidth/this.sceneHeight,this.camera.position.copy(a.multiplyScalar(o).add(i)),this.camera.near=t/100,this.camera.far=100*t,this.camera.updateProjectionMatrix(),this.camera.lookAt(i.x,i.y,i.z)}),Object(a.a)(this,"loadGLTF",e=>new qe.a(t=>{const i=new window.THREE.GLTFLoader;i.setDRACOLoader(new window.THREE.DRACOLoader),i.load(e,t)})),Object(a.a)(this,"loadEXR",e=>new qe.a(t=>(new window.THREE.EXRLoader).load(e,t))),Object(a.a)(this,"traverseMaterials",(e,t)=>{e.traverse(e=>{e.isMesh&&(li()(e.material)?e.material:[e.material]).forEach(t)})}),Object(a.a)(this,"updateScreenResolutionValues",()=>{if(this.sceneContainer.current){const e=this.sceneContainer.current.getBoundingClientRect();this.sceneWidth=e.width,this.sceneHeight=e.height}else this.sceneWidth=window.innerWidth,this.sceneHeight=window.innerHeight}),Object(a.a)(this,"resize",()=>{this.updateScreenResolutionValues(),this.isPortrait=this.sceneHeight>this.sceneWidth,this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(this.sceneWidth,this.sceneHeight,!1),this.aspectRatio=this.sceneWidth/this.sceneHeight,this.frameArea(),this.needsRedraw=!0,this.renderLoop=window.requestAnimationFrame(this.drawFrame)}),Object(a.a)(this,"throttledOnResize",re()(this.resize,500)),Object(a.a)(this,"addListeners",()=>{window.addEventListener("mousemove",re()(this.respondToMouse,50)),window.addEventListener("mouseup",this.respondToMouseUp),window.addEventListener("mousedown",this.respondToMouseDown),window.addEventListener("resize",this.throttledOnResize,!1),window.addEventListener("orientationchange",this.throttledOnResize,!1)}),Object(a.a)(this,"removeListeners",()=>{window.removeEventListener("mousemove",this.respondToMouse,!1),window.removeEventListener("mouseup",this.respondToMouseUp,!1),window.removeEventListener("mousedown",this.respondToMouseDown,!1),window.removeEventListener("resize",this.throttledOnResize,!1),window.removeEventListener("orientationchange",this.throttledOnResize,!1)}),Object(a.a)(this,"destroyScene",()=>{this.stopAnimation(),this.removeListeners(),this.scene&&this.scene.dispose()}),Object(a.a)(this,"stopRolling",()=>{this.isMovingForward=!1,this.isMovingBack=!1,window.clearTimeout(this.backwardsAnimationTimeout)}),Object(a.a)(this,"stopAnimation",()=>{window.cancelAnimationFrame(this.renderLoop),this.sphereGeometry&&this.sphereGeometry.dispose(),this.renderer&&this.renderer.dispose&&this.renderer.dispose()}),Object(a.a)(this,"restartAnimation",()=>{this.needsRedraw=!0,window.requestAnimationFrame(this.drawFrame),this.removeListeners(),this.addListeners()}),Object(a.a)(this,"createCanvas",()=>{this.sceneContainer.current&&this.sceneContainer.current.children[0]&&(this.sceneContainer.current.children[0].innerHTML="",this.sceneContainer.current.children[0].appendChild(this.renderer.domElement),this.renderer.domElement.id="webgl-canvas-edge2")}),Object(a.a)(this,"respondToMouse",e=>{this.isIntersecting(e)?this.isMouseDown?(this.renderer.domElement.style="cursor: grabbing",this.animateRollingThrottled(e)):this.renderer.domElement.style="cursor: grab":this.renderer.domElement.style="cursor: pointer"}),Object(a.a)(this,"respondToMouseDown",e=>{this.isMouseDown=!0,this.mouseCoordinates.x=e.clientX,this.mouseCoordinates.y=e.clientY}),Object(a.a)(this,"respondToMouseUp",e=>{this.isMouseDown=!1,this.isIntersecting(e)?this.renderer.domElement.style="cursor: grab":this.renderer.domElement.style="cursor: pointer",this.backwardsAnimationTimeout=setTimeout(()=>this.initiateBackwardsMovement(3e3),1e3)}),Object(a.a)(this,"rightArrowMouseUp",e=>{e.stopPropagation(),this.backwardsAnimationTimeout=setTimeout(()=>this.initiateBackwardsMovement(3e3),this.KEYBOARD_CONTROLS_ANIMATION_DURATION+500)}),Object(a.a)(this,"rightArrowMouseDown",e=>{e.stopPropagation(),this.initiateForwardMovement(-1,this.KEYBOARD_CONTROLS_ANIMATION_DURATION,-this.MAX_DISTANCE)}),Object(a.a)(this,"leftArrowMouseUp",e=>{e.stopPropagation(),this.backwardsAnimationTimeout=setTimeout(()=>this.initiateBackwardsMovement(3e3),this.KEYBOARD_CONTROLS_ANIMATION_DURATION+500)}),Object(a.a)(this,"leftArrowMouseDown",e=>{e.stopPropagation(),this.initiateForwardMovement(1,this.KEYBOARD_CONTROLS_ANIMATION_DURATION,this.MAX_DISTANCE)}),Object(a.a)(this,"isIntersecting",e=>{if(!this.didLoad)return!1;const t=e.clientX/this.sceneWidth*2-1,i=e.clientY/this.sceneHeight*-2+1;return this.mouseVector.set(t,i,.5),this.raycaster.setFromCamera(this.mouseVector,this.camera),this.raycaster.intersectObject(this.object,!0).length>0}),Object(a.a)(this,"animateRolling",e=>{const t=this.mouseCoordinates.x-e.clientX;0!==t&&(this.initiateForwardMovement(t>0?1:-1,1e3,this.rotationBox.position.x+.05*t),this.mouseCoordinates.x=e.clientX,this.mouseCoordinates.y=e.clientY)}),Object(a.a)(this,"animateRollingThrottled",this.animateRolling),Object(a.a)(this,"calculateRotation",e=>-e*Math.PI/(2*this.RADIUS)),Object(a.a)(this,"initiateForwardMovement",function(e,i){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:200;t.stopRolling(),window.clearTimeout(t.backwardsAnimationTimeout),t.startTime=window.performance.now(),t.startWidth=t.getCurrentVolumeValue(),t.startDistance=t.rotationBox.position.x,t.startAngle=t.rotationBox.rotation.z,t.startDistance>=t.MAX_DISTANCE?t.rotationBox.position.x=t.MAX_DISTANCE-.001:t.startDistance<=-t.MAX_DISTANCE?t.rotationBox.position.x=.001-t.MAX_DISTANCE:(s>t.MAX_DISTANCE?s=t.MAX_DISTANCE:s<-t.MAX_DISTANCE&&(s=-t.MAX_DISTANCE),t.destinationDistance=s,t.destinationAngle=t.calculateRotation(s),t.endTime=t.startTime+i,0===t.startDistance&&(t.volumeIndicatorAnimationTimeout=window.setTimeout(()=>{t.volumeModificationVector=e},1e3)),t.isMovingForward=!0)}),Object(a.a)(this,"initiateBackwardsMovement",e=>{this.stopRolling(),window.clearTimeout(this.volumeIndicatorAnimationTimeout),this.volumeIndicatorAnimationTimeout=!1,this.volumeModificationVector=0,this.startTime=window.performance.now(),this.startDistance=this.rotationBox.position.x,this.startAngle=this.rotationBox.rotation.z,this.destinationDistance=0,this.destinationAngle=0,this.endTime=this.startTime+e,this.isMovingBack=!0}),Object(a.a)(this,"easeOutQuad",e=>e*(2-e)),Object(a.a)(this,"easeInOutQuad",e=>e<.5?2*e*e:(4-2*e)*e-1),Object(a.a)(this,"drawFrame",e=>{const{isInView:t}=this.props;let i,s,n;if(this.isMovingForward)if(e>this.endTime)this.isMovingForward=!1;else{i=(e-this.startTime)/(this.endTime-this.startTime),n=this.easeOutQuad(i);const t=this.rotationBox.position.x;s=this.startDistance+(this.destinationDistance-this.startDistance)*n,this.rotationBox.position.x=s,this.shadowMesh.position.x=.8*s,this.rotationBox.rotation.set(0,0,this.startAngle+(this.destinationAngle-this.startAngle)*n),this.rotationBox.position.x>=0?t>this.rotationBox.position.x?this.volumeModificationVector=0:this.volumeModificationVector=1:t<this.rotationBox.position.x?this.volumeModificationVector=0:this.volumeModificationVector=-1}this.isMovingBack&&(e>this.endTime?this.isMovingBack=!1:(i=(e-this.startTime)/3e3,n=this.easeInOutQuad(i),s=this.startDistance+(this.destinationDistance-this.startDistance)*n,this.rotationBox.position.x=s,this.shadowMesh.position.x=.8*s,this.rotationBox.rotation.set(0,0,this.startAngle+(this.destinationAngle-this.startAngle)*n))),this.volumeModificationVector&&this.startWidth>=0&&this.startWidth<=100&&(this.startWidth+=-this.volumeModificationVector*this.VOLUME_SPEED/60,this.volumeIndicator.current.style.width="".concat(this.startWidth,"%")),(this.isMovingBack||this.isMovingForward||this.needsRedraw)&&(this.renderer.render(this.scene,this.camera),this.needsRedraw=!1),t&&!this.isScrolling&&this.didLoad&&(this.renderLoop=window.requestAnimationFrame(this.drawFrame))}),this.loader=null,this.step=0,this.needsRedraw=!1,this.isSetup=!1,this.didLoad=!1,this.isScrolling=!1,this.sceneContainer=Object(r.createRef)(),this.volumeIndicator=Object(r.createRef)(),this.isMouseDown=!1,this.p=0,this.startDistance=0,this.startAngle=0,this.startTime=0,this.endTime=0,this.startWidth=0,this.destinationDistance=200,this.destinationAngle=0,this.isMovingForward=!1,this.isMovingBack=!1,this.volumeModificationVector=0,this.backwardsAnimationTimeout=null,this.volumeIndicatorAnimationTimeout=null,this.forwardDuration=2e3,this.backwardsDuration=3e3,this.mouseCoordinates={x:0,y:0},this.RADIUS=.5,this.MAX_ANGLE_DEGREES=15,this.MAX_DISTANCE=this.MAX_ANGLE_DEGREES*this.RADIUS*Math.PI/180,this.KEYBOARD_CONTROLS_ANIMATION_DURATION=2e3,this.VOLUME_SPEED=12}componentDidMount(){this.initialise()}componentDidUpdate(e){const{isInView:t}=this.props;t&&this.isSetup?this.restartAnimation():e.isInView&&!t&&this.stopAnimation()}componentWillUnmount(){this.destroyScene()}render(){const{slnId:e,className:t}=this.props;return gi("figure",{className:"".concat(t," o-hero__bgImmersive -Edge2gbplt -fadeInSlow"),"data-slnm-id":"".concat(e,"_immersiveEdge2"),ref:this.sceneContainer},gi("div",{id:"canvas-wrapper"}),gi("button",{id:"left-arrow",onMouseDown:this.leftArrowMouseDown,onMouseUp:this.leftArrowMouseUp},gi("span",{className:"-invisibleLabel"},y.P)),gi("button",{id:"right-arrow",onMouseDown:this.rightArrowMouseDown,onMouseUp:this.rightArrowMouseUp},gi("span",{className:"-invisibleLabel"},y.Q)),gi("div",{id:"volume-indicator"},gi("div",{id:"full-volume"},gi("div",{id:"current-volume",ref:this.volumeIndicator,style:{width:"50%"}},gi("span",{className:"-invisibleLabel"},"Volume: 50"))),gi("div",{id:"edge-volume-indicator-circle"})))}},ui),fi=h.a.createElement,vi=i("8ET1"),bi=i.n(vi),yi=Object(I.b)(["& #-harmony2-container{width:100%;position:relative;background:#000;height:100vh;#feathers-wrapper{width:250px;position:relative;margin:0 auto;top:50%;transform:translateY(-50%);height:70vh;}.feather{position:absolute;top:0;left:0;transform-origin:50% 100%;}.feather svg{width:250px;height:75vh;}.feather.hide{opacity:0;}.feather.animated line,.feather.animated rect{opacity:0;}@media ","{#feathers-wrapper{top:65%;width:150px;}.feather svg{width:150px;height:420px;}}@media ","{#feathers-wrapper{height:55vh;width:100px;}.feather svg{width:100px;height:280px;}}}"],e=>{let{theme:t}=e;return t.mediaQuery.mediumOnly},e=>{let{theme:t}=e;return t.mediaQuery.smallMax}),xi=h.a.createElement;class Si extends r.PureComponent{constructor(){super(...arguments),Object(a.a)(this,"initialise",()=>{et()?this.setupAnimation():tt(this.setupAnimation)}),Object(a.a)(this,"setupAnimation",()=>{this.addListeners();const e=document.getElementsByClassName("feather");this.tl=new window.TimelineMax({paused:!0});const t=document.getElementsByClassName("feather animated")[0];this.tl.to(t.getElementsByClassName("step1"),1,{opacity:1}),this.tl.to(t.getElementsByClassName("step2"),.5,{opacity:1}),this.tl.set(t.getElementsByClassName("hide2"),{display:"none"},1),this.tl.to(t.getElementsByClassName("step3"),1,{opacity:1}),this.tl.to(t.getElementsByClassName("step4"),1,{opacity:1}),this.tl.to(t.getElementsByClassName("step5"),1,{opacity:1}),this.tl.set(t.getElementsByClassName("hide5"),{display:"none"},4.5),this.tl.to(t.getElementsByClassName("step6"),1,{opacity:1}),this.tl.to(t.getElementsByClassName("step7"),1,{opacity:1}),this.tl.to(t.getElementsByClassName("step8"),1,{opacity:1}),bi()(e).forEach((t,i)=>{e[i].style.transform="rotate(".concat(11.25*i-90,"deg)");const s=Math.abs(8-i),n=Math.abs(i-8);this.tl.to(t,1.5,{opacity:1},7.5+.3*s),this.tl.to(t,1,{opacity:0},10.2+.3*n)}),this.isSetup=!0}),Object(a.a)(this,"addListeners",()=>{this.addScrollListener(),window.addEventListener("resize",this.throttledOnResize,!1),window.addEventListener("orientationchange",this.throttledOnResize,!1),this.resize()}),Object(a.a)(this,"removeScrollListener",()=>{window.removeEventListener("scroll",this.throttledOnScroll,!1)}),Object(a.a)(this,"addScrollListener",()=>{window.addEventListener("scroll",this.throttledOnScroll,!1)}),Object(a.a)(this,"removeListeners",()=>{this.removeScrollListener(),window.removeEventListener("resize",this.throttledOnResize,!1),window.removeEventListener("orientationchange",this.throttledOnResize,!1)}),Object(a.a)(this,"onScroll",()=>{const e=window.scrollY||window.pageYOffset;return window.scrollY>=this.containerOffset&&null===this.disabled&&this.scrollDirection===Nt.DOWN?(this.scrollPos=this.containerOffset,this.scrollToPos(this.scrollPos),this.disableScroll2(),this.tl.progress(0),void(this.internalScrollOffset=0)):this.tl.progress()<=0&&!0===this.disabled&&this.scrollDirection===Nt.UP?(this.scrollPos=this.containerOffset-50,this.scrollToPos(this.scrollPos),this.enableScroll2(),this.tl.progress(0),this.internalScrollOffset=0,void(this.disabled=null)):window.scrollY<this.containerOffset+200&&!1===this.disabled&&this.scrollDirection===Nt.UP?(this.scrollPos=this.containerOffset,this.scrollToPos(this.scrollPos),this.disableScroll2(),this.tl.progress(.99),void(this.internalScrollOffset=.99*1.5*this.sceneHeight)):this.tl.progress()>=1&&!0===this.disabled?(this.scrollPos=this.containerOffset+50,this.scrollToPos(this.scrollPos),this.enableScroll2(),this.tl.progress(1),void(this.internalScrollOffset=4*this.sceneHeight)):(this.checkScrollDirection(),!0===this.disabled&&(this.internalScrollOffset+=e-this.scrollPos,this.tl.progress(Math.max(0,this.internalScrollOffset)/(1.5*this.sceneHeight))),void(this.scrollPos=e))}),Object(a.a)(this,"scrollToPos",e=>window.scrollTo(0,e)),Object(a.a)(this,"destroyScene",()=>{this.stopAnimation(),this.removeListeners()}),Object(a.a)(this,"stopAnimation",()=>{window.cancelAnimationFrame(this.renderLoop)}),Object(a.a)(this,"resize",()=>{this.updateScreenResolutionValues(),this.containerOffset=window.pageYOffset+this.sceneContainer.current.getBoundingClientRect().top}),Object(a.a)(this,"updateScreenResolutionValues",()=>{if(this.sceneContainer.current){const e=this.sceneContainer.current.getBoundingClientRect();this.sceneWidth=e.width,this.sceneHeight=e.height}else this.sceneWidth=window.innerWidth,this.sceneHeight=window.innerHeight}),Object(a.a)(this,"getSvg",()=>xi("svg",{viewBox:"0 0 250 1200",preserveAspectRatio:"xMidYMid meet",xmlns:"http://www.w3.org/2000/svg"},xi("defs",null,xi("filter",{id:"svg_13_blur"},xi("feGaussianBlur",{stdDeviation:"0.1",in:"SourceGraphic"}))),xi("g",null,xi("line",{id:"svg_45",className:"step1 step2 step3 step4 step5 step6 step7 step8",y2:"1200",x2:"125",y1:"1034",x1:"125","stroke-width":"1.5",stroke:"#fff"}),xi("line",{id:"svg_47",className:"step1 hide2",y2:"1033",x2:"125",y1:"970",x1:"125","stroke-width":"1.5",stroke:"#fff"}),xi("line",{id:"svg_48",className:"step1 step2 step2 step3 step4 step5 step6 step7 step8",y2:"970",x2:"125",y1:"690",x1:"125","stroke-width":"1.5",stroke:"#fff"}),xi("line",{id:"svg_49",className:"step1 step2 step2 step3 step4 step5 step6 step7 step8",y2:"689",x2:"125",y1:"645",x1:"125","stroke-width":"1.5",stroke:"#fff"}),xi("line",{id:"svg_50",className:"step1 hide2",y2:"646",x2:"125",y1:"532",x1:"125","stroke-width":"1.5",stroke:"#fff"}),xi("line",{id:"svg_51",className:"step1 step2 step2 step3 step4 step5 step6 step7 step8",y2:"257",x2:"125",y1:"532",x1:"125","stroke-width":"1.5",stroke:"#fff"}),xi("line",{id:"svg_52",className:"step1 step2 step2 step3 step4 hide5",y2:"257.342763",x2:"125",y1:"233",x1:"125","stroke-width":"1.5",stroke:"#fff"}),xi("line",{id:"svg_53",className:"step1 step2 step2 step3 step4 step5 step6 step7 step8",y2:"233.5",x2:"125",y1:"122",x1:"125","stroke-width":"1.5",stroke:"#fff"}),xi("rect",{id:"svg_02",className:"step2 step3 step4 step5 step6 step7 step8",transform:"rotate(45 124.5,594)",height:"80",width:"80",y:"550",x:"81","stroke-width":"1.5",stroke:"#fff",fill:"none"}),xi("rect",{id:"svg_04",className:"step2 step3 step4 step5 step6 step7 step8",transform:"rotate(45 124.5,1005)",height:"45",width:"45",y:"980",x:"100","stroke-width":"1.5",stroke:"#fff",fill:"none"}),xi("line",{id:"svg_07",className:"step3 step4 step5 step6 step7 step8",y2:"655",x2:"160",y1:"690",x1:"124.5","stroke-width":"1.5",stroke:"#fff"}),xi("line",{id:"svg_09",className:"step3 step4 step5 step6 step7 step8",y2:"655",x2:"90",y1:"690",x1:"125","stroke-width":"1.5",stroke:"#fff"}),xi("line",{id:"svg_10",className:"step3 step4 step5 step6 step7 step8",y2:"772.6",x2:"138",y1:"676.6",x1:"138","stroke-width":"1.5",stroke:"#fff"}),xi("line",{id:"svg_11",className:"step3 step4 step5 step6 step7 step8",y2:"773.3",x2:"112",y1:"677.3",x1:"112","stroke-width":"1.5",stroke:"#fff"}),xi("rect",{id:"svg_12",className:"step3 step4 step5 step6 step7 step8",transform:"rotate(45 160,521.6)",height:"18",width:"45",y:"513",x:"137.3","stroke-width":"1.5",stroke:"#fff",fill:"none"}),xi("rect",{id:"svg_13",className:"step3 step4 step5 step6 step7 step8",transform:"rotate(-45 90.5,522.3)",height:"18",width:"45",y:"513.3",x:"68","stroke-width":"1.5",stroke:"#fff",fill:"none"}),xi("line",{id:"svg_14",className:"step3 step4 step5 step6 step7 step8",y2:"400",x2:"150",y1:"500",x1:"150","stroke-width":"1.5",stroke:"#fff"}),xi("line",{id:"svg_15",className:"step3 step4 step5 step6 step7 step8",y2:"400",x2:"100",y1:"500",x1:"100","stroke-width":"1.5",stroke:"#fff"}),xi("line",{id:"svg_16",className:"step4 step5 step6 step7 step8",y2:"299",x2:"150",y1:"400",x1:"150","stroke-width":"1.5",stroke:"#fff"}),xi("line",{id:"svg_17",className:"step4 step5 step6 step7 step8",y2:"299.3",x2:"100",y1:"400",x1:"100","stroke-width":"1.5",stroke:"#fff"}),xi("line",{id:"svg_18",className:"step4 step5 step6 step7 step8",y2:"298.6",x2:"180",y1:"298.6",x1:"70","stroke-width":"1.5",stroke:"#fff"}),xi("line",{id:"svg_19",className:"step4 step5 step6 step7 step8",y2:"851.4",x2:"138",y1:"772.6",x1:"138","stroke-width":"1.5",stroke:"#fff"}),xi("line",{id:"svg_20",className:"step4 step5 step6 step7 step8",y2:"852",x2:"112",y1:"772.6",x1:"112","stroke-width":"1.5",stroke:"#fff"}),xi("rect",{id:"svg_21",className:"step5 step6 step7 step8",transform:"rotate(45 125,595)",height:"60",width:"60",y:"560",x:"90","stroke-width":"1.5",stroke:"#fff",fill:"none"}),xi("line",{id:"svg_22",className:"step5 step6 step7 step8",y2:"293",x2:"180",y1:"293",x1:"70","stroke-width":"1.5",stroke:"#fff"}),xi("line",{id:"svg_23",className:"step5 step6 step7 step8",y2:"287",x2:"180",y1:"287",x1:"70","stroke-width":"1.5",stroke:"#fff"}),xi("rect",{id:"svg_24",className:"step5 step6 step7 step8",transform:"rotate(45 111.5,863.7)",height:"17",width:"17",y:"855",x:"103.5","stroke-width":"1.5",stroke:"#fff",fill:"none"}),xi("rect",{id:"svg_25",className:"step5 step6 step7 step8",transform:"rotate(45 138,863.3)",height:"17",width:"17",y:"855",x:"130","stroke-width":"1.5",stroke:"#fff",fill:"none"}),xi("rect",{id:"svg_26",className:"step5 step6 step7 step8",transform:"rotate(45 125,246)",height:"17",width:"17",y:"237.3",x:"116.2","stroke-width":"1.5",stroke:"#fff",fill:"none"}),xi("rect",{id:"svg_27",className:"step6 step7 step8",transform:"rotate(45 150.5,246)",height:"17",width:"17",y:"237",x:"142","stroke-width":"1.5",stroke:"#fff",fill:"none"}),xi("rect",{id:"svg_28",className:"step6 step7 step8",transform:"rotate(45 99,246)",height:"17",width:"17",y:"237",x:"90.3","stroke-width":"1.5",stroke:"#fff",fill:"none"}),xi("line",{id:"svg_29",className:"step6 step7 step8",y2:"281",x2:"180",y1:"281",x1:"70","stroke-width":"1.5",stroke:"#fff"}),xi("line",{id:"svg_30",className:"step6 step7 step8",y2:"275",x2:"180",y1:"275",x1:"70","stroke-width":"1.5",stroke:"#fff"}),xi("line",{id:"svg_31",className:"step6 step7 step8",y2:"269",x2:"180",y1:"269",x1:"70","stroke-width":"1.5",stroke:"#fff"}),xi("line",{id:"svg_32",className:"step6 step7 step8",y2:"61",x2:"187",y1:"123",x1:"125","stroke-width":"1.5",stroke:"#fff"}),xi("line",{id:"svg_33",className:"step6 step7 step8",y2:"61",x2:"63",y1:"123",x1:"125","stroke-width":"1.5",stroke:"#fff"}),xi("line",{id:"svg_34",className:"step7 step8",y2:"64",x2:"192",y1:"127",x1:"129","stroke-width":"1.5",stroke:"#fff"}),xi("line",{id:"svg_35",className:"step7 step8",y2:"69",x2:"196",y1:"131",x1:"134","stroke-width":"1.5",stroke:"#fff"}),xi("line",{id:"svg_36",className:"step7 step8",y2:"65",x2:"59",y1:"127",x1:"121","stroke-width":"1.5",stroke:"#fff"}),xi("line",{id:"svg_37",className:"step7 step8",y2:"70",x2:"54",y1:"131",x1:"116","stroke-width":"1.5",stroke:"#fff"}),xi("rect",{id:"svg_38",className:"step7 step8",transform:"rotate(45 125,588.5)",height:"17",width:"17",y:"580",x:"116.4","stroke-width":"1.5",stroke:"#fff",fill:"none"}),xi("line",{id:"svg_39",className:"step8",y2:"74",x2:"200",y1:"136",x1:"137","stroke-width":"1.5",stroke:"#fff"}),xi("line",{id:"svg_40",className:"step8",y2:"77",x2:"204",y1:"139",x1:"142","stroke-width":"1.5",stroke:"#fff"}),xi("line",{id:"svg_41",className:"step8",y2:"82",x2:"209",y1:"144",x1:"147","stroke-width":"1.5",stroke:"#fff"}),xi("line",{id:"svg_42",className:"step8",y2:"74",x2:"50",y1:"135",x1:"112","stroke-width":"1.5",stroke:"#fff"}),xi("line",{id:"svg_43",className:"step8",y2:"78",x2:"46",y1:"139",x1:"108","stroke-width":"1.5",stroke:"#fff"}),xi("line",{id:"svg_44",className:"step8",y2:"82",x2:"42",y1:"144",x1:"103","stroke-width":"1.5",stroke:"#fff"})))),Object(a.a)(this,"sceneContainer",Object(r.createRef)()),Object(a.a)(this,"throttledOnResize",re()(this.resize,500)),Object(a.a)(this,"throttledOnScroll",re()(this.onScroll,100))}componentDidMount(){this.resize(),this.internalScrollOffset=0,this.initialise(),window.debugX=this,this.disabled=null,this.containerOffset=window.pageYOffset+this.sceneContainer.current.getBoundingClientRect().top}componentWillUnmount(){this.destroyScene()}disableScroll2(){this.sceneContainer.current.style.position="fixed",this.sceneContainer.current.style.top="0",this.sceneContainer.current.style.zIndex="1000",this.disabled=!0}enableScroll2(){this.sceneContainer.current.style.position="absolute",this.sceneContainer.current.style.top="0",this.sceneContainer.current.style.zIndex="auto",this.disabled=!1}checkScrollDirection(){(window.scrollY||window.pageYOffset)>=this.scrollPos?this.scrollDirection=Nt.DOWN:this.scrollDirection=Nt.UP}render(){const{slnId:e,className:t}=this.props,i=this.getSvg();return xi("figure",{ref:this.sceneContainer,className:"".concat(t," o-hero__bgImmersive -harmony2 -fadeInSlow"),"data-slnm-id":"".concat(e,"_immersiveEdge2")},xi("div",{id:"-harmony2-container"},xi("div",{id:"feathers-wrapper"},xi("div",{className:"feather hide"},i),xi("div",{className:"feather hide"},i),xi("div",{className:"feather hide"},i),xi("div",{className:"feather hide"},i),xi("div",{className:"feather hide"},i),xi("div",{className:"feather hide"},i),xi("div",{className:"feather hide"},i),xi("div",{className:"feather hide"},i),xi("div",{className:"feather animated"},i),xi("div",{className:"feather hide"},i),xi("div",{className:"feather hide"},i),xi("div",{className:"feather hide"},i),xi("div",{className:"feather hide"},i),xi("div",{className:"feather hide"},i),xi("div",{className:"feather hide"},i),xi("div",{className:"feather hide"},i),xi("div",{className:"feather hide"},i))))}}Si.displayName="HeroImmersiveEdge1";var Oi=Object(k.a)(Si,yi),Ei=h.a.createElement;class Ti extends r.PureComponent{constructor(e){var t;super(e),t=this,Object(a.a)(this,"onIntersectionEnter",e=>{const{hasBegunStory:t,hasReachedStory:i,navigatedByClick:s,activeChapter:n}=this.state;if(i||this.setState({hasReachedStory:!0}),"down"===this.scrollDirection&&(this.narrationTexts[e].resetNarration(),!s&&(void 0===n||e>n))){const t=this.observers[e].offsetTop-me;Object(le.b)(t,1500)}const o=e+1===this.narrationTexts.length;if(t&&"up"===this.scrollDirection&&!o){const t=o?e:e+1;this.narrationTexts[t].pauseNarration()}(t&&"down"===this.scrollDirection||s)&&(this.setState({navigatedByClick:!1}),setTimeout(()=>{this.audioPlayer.current.onClick()},500)),this.setState({activeChapter:e})}),Object(a.a)(this,"onIntersectionLeave",e=>{const t=e+1===this.narrationTexts.length;this.state.hasBegunStory&&!t&&this.narrationTexts[e].resetNarration(),this.state.hasBegunStory&&t&&"up"===this.scrollDirection&&this.narrationTexts[e].resetNarration(),0===e&&"up"===this.scrollDirection&&(this.narrationTexts[e].resetNarration(),this.audioPlayer.current.rewindAudio(),this.audioPlayer.current.resetAudioPlayer(),this.setState({activeChapter:void 0}))}),Object(a.a)(this,"getAudioTracks",()=>{const{data:e}=this.props,t=e.get("storyItem"),i=(t&&t.get("chapters")).map(e=>e.getIn(["narration","item",0,"mediaItem","media","defaultAssetUrl"]));this.audioTrackUrls=i}),Object(a.a)(this,"getPageTitle",()=>{const{data:e}=this.props,t=e.get("tags"),i=e.get("storyHeader"),s=i&&i.get("colorTheme"),n=i&&i.get("backgroundColor"),o=i&&i.getIn(["item","0"]),a=o&&o.get("title"),r=o&&o.get("subtitle"),h=o&&o.get("description"),c=o&&o.get("descriptionRichText"),d=i&&i.get("backgroundImage");return{tags:t,theme:s,textColor:i&&i.get("textColor"),backgroundColor:n,title:a,subtitle:r,description:h,backgroundImage:d,descriptionRichText:c}}),Object(a.a)(this,"addToCartSuccessAction",function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ee.hc,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ee.u;const{cartData:n}=t.props;let o=Object(c.List)();o=o.push(e);const a=Object(c.Map)({variants:o}),r={productDetails:Object(c.List)(a?[a]:[]),showCartValue:!0,cartData:n,variantId:e.get("variantId"),noPosition:!0};Object($.e)(r,s,"".concat(ee.ne,": ").concat(i))}),Object(a.a)(this,"addScrollListener",()=>{window.addEventListener("scroll",re()(this.handleScrollDirection,100,{leading:!0,trailing:!1}))}),Object(a.a)(this,"removeScrollListener",()=>{window.removeEventListener("scroll",re()(this.handleScrollDirection,100,{leading:!0,trailing:!1}))}),Object(a.a)(this,"handleScrollDirection",e=>{const t=e.currentTarget;this.scrollY>t.pageYOffset?this.scrollDirection="up":this.scrollY<t.pageYOffset&&(this.scrollDirection="down"),this.scrollY=t.pageYOffset}),Object(a.a)(this,"handlePlayClick",e=>{const{hasBegunStory:t,activeChapter:i}=this.state;e?this.narrationTexts[i].resumeNarration():this.narrationTexts[i].startNarration(),t||this.setState({hasBegunStory:!0})}),Object(a.a)(this,"handlePauseClick",()=>{const{activeChapter:e}=this.state;this.narrationTexts[e].pauseNarration()}),Object(a.a)(this,"handleResetClick",()=>{const{activeChapter:e}=this.state;this.narrationTexts[e].resetNarration(!0)}),Object(a.a)(this,"handleChapterNavigation",()=>{this.setState({navigatedByClick:!0})}),Object(a.a)(this,"startStory",()=>{const{toggleFooterAria:e}=this.props,t=this.audioPlayer.current.backgroundAudioNode,i=t.play();void 0!==i?i.catch(e=>{console.warn(e.message)}):(t.pause(),t.mute=!1),this.setState({hasBegunStory:!0},()=>{void 0!==e&&e(this.state.hasBegunStory)})}),Object(a.a)(this,"audioPlayer",Object(r.createRef)()),Object(a.a)(this,"observers",[Object(r.createRef)()]),Object(a.a)(this,"narrationTexts",[Object(r.createRef)()]),Object(a.a)(this,"renderAudioPlayer",()=>{const{activeChapter:e}=this.state,{data:t}=this.props,i=t.get("storyItem"),s=i&&i.get("chapters"),n=i&&i.getIn(["heroVideoDescriptionVariant","item",0,"mediaItem","media","defaultAssetUrl"]),o=e||0,a=this.audioTrackUrls.size&&this.audioTrackUrls.get(o);return Ei(Fe,{chapterNumber:e,chapterTotal:s.size,audioFileUrl:a,backgroundAudioFileUrl:n,isVisible:void 0!==e,hasBegunStory:this.state.hasBegunStory,inPartialView:"up"===this.scrollDirection,forceVisible:!this.state.hasBegunStory&&this.state.hasReachedStory,handlePlayClick:this.handlePlayClick,handlePauseClick:this.handlePauseClick,handleResetClick:this.handleResetClick,handleChapterNavigation:this.handleChapterNavigation,innerRef:this.audioPlayer})}),Object(a.a)(this,"renderChapters",()=>{const{activeChapter:e}=this.state,{data:t,toggleHeader:i,toggleSupportingNav:s,socialShareOnClick:n}=this.props,o=t.get("storyItem"),a=o&&o.get("chapters");return Ei("div",null,a&&a.map((t,o)=>{const a=t.get("narration"),r=a.getIn(["item",0]),h=o,c=h===e,d=a.get("colorTheme"),l=t.get("chapterSections"),m="chapter_".concat(h);return Ei("div",{"data-chapter-id":h,key:h,ref:e=>{this.observers[o]=e}},Ei(N.a,{onIntersectionEnter:()=>this.onIntersectionEnter(o),onIntersectionLeave:()=>this.onIntersectionLeave(o),rootMargin:"-45% 45%",multiple:[pe.b.ENTRIES,pe.b.EXITS]},r&&Ei(Me,{data:r,playText:c,innerRef:e=>{this.narrationTexts[o]=e},chapterNumber:h,colorTheme:d}),l&&Ei(j.a,{key:m,items:l,toggleHeader:i,toggleSupportingNav:s,addToCartSuccessAction:this.addToCartSuccessAction,pageType:ee.hc,socialShareOnClick:n})))}))}),this.state={activeChapter:void 0,hasBegunStory:!1,hasReachedStory:!1,navigatedByClick:!1},this.scrollY=0,this.scrollDirection=void 0,this.audioTrackUrls=[],this.observers=[],this.narrationTexts=[]}componentDidMount(){const{data:e,cartData:t,userInfo:i,currencyCode:s}=this.props,n=Object($.b)({userInfo:i,pageType:ee.ne,cartData:t,pageName:ee.hc,story_title:e.get("slug"),currencyCode:s});Object($.a)(n),this.observers=this.observers.filter(Boolean),this.narrationTexts=this.narrationTexts.filter(Boolean),this.addScrollListener(),this.getAudioTracks()}componentDidUpdate(){this.context.parallaxController.update()}componentWillUnmount(){this.removeScrollListener()}render(){const{hasBegunStory:e}=this.state,{data:t,toggleHeader:i,toggleSupportingNav:s,socialShareOnClick:n}=this.props,o=t.get("storyItem"),a=o&&o.get("heroVideoDescriptionVariant"),r=o&&o.get("heroVideoPlainVariant"),h=a&&a.get("cardType"),d=r&&r.get("cardType"),l=o&&o.get("immersiveVariants"),m=o&&o.get("chapters"),p=this.getPageTitle(),{backgroundImage:u,textColor:g}=p,w={color:g},f=u?J:U;return m?Ei("div",null,a&&Ei(Z.a,{immersiveVariant:h,hero:a,onScrollDown:this.startStory,overlapHeader:!0,withoutSubNav:!0,isIcon:!0,hasBegunStory:e,immersiveComponents:Ti.VARIANTS}),Ei("div",{"aria-hidden":!e},p&&Ei(f,{data:Object(c.fromJS)(p),isFullScreen:!0,inlineStyle:w}),r&&Ei(Z.a,{hero:r,immersiveVariant:d}),this.renderChapters(),l&&Ei(j.a,{immersiveComponents:Ti.VARIANTS,items:l,toggleHeader:i,toggleSupportingNav:s,addToCartSuccessAction:this.addToCartSuccessAction,socialShareOnClick:n,pageType:ee.hc}),this.renderAudioPlayer())):null}}Object(a.a)(Ti,"contextTypes",{parallaxController:ce.a.object.isRequired}),Object(a.a)(Ti,"VARIANTS",{HeroImmersiveA1:class extends r.PureComponent{constructor(e){super(e),Object(a.a)(this,"onToggleclick",()=>{this.isScrolling=!0,setTimeout(()=>{this.isScrolling=!1,this.drawFrame()},2e3)}),Object(a.a)(this,"setupAnimation",()=>{this.updateScreenResolutionValues(),this.sceneSetup(),this.cameraSetup(),this.objectSetup(),this.lightSetup(),this.effectSetup(),this.createCanvas(),this.drawFrame(),this.addListeners(),this.isSetup=!0}),Object(a.a)(this,"getAverageFrequency",()=>(this.analyser.getByteFrequencyData(this.frequencyData),this.frequencyData.reduce((e,t)=>e+t,0)/this.frequencyData.length)),Object(a.a)(this,"connectAudioAnalyser",()=>{if(window.immersiveAudioAnalyser)this.analyser=window.immersiveAudioAnalyser;else if(this.props.hasBegunStory&&!window.webkitAudioContext){this.audioNode=document.getElementById("background-audio");const e=new window.AudioContext;if(this.audioNode&&e){const t=e.createMediaElementSource(this.audioNode);this.analyser=e.createAnalyser(),t.connect(this.analyser),this.analyser.connect(e.destination),this.analyser.fftSize=512,window.immersiveAudioAnalyser=this.analyser,this.frequencyData=new Uint8Array(this.analyser.frequencyBinCount)}}}),Object(a.a)(this,"initialise",()=>{$e()?this.setupAnimation():Ke(()=>Je(this.setupAnimation,[Ge.b,Ge.m,Ge.l,Ge.n]))}),Object(a.a)(this,"sceneSetup",()=>{this.isPortrait=this.sceneHeight>this.sceneWidth,this.scene=new window.THREE.Scene,this.scene.background=new window.THREE.Color(0),this.renderer=new window.THREE.WebGLRenderer({antialias:!1}),this.renderer.setSize(this.sceneWidth,this.sceneHeight),this.renderer.setPixelRatio(window.devicePixelRatio)}),Object(a.a)(this,"cameraSetup",()=>{this.camera=new window.THREE.PerspectiveCamera(45,this.sceneWidth/this.sceneHeight,.1,1e3),this.camera.position.x=-20,this.camera.position.y=30,this.camera.position.z=-50,this.camera.lookAt(new window.THREE.Vector3(0,0,0)),this.camera.position.y=25}),Object(a.a)(this,"objectSetup",()=>{this.sphereGeometry=new window.THREE.BoxGeometry(1,1,1,30,30,30),this.sphereGeometry.vertices.forEach(e=>{e.normalize().multiplyScalar(this.isPortrait?6:8)}),this.sphereGeometry.vertices.forEach(e=>{const t=new window.THREE.Vector3(e.x,e.y,e.z);this.sphereVerticesArray.push(t);let i=t.x*t.x+t.y*t.y+t.z*t.z;i=Math.sqrt(i);const s=new window.THREE.Vector3(e.x/i,e.y/i,e.z/i);this.sphereVerticesNormArray.push(s)});const e=new window.THREE.MeshPhongMaterial({color:16777215,opacity:1});this.sphere=new window.THREE.Mesh(this.sphereGeometry,e),this.scene.add(this.sphere)}),Object(a.a)(this,"lightSetup",()=>{this.spotLight=new window.THREE.DirectionalLight(16777215),this.spotLight.position.set(-20,25,-40),this.spotLight.intensity=1.8,this.scene.add(this.spotLight)}),Object(a.a)(this,"effectSetup",()=>{this.composer=new window.THREE.EffectComposer(this.renderer),this.renderPass=new window.THREE.RenderPass(this.scene,this.camera),this.composer.addPass(this.renderPass),this.sobelShader=new window.THREE.ShaderPass(window.THREE.SobelOperatorShader),this.sobelShader.renderToScreen=!0,this.sobelShader.uniforms.resolution.value.x=this.sceneWidth,this.sobelShader.uniforms.resolution.value.y=this.sceneHeight,this.composer.addPass(this.sobelShader)}),Object(a.a)(this,"updateScreenResolutionValues",()=>{if(this.sceneContainer.current){const e=this.sceneContainer.current.getBoundingClientRect();this.sceneWidth=e.width,this.sceneHeight=e.height}else this.sceneWidth=window.innerWidth,this.sceneHeight=window.innerHeight}),Object(a.a)(this,"resize",()=>{this.updateScreenResolutionValues(),this.camera.aspect=this.sceneWidth/this.sceneHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(this.sceneWidth,this.sceneHeight),this.renderer.setPixelRatio(window.devicePixelRatio),this.sobelShader.uniforms.resolution.value.x=this.sceneWidth,this.sobelShader.uniforms.resolution.value.y=this.sceneHeight}),Object(a.a)(this,"addListeners",()=>{window.addEventListener("mousemove",this.respondToMouse),window.addEventListener("resize",this.throttledOnResize,!1),window.addEventListener("orientationchange",this.throttledOnResize,!1),this.resize()}),Object(a.a)(this,"removeListeners",()=>{window.removeEventListener("mousemove",this.respondToMouse,!1),window.removeEventListener("resize",this.throttledOnResize,!1),window.removeEventListener("orientationchange",this.throttledOnResize,!1)}),Object(a.a)(this,"destroyScene",()=>{this.stopAnimation(),this.removeListeners(),this.scene&&this.scene.dispose(),this.analyser=null,window.immersiveAudioAnalyser=null}),Object(a.a)(this,"stopAnimation",()=>{window.cancelAnimationFrame(this.renderLoop),this.sphereGeometry&&this.sphereGeometry.dispose(),this.composer&&this.composer.dispose&&this.composer.dispose(),this.renderer&&this.renderer.dispose&&this.renderer.dispose()}),Object(a.a)(this,"restartAnimation",()=>{this.drawFrame(),this.removeListeners(),this.addListeners()}),Object(a.a)(this,"createCanvas",()=>{this.sceneContainer&&(this.sceneContainer.current.innerHTML="",this.sceneContainer.current.appendChild(this.renderer.domElement))}),Object(a.a)(this,"fbm",e=>Ve.a&&Ve.a.noise.simplex3(e._x,e._y,e._z)),Object(a.a)(this,"addPoint",e=>{const t=new Ue(0,0,0),i=e.length;for(let s=0;s<i;s+=1)t._x+=e[s]._x,t._y+=e[s]._y,t._z+=e[s]._z;return t}),Object(a.a)(this,"displace",e=>{const t=new Ue(this.fbm(this.addPoint([e,new Ue(0,0,0)])),this.fbm(this.addPoint([e,new Ue(0,1,0)])),this.fbm(this.addPoint([e,new Ue(0,0,1)])));return this.fbm(this.addPoint([e,new Ue(this.qMultiplier1*t._x,this.qMultiplier2*t._y,this.qMultiplier3*t._z)]))}),Object(a.a)(this,"respondToMouse",e=>{const t=this.sceneWidth/2,i=this.sceneHeight/2,s=e.clientX,n=e.clientY,o=1-Math.abs(t-s)/t,a=1-Math.abs(i-n)/i;this.noiseMultiplier=o/2+a/2}),Object(a.a)(this,"drawFrame",()=>{const{isInView:e}=this.props;e&&!this.isScrolling&&(this.renderLoop=window.requestAnimationFrame(this.drawFrame));const t=this.analyser&&this.getAverageFrequency()/50||this.minSoundFrequency,i=t/10*.2;this.step+=.2+i,this.noiseAmount=this.wideBeam*this.noiseMultiplier*this.beamMultiplier,this.audioEnabled&&!this.isMuted||(this.noiseAmount=7*this.noiseAmount),this.sphereGeometry.vertices.forEach((e,i)=>{const s=e,n=this.sphereVerticesArray[i],o=this.sphereVerticesNormArray[i],a=this.displace(new Ue((s.x+this.step)/100)),r=this.noiseAmount*t;s.x=n.x+.5*o.x*r,s.y=n.y+o.y*a*r,s.z=n.z+o.z*a*r}),this.sphereGeometry.computeFaceNormals(),this.sphereGeometry.computeVertexNormals(),this.sphereGeometry.verticesNeedUpdate=!0,this.sphereGeometry.normalsNeedUpdate=!0,this.composer&&this.composer.render(this.scene,this.camera)}),Object(a.a)(this,"sceneContainer",Object(r.createRef)()),Object(a.a)(this,"throttledOnResize",re()(this.resize,50)),this.sphereVerticesArray=[],this.sphereVerticesNormArray=[],this.noiseAmount=1.4,this.disabledNoiseAmount=3,this.qMultiplier1=5,this.qMultiplier2=5,this.qMultiplier3=0,this.minSoundFrequency=.1,this.noiseMultiplier=.5,this.beamMultiplier=1.4,this.wideBeam=3,this.step=0,this.stepAmount=.2,this.isSetup=!1,this.isScrolling=!1,this.audioNode=null,this.analyzer=null}componentDidMount(){this.initialise()}componentDidUpdate(e){const{isInView:t}=this.props;t&&this.isSetup?this.restartAnimation():e.isInView&&!t&&this.stopAnimation(),this.connectAudioAnalyser()}componentWillUnmount(){this.destroyScene()}render(){const{slnId:e,data:t}=this.props,i=t&&t.get("title")||"A vision of sound";return it("figure",{ref:this.sceneContainer,className:"o-hero__bgImmersive -A1 -fadeInSlow","data-slnm-id":"".concat(e,"_immersiveA1")},it("figcaption",{className:"o-hero__bgCaption"},it("p",{className:"-expand -stagger2"},i)))}},HeroImmersiveA2:class extends r.PureComponent{constructor(e){super(e),Object(a.a)(this,"setupAnimation",()=>{this.updateScreenResolutionValues(),this.sceneSetup(),this.cameraSetup(),this.objectSetup(),this.lightSetup(),this.effectSetup(),this.createCanvas(),this.connectAudioAnalyser(),this.drawFrame(),this.isSetup=!0}),Object(a.a)(this,"initialise",()=>{$e()?this.setupAnimation():Ke(()=>Je(this.setupAnimation,[Ge.b,Ge.m,Ge.l,Ge.n]))}),Object(a.a)(this,"sceneSetup",()=>{this.isPortrait=this.sceneHeight>this.sceneWidth,this.scene=new window.THREE.Scene,this.scene.background=new window.THREE.Color(0),this.renderer=new window.THREE.WebGLRenderer({antialias:!1}),this.renderer.setSize(this.sceneWidth,this.sceneHeight),this.renderer.setPixelRatio(window.devicePixelRatio)}),Object(a.a)(this,"cameraSetup",()=>{this.camera=new window.THREE.PerspectiveCamera(45,this.sceneWidth/this.sceneHeight,.1,1e3),this.camera.position.x=-20,this.camera.position.y=30,this.camera.position.z=-50,this.camera.lookAt(new window.THREE.Vector3(0,0,0))}),Object(a.a)(this,"objectSetup",()=>{this.sphereGeometry=new window.THREE.BoxGeometry(1,1,1,30,30,30),this.sphereGeometry.vertices.forEach(e=>{e.normalize().multiplyScalar(this.isPortrait?7:10)}),this.sphereGeometry.vertices.forEach(e=>{const t=new window.THREE.Vector3(e.x,e.y,e.z);this.sphereVerticesArray.push(t);let i=t.x*t.x+t.y*t.y+t.z*t.z;i=Math.sqrt(i);const s=new window.THREE.Vector3(e.x/i,e.y/i,e.z/i);this.sphereVerticesNormArray.push(s)});const e=new window.THREE.MeshPhongMaterial({color:16777215,opacity:1});this.sphere=new window.THREE.Mesh(this.sphereGeometry,e),this.scene.add(this.sphere)}),Object(a.a)(this,"lightSetup",()=>{this.spotLight=new window.THREE.DirectionalLight(16777215),this.spotLight.position.set(-20,30,-40),this.spotLight.intensity=1.8,this.scene.add(this.spotLight)}),Object(a.a)(this,"effectSetup",()=>{this.composer=new window.THREE.EffectComposer(this.renderer),this.renderPass=new window.THREE.RenderPass(this.scene,this.camera),this.composer.addPass(this.renderPass),this.sobelShader=new window.THREE.ShaderPass(window.THREE.SobelOperatorShader),this.sobelShader.renderToScreen=!0,this.sobelShader.uniforms.resolution.value.x=this.sceneWidth,this.sobelShader.uniforms.resolution.value.y=this.sceneHeight,this.composer.addPass(this.sobelShader)}),Object(a.a)(this,"updateScreenResolutionValues",()=>{if(this.sceneContainer.current){const e=this.sceneContainer.current.getBoundingClientRect();this.sceneWidth=e.width,this.sceneHeight=e.height}else this.sceneWidth=window.innerWidth,this.sceneHeight=window.innerHeight}),Object(a.a)(this,"resize",()=>{this.updateScreenResolutionValues(),this.camera.aspect=this.sceneWidth/this.sceneHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(this.sceneWidth,this.sceneHeight),this.renderer.setPixelRatio(window.devicePixelRatio),this.sobelShader.uniforms.resolution.value.x=this.sceneWidth,this.sobelShader.uniforms.resolution.value.y=this.sceneHeight}),Object(a.a)(this,"addListeners",()=>{window.addEventListener("mousemove",this.respondToMouse),window.addEventListener("resize",this.throttledOnResize,!1),window.addEventListener("orientationchange",this.throttledOnResize,!1),this.resize()}),Object(a.a)(this,"removeListeners",()=>{window.removeEventListener("mousemove",this.respondToMouse,!1),window.removeEventListener("resize",this.throttledOnResize,!1),window.removeEventListener("orientationchange",this.throttledOnResize,!1)}),Object(a.a)(this,"destroyScene",()=>{this.stopAnimation(),this.removeListeners(),this.scene&&this.scene.dispose()}),Object(a.a)(this,"stopAnimation",()=>{window.cancelAnimationFrame(this.renderLoop),this.sphereGeometry&&this.sphereGeometry.dispose(),this.composer&&this.composer.dispose&&this.composer.dispose(),this.renderer&&this.renderer.dispose&&this.renderer.dispose()}),Object(a.a)(this,"restartAnimation",()=>{this.drawFrame(),this.removeListeners(),this.addListeners()}),Object(a.a)(this,"createCanvas",()=>{this.sceneContainer&&(this.sceneContainer.current.innerHTML="",this.sceneContainer.current.appendChild(this.renderer.domElement))}),Object(a.a)(this,"getAverageFrequency",()=>(this.analyser.getByteFrequencyData(this.frequencyData),this.frequencyData.reduce((e,t)=>e+t,0)/this.frequencyData.length)),Object(a.a)(this,"connectAudioAnalyser",()=>{this.analyser=window.immersiveAudioAnalyser,this.analyser&&(this.frequencyData=new Uint8Array(this.analyser.frequencyBinCount))}),Object(a.a)(this,"fbm",e=>Ve.a&&Ve.a.noise.simplex3(e._x,e._y,e._z)),Object(a.a)(this,"addPoint",e=>{const t=new Ue(0,0,0),i=e.length;for(let s=0;s<i;s+=1)t._x+=e[s]._x,t._y+=e[s]._y,t._z+=e[s]._z;return t}),Object(a.a)(this,"displace",e=>{const t=new Ue(this.fbm(this.addPoint([e,new Ue(0,0,0)])),this.fbm(this.addPoint([e,new Ue(0,1,0)])),this.fbm(this.addPoint([e,new Ue(0,0,1)])));return this.fbm(this.addPoint([e,new Ue(this.qMultiplier1*t._x,this.qMultiplier2*t._y,this.qMultiplier3*t._z)]))}),Object(a.a)(this,"respondToMouse",e=>{const t=this.sceneWidth/2,i=this.sceneHeight/2,s=e.clientX,n=e.clientY,o=(1-Math.abs(t-s)/t)/2+(1-Math.abs(i-n)/i)/2;this.noiseMultiplier=o}),Object(a.a)(this,"drawFrame",()=>{const{isInView:e}=this.props;if(e){this.renderLoop=window.requestAnimationFrame(this.drawFrame);const e=this.analyser&&this.getAverageFrequency(),t=e&&(e[3]+e[6])/2,i=t&&t/75||this.minSoundFrequency,s=i/10*.2;this.step+=.2+s,this.noiseAmount=this.wideBeam*this.noiseMultiplier*this.beamMultiplier,this.audioEnabled&&!this.isMuted||(this.noiseAmount=7*this.noiseAmount),this.sphereGeometry.vertices.forEach((e,t)=>{const s=e,n=this.sphereVerticesArray[t],o=this.sphereVerticesNormArray[t],a=this.displace(new Ue((s.x+this.step)/100)),r=this.noiseAmount*i;s.x=n.x+.5*o.x*r,s.y=n.y+o.y*a*r,s.z=n.z+o.z*a*r}),this.sphereGeometry.computeFaceNormals(),this.sphereGeometry.computeVertexNormals(),this.sphereGeometry.verticesNeedUpdate=!0,this.sphereGeometry.normalsNeedUpdate=!0,this.composer&&this.composer.render(this.scene,this.camera)}}),Object(a.a)(this,"sceneContainer",Object(r.createRef)()),Object(a.a)(this,"throttledOnResize",re()(this.resize,50)),this.sphereVerticesArray=[],this.sphereVerticesNormArray=[],this.noiseAmount=1.3,this.qMultiplier1=5,this.qMultiplier2=5,this.qMultiplier3=0,this.audioNode=null,this.analyzer=null,this.minSoundFrequency=.1,this.noiseMultiplier=.5,this.beamMultiplier=1.4,this.wideBeam=3,this.step=0,this.stepAmount=.2,this.isSetup=!1}componentDidMount(){this.initialise()}componentDidUpdate(e){const{isInView:t}=this.props;t&&this.isSetup?this.restartAnimation():e.isInView&&!t&&(this.stopAnimation(),this.removeListeners())}componentWillUnmount(){this.destroyScene()}render(){const{slnId:e}=this.props;return st("figure",{ref:this.sceneContainer,className:"o-heroImmersive__bg -A2 o-hero__bgImmersive -staggerIn -stagger1","data-slnm-id":"".concat(e,"_immersiveA2")})}},HeroImmersiveA3:class extends r.PureComponent{constructor(e){super(e),Object(a.a)(this,"setupAnimation",()=>{this.updateScreenResolutionValues(),this.sceneSetup(),this.cameraSetup(),this.createCanvas(),this.sceneElements(),this.textureSetup(),this.effectSetup(),this.connectAudioAnalyser(),this.drawFrame(),this.isSetup=!0}),Object(a.a)(this,"getAverageFrequency",()=>(this.analyser.getByteFrequencyData(this.frequencyData),this.frequencyData.reduce((e,t)=>e+t,0)/this.frequencyData.length)),Object(a.a)(this,"connectAudioAnalyser",()=>{this.analyser=window.immersiveAudioAnalyser,this.analyser&&(this.frequencyData=new Uint8Array(this.analyser.frequencyBinCount))}),Object(a.a)(this,"initialise",()=>{$e()?this.setupAnimation():Ke(()=>Je(this.setupAnimation,[Ge.b,Ge.m,Ge.l,Ge.n]))}),Object(a.a)(this,"sceneSetup",()=>{this.scene=new window.THREE.Scene,this.scene.background=0,this.scene.fog=new window.THREE.Fog(new window.THREE.Color(16777215),20,400),this.renderer=new window.THREE.WebGLRenderer({antialias:!1}),this.renderer.setSize(this.sceneWidth,this.sceneHeight)}),Object(a.a)(this,"cameraSetup",()=>{this.camera=new window.THREE.PerspectiveCamera(60,this.sceneWidth/this.sceneHeight,.1,1e4),this.camera.position.y=8,this.camera.position.z=4}),Object(a.a)(this,"effectSetup",()=>{this.composer=new window.THREE.EffectComposer(this.renderer),this.renderPass=new window.THREE.RenderPass(this.scene,this.camera),this.composer.addPass(this.renderPass),this.sobelShader=new window.THREE.ShaderPass(window.THREE.SobelOperatorShader),this.sobelShader.renderToScreen=!0,this.sobelShader.uniforms.resolution.value.x=this.sceneWidth,this.sobelShader.uniforms.resolution.value.y=this.sceneHeight,this.composer.addPass(this.sobelShader)}),Object(a.a)(this,"sceneElements",()=>{const e=new window.THREE.PlaneBufferGeometry(200,400,600,600),t={time:{type:"f",value:0},distortCenter:{type:"f",value:.1},roadWidth:{type:"f",value:.5},pallete:{type:"t",value:null},speed:{type:"f",value:.5},maxHeight:{type:"f",value:10},color:new window.THREE.Color(1,0,0)},i=new window.THREE.ShaderMaterial({uniforms:window.THREE.UniformsUtils.merge([window.THREE.ShaderLib.basic.uniforms,t]),vertexShader:'\n//\n// GLSL textureless classic 3D noise "cnoise",\n// with an RSL-style periodic variant "pnoise".\n// Author:  Stefan Gustavson (stefan.gustavson@liu.se)\n// Version: 2011-10-11\n//\n// Many thanks to Ian McEwan of Ashima Arts for the\n// ideas for permutation and gradient selection.\n//\n// Copyright (c) 2011 Stefan Gustavson. All rights reserved.\n// Distributed under the MIT license. See LICENSE file.\n// https://github.com/stegu/webgl-noise\n//\n\nvec3 mod289(vec3 x)\n{\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec4 mod289(vec4 x)\n{\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec4 permute(vec4 x)\n{\n  return mod289(((x*34.0)+1.0)*x);\n}\n\nvec4 taylorInvSqrt(vec4 r)\n{\n  return 1.79284291400159 - 0.85373472095314 * r;\n}\n\nvec3 fade(vec3 t) {\n  return t*t*t*(t*(t*6.0-15.0)+10.0);\n}\n\n// Classic Perlin noise\nfloat cnoise(vec3 P)\n{\n  vec3 Pi0 = floor(P); // Integer part for indexing\n  vec3 Pi1 = Pi0 + vec3(1.0); // Integer part + 1\n  Pi0 = mod289(Pi0);\n  Pi1 = mod289(Pi1);\n  vec3 Pf0 = fract(P); // Fractional part for interpolation\n  vec3 Pf1 = Pf0 - vec3(1.0); // Fractional part - 1.0\n  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n  vec4 iy = vec4(Pi0.yy, Pi1.yy);\n  vec4 iz0 = Pi0.zzzz;\n  vec4 iz1 = Pi1.zzzz;\n\n  vec4 ixy = permute(permute(ix) + iy);\n  vec4 ixy0 = permute(ixy + iz0);\n  vec4 ixy1 = permute(ixy + iz1);\n\n  vec4 gx0 = ixy0 * (1.0 / 7.0);\n  vec4 gy0 = fract(floor(gx0) * (1.0 / 7.0)) - 0.5;\n  gx0 = fract(gx0);\n  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\n  vec4 sz0 = step(gz0, vec4(0.0));\n  gx0 -= sz0 * (step(0.0, gx0) - 0.5);\n  gy0 -= sz0 * (step(0.0, gy0) - 0.5);\n\n  vec4 gx1 = ixy1 * (1.0 / 7.0);\n  vec4 gy1 = fract(floor(gx1) * (1.0 / 7.0)) - 0.5;\n  gx1 = fract(gx1);\n  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\n  vec4 sz1 = step(gz1, vec4(0.0));\n  gx1 -= sz1 * (step(0.0, gx1) - 0.5);\n  gy1 -= sz1 * (step(0.0, gy1) - 0.5);\n\n  vec3 g000 = vec3(gx0.x,gy0.x,gz0.x);\n  vec3 g100 = vec3(gx0.y,gy0.y,gz0.y);\n  vec3 g010 = vec3(gx0.z,gy0.z,gz0.z);\n  vec3 g110 = vec3(gx0.w,gy0.w,gz0.w);\n  vec3 g001 = vec3(gx1.x,gy1.x,gz1.x);\n  vec3 g101 = vec3(gx1.y,gy1.y,gz1.y);\n  vec3 g011 = vec3(gx1.z,gy1.z,gz1.z);\n  vec3 g111 = vec3(gx1.w,gy1.w,gz1.w);\n\n  vec4 norm0 = taylorInvSqrt(vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\n  g000 *= norm0.x;\n  g010 *= norm0.y;\n  g100 *= norm0.z;\n  g110 *= norm0.w;\n  vec4 norm1 = taylorInvSqrt(vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\n  g001 *= norm1.x;\n  g011 *= norm1.y;\n  g101 *= norm1.z;\n  g111 *= norm1.w;\n\n  float n000 = dot(g000, Pf0);\n  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\n  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\n  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\n  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\n  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\n  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\n  float n111 = dot(g111, Pf1);\n\n  vec3 fade_xyz = fade(Pf0);\n  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111), fade_xyz.z);\n  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\n  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);\n  return 2.2 * n_xyz;\n}\n\n// Classic Perlin noise, periodic variant\nfloat pnoise(vec3 P, vec3 rep)\n{\n  vec3 Pi0 = mod(floor(P), rep); // Integer part, modulo period\n  vec3 Pi1 = mod(Pi0 + vec3(1.0), rep); // Integer part + 1, mod period\n  Pi0 = mod289(Pi0);\n  Pi1 = mod289(Pi1);\n  vec3 Pf0 = fract(P); // Fractional part for interpolation\n  vec3 Pf1 = Pf0 - vec3(1.0); // Fractional part - 1.0\n  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n  vec4 iy = vec4(Pi0.yy, Pi1.yy);\n  vec4 iz0 = Pi0.zzzz;\n  vec4 iz1 = Pi1.zzzz;\n\n  vec4 ixy = permute(permute(ix) + iy);\n  vec4 ixy0 = permute(ixy + iz0);\n  vec4 ixy1 = permute(ixy + iz1);\n\n  vec4 gx0 = ixy0 * (1.0 / 7.0);\n  vec4 gy0 = fract(floor(gx0) * (1.0 / 7.0)) - 0.5;\n  gx0 = fract(gx0);\n  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\n  vec4 sz0 = step(gz0, vec4(0.0));\n  gx0 -= sz0 * (step(0.0, gx0) - 0.5);\n  gy0 -= sz0 * (step(0.0, gy0) - 0.5);\n\n  vec4 gx1 = ixy1 * (1.0 / 7.0);\n  vec4 gy1 = fract(floor(gx1) * (1.0 / 7.0)) - 0.5;\n  gx1 = fract(gx1);\n  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\n  vec4 sz1 = step(gz1, vec4(0.0));\n  gx1 -= sz1 * (step(0.0, gx1) - 0.5);\n  gy1 -= sz1 * (step(0.0, gy1) - 0.5);\n\n  vec3 g000 = vec3(gx0.x,gy0.x,gz0.x);\n  vec3 g100 = vec3(gx0.y,gy0.y,gz0.y);\n  vec3 g010 = vec3(gx0.z,gy0.z,gz0.z);\n  vec3 g110 = vec3(gx0.w,gy0.w,gz0.w);\n  vec3 g001 = vec3(gx1.x,gy1.x,gz1.x);\n  vec3 g101 = vec3(gx1.y,gy1.y,gz1.y);\n  vec3 g011 = vec3(gx1.z,gy1.z,gz1.z);\n  vec3 g111 = vec3(gx1.w,gy1.w,gz1.w);\n\n  vec4 norm0 = taylorInvSqrt(vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\n  g000 *= norm0.x;\n  g010 *= norm0.y;\n  g100 *= norm0.z;\n  g110 *= norm0.w;\n  vec4 norm1 = taylorInvSqrt(vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\n  g001 *= norm1.x;\n  g011 *= norm1.y;\n  g101 *= norm1.z;\n  g111 *= norm1.w;\n\n  float n000 = dot(g000, Pf0);\n  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\n  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\n  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\n  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\n  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\n  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\n  float n111 = dot(g111, Pf1);\n\n  vec3 fade_xyz = fade(Pf0);\n  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111), fade_xyz.z);\n  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\n  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);\n  return 2.2 * n_xyz;\n}\n\n#define PI 3.1415926535897932384626433832795\n\nuniform float time;\nuniform float maxHeight;\nuniform float speed;\nuniform float distortCenter;\nuniform float roadWidth;\nvarying float vDisplace;\n\nvarying float fogDepth;\n\nvoid main(){\n\n  float t = time * speed;\n  float wRoad = distortCenter;\n  float wRoad2 = wRoad * 0.5;\n\n  float angleCenter = uv.y * PI*4.0;\n  angleCenter += t * 0.9;\n\n  float centerOff = (\n    sin(angleCenter) +\n    sin(angleCenter*0.5)\n  ) * wRoad;\n\n\n  vec3 noiseIn = vec3(uv, 1.0)*10.0;\n  float noise = cnoise(vec3(noiseIn.x, noiseIn.y + t, noiseIn.z));\n  noise += 1.0;\n  float h = noise;\n  float angle = (uv.x - centerOff) * PI;\n  float f = abs(cos(angle));\n  h *= pow(f, 1.5 + roadWidth);\n\n\n  vDisplace = h;\n\n\n  h*=maxHeight;\n\n  vec3 transformed = vec3( position.x, position.y, position.z + h );\n\n\n  vec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\n  gl_Position = projectionMatrix * mvPosition;\n\n  fogDepth = -mvPosition.z;\n\n}',fragmentShader:"\nuniform float time;\nuniform vec3 color;\nuniform sampler2D pallete;\nvarying float vDisplace;\n\nuniform vec3 fogColor;\nuniform float fogNear;\nuniform float fogFar;\nvarying float fogDepth;\n\nvoid main(){\n\n  vec2 stripPos = vec2( 0.0, vDisplace );\n  vec4 stripColor = texture2D( pallete, stripPos );\n  stripColor *= pow(1.0-vDisplace, 1.0);\n\n  gl_FragColor = stripColor;\n\n  #ifdef USE_FOG\n    float fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n    gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n  #endif\n}\n",wireframe:!1,fog:!0});this.terrain=new window.THREE.Mesh(e,i),this.terrain.position.z=-180,this.terrain.rotation.x=-Math.PI/2,this.scene.add(this.terrain)}),Object(a.a)(this,"textureSetup",()=>{const e=this.terrain;(new window.THREE.TextureLoader).load(this.palleteImage,t=>{e.material.uniforms.pallete.value=t,e.material.needsUpdate=!0})}),Object(a.a)(this,"map",(e,t,i,s,n)=>s+(e-t)/(i-t)*(n-s)),Object(a.a)(this,"lerp",(e,t,i)=>(1-i)*e+i*t),Object(a.a)(this,"updateScreenResolutionValues",()=>{if(this.sceneContainer.current){const e=this.sceneContainer.current.getBoundingClientRect();this.sceneWidth=e.width,this.sceneHeight=e.height}else this.sceneWidth=window.innerWidth,this.sceneHeight=window.innerHeight;this.centerIndex=this.sceneWidth,this.roadIndex=this.sceneHeight,this.mountainIndex=this.sceneHeight}),Object(a.a)(this,"resize",()=>{this.camera.aspect=this.sceneWidth/this.sceneHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(this.sceneWidth,this.sceneHeight)}),Object(a.a)(this,"respondToMouse",e=>{this.mouse.x=e.clientX,this.mouse.y=e.clientY}),Object(a.a)(this,"addListeners",()=>{window.addEventListener("mousemove",this.respondToMouse,!1),window.addEventListener("resize",this.throttledOnResize,!1),window.addEventListener("orientationchange",this.throttledOnResize,!1),this.resize()}),Object(a.a)(this,"createCanvas",()=>{this.sceneContainer&&(this.sceneContainer.current.innerHTML="",this.sceneContainer.current.appendChild(this.renderer.domElement))}),Object(a.a)(this,"removeListeners",()=>{window.removeEventListener("mousemove",this.respondToMouse,!1),window.removeEventListener("resize",this.throttledOnResize,!1),window.removeEventListener("orientationchange",this.throttledOnResize,!1)}),Object(a.a)(this,"destroyScene",()=>{this.stopAnimation(),this.removeListeners(),this.scene&&this.scene.dispose()}),Object(a.a)(this,"stopAnimation",()=>{window.cancelAnimationFrame(this.renderLoop),this.composer&&this.composer.dispose&&this.composer.dispose(),this.renderer&&this.renderer.dispose&&this.renderer.dispose()}),Object(a.a)(this,"restartAnimation",()=>{this.drawFrame(),this.removeListeners(),this.addListeners()}),Object(a.a)(this,"drawFrame",()=>{const{isInView:e}=this.props;if(e){this.renderLoop=window.requestAnimationFrame(this.drawFrame);const e=.005*performance.now();this.soundMultiplier=this.analyser?this.getAverageFrequency()/15:this.soundMultiplier,this.distortMultiplier>this.maxDistort?this.distortMultiplier-=.01:this.distortMultiplier<this.minDistort&&(this.distortMultiplier+=.01),this.mouse.xDamped=this.lerp(this.mouse.xDamped,this.mouse.x,.1),this.mouse.yDamped=this.lerp(this.mouse.yDamped,this.mouse.y,.1),this.terrain.material.uniforms.time.value=e,this.terrain.material.uniforms.distortCenter.value=this.map(Math.min(Math.max(this.mouse.xDamped,.3*this.centerIndex),this.centerIndex)+this.centerIndex/2*this.distortMultiplier,0,this.centerIndex,-.1,.1),this.terrain.material.uniforms.roadWidth.value=this.map(this.mouse.yDamped,0,this.roadIndex,-.5,5.5),this.terrain.material.uniforms.maxHeight.value=this.map(Math.min(Math.max(this.mouse.yDamped,.3*this.mountainIndex),this.mountainIndex),0,this.mountainIndex,20*(2*this.soundMultiplier+1),5*this.soundMultiplier),this.composer&&this.composer.render(this.scene,this.camera)}}),Object(a.a)(this,"sceneContainer",Object(r.createRef)()),Object(a.a)(this,"throttledOnResize",re()(this.resize,50));const{data:t}=e;this.mouse={x:0,y:0,xDamped:0,yDamped:0};const i=t&&t.get("backgroundImage");this.palleteImage=i&&i.getIn(["media","defaultAssetUrl"])||"//images.ctfassets.net/8cd2csgvqd3m/6oWewcy7OMXYElCJoas4FG/96987ebfbce99496836cc08d2278c179/beolab-90-terrain-texture.png",this.audioNode=null,this.analyzer=null,this.soundMultiplier=.1,this.distortMultiplier=0,this.centerIndex=0,this.roadIndex=0,this.mountainIndex=0,this.minDistort=0,this.maxDistort=1,this.isSetup=!1}componentDidMount(){this.initialise()}componentDidUpdate(e){const{isInView:t}=this.props;t&&this.isSetup?(this.restartAnimation(),this.connectAudioAnalyser()):e.isInView&&!t&&(this.stopAnimation(),this.removeListeners())}componentWillUnmount(){this.destroyScene()}render(){const{slnId:e}=this.props;return nt("figure",{ref:this.sceneContainer,className:"o-heroImmersive__bg -A3 o-hero__bgImmersive -fadeInSlow","data-slnm-id":"".concat(e,"_immersiveA3")})}},HeroImmersiveB1:pt,HeroImmersiveB2:class extends r.PureComponent{constructor(){super(...arguments),Object(a.a)(this,"onReady",()=>{this.addListeners()}),Object(a.a)(this,"setupScene",()=>{this.scene=new window.p5(ut,"p5-fibonacci"),this.scene.setOnReady(this.onReady)}),Object(a.a)(this,"loadP5",()=>{Qe.url("https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.7.3/p5.min.js").then(()=>{this.setupScene()}).catch(e=>{console.warn("Failed to load P5: ".concat(e))})}),Object(a.a)(this,"destroyScene",()=>{this.scene&&(this.removeListeners(),this.scene.remove())}),Object(a.a)(this,"addListeners",()=>{this.scene.addListeners()}),Object(a.a)(this,"removeListeners",()=>{this.scene.removeListeners()}),Object(a.a)(this,"sceneContainer",Object(r.createRef)())}componentDidMount(){window&&window.p5?this.setupScene():this.loadP5()}componentDidUpdate(){const{isInView:e}=this.props;this.scene&&this.scene.setVisibility(e)}componentWillUnmount(){this.destroyScene()}render(){const{slnId:e}=this.props;return gt("figure",{ref:this.sceneContainer,className:"o-hero__bgImmersive -B2 -fadeInSlow","data-slnm-id":"".concat(e,"_immersiveB2")},gt("div",{id:"p5-fibonacci",className:"o-hero__fibonacci"}))}},HeroImmersiveC1:class extends r.PureComponent{constructor(){super(...arguments),Object(a.a)(this,"setupAnimation",()=>{this.isSetup=!0,this.sceneSetup(),this.cameraSetup(),this.objectSetup(),this.lightSetup(),this.createCanvas(),this.drawFrame(),this.addListeners()}),Object(a.a)(this,"sceneSetup",()=>{this.updateScreenResolutionValues(),this.isPortrait=this.sceneHeight>this.sceneWidth,this.scene=new window.THREE.Scene,this.clock=new window.THREE.Clock;const e=window.devicePixelRatio;this.pixelRatio=e&&e>1?1.5:e,this.renderer=new window.THREE.WebGLRenderer,this.renderer.setSize(this.sceneWidth,this.sceneHeight),this.renderer.setPixelRatio(this.pixelRatio)}),Object(a.a)(this,"cameraSetup",()=>{this.camera=new window.THREE.PerspectiveCamera(47,this.sceneWidth/this.sceneHeight,.01,1e4),this.cameraRotation=0,this.camera.position.set(0,0,0)}),Object(a.a)(this,"objectSetup",()=>{this.backgroundSetup(),this.logoSetup()}),Object(a.a)(this,"backgroundSetup",()=>{const e=new window.THREE.CylinderGeometry(70,70,65,200,100,!0);this.bgVertices=JSON.parse(ft()(e.vertices));const t=this.getImgByIndex(1)||vt,i=(new window.THREE.TextureLoader).load(t);i.wrapS=window.THREE.RepeatWrapping,i.repeat.set(2,1);const s=new window.THREE.MeshLambertMaterial({transparent:!0,side:window.THREE.BackSide,map:i});this.background=new window.THREE.Mesh(e,s),this.background.position.set(0,0,0),this.background.rotation.y=Math.PI/2,this.scene.add(this.background)}),Object(a.a)(this,"logoSetup",()=>{const e=new window.THREE.CylinderGeometry(10,10,8,200,100,!0);this.logoVertices=JSON.parse(ft()(e.vertices));const t=this.isPortrait?yt:bt,i=this.getImgByIndex(this.isPortrait?3:2)||t,s=(new window.THREE.TextureLoader).load(i);s.wrapS=window.THREE.RepeatWrapping,s.repeat.set(2,1);const n=new window.THREE.MeshBasicMaterial({transparent:!0,side:window.THREE.BackSide,map:s});this.logo=new window.THREE.Mesh(e,n),this.logo.position.set(0,0,0),this.logo.rotation.y=Math.PI/2,this.scene.add(this.logo)}),Object(a.a)(this,"getImgByIndex",e=>{const{data:t}=this.props,i=t.get("item"),s=i&&i.toJS(),n=s&&s[e],o=n&&n.media;return o&&o.defaultAssetUrl}),Object(a.a)(this,"lightSetup",()=>{const e=new window.THREE.PointLight(16777215,11.7,100,2);e.position.set(0,7,0),this.scene.add(e)}),Object(a.a)(this,"createCanvas",()=>{this.sceneContainer.current&&(this.sceneContainer.current.innerHTML="",this.sceneContainer.current.appendChild(this.renderer.domElement))}),Object(a.a)(this,"addListeners",()=>{window.addEventListener("mousemove",this.throttledOnMousemove,!1),window.addEventListener("resize",this.throttledOnResize,!1),window.addEventListener("orientationchange",this.throttledOnResize,!1),this.resize()}),Object(a.a)(this,"removeListeners",()=>{window.removeEventListener("mousemove",this.throttledOnMousemove,!1),window.removeEventListener("resize",this.throttledOnResize,!1),window.removeEventListener("orientationchange",this.throttledOnResize,!1)}),Object(a.a)(this,"destroyScene",()=>{this.stopAnimation(),this.scene&&this.scene.dispose()}),Object(a.a)(this,"stopAnimation",()=>{this.removeListeners(),window.cancelAnimationFrame(this.renderLoop),this.renderer&&this.renderer.dispose&&this.renderer.dispose()}),Object(a.a)(this,"restartAnimation",()=>{this.drawFrame(),this.removeListeners(),this.addListeners()}),Object(a.a)(this,"move",e=>{const t=this.sceneWidth/2,i=this.sceneHeight/2,s=(t-e.clientX)/t,n=(i-e.clientY)/i,o=Math.PI*(.03*s),a=.5*-n;et()&&this.camera&&(window.TweenMax.to(this.camera.rotation,5,{ease:window.Sine.easeOut,y:this.cameraRotation-o}),window.TweenMax.to(this.camera.position,5,{ease:window.Sine.easeOut,y:a}))}),Object(a.a)(this,"updateScreenResolutionValues",()=>{if(this.sceneContainer.current){const e=this.sceneContainer.current.getBoundingClientRect();this.sceneWidth=e.width,this.sceneHeight=e.height}else this.sceneWidth=window.innerWidth,this.sceneHeight=window.innerHeight}),Object(a.a)(this,"resize",()=>{if(this.updateScreenResolutionValues(),this.camera&&(this.camera.aspect=this.sceneWidth/this.sceneHeight,this.camera.updateProjectionMatrix()),this.renderer){const e=window.devicePixelRatio;this.pixelRatio=e&&e>1?1.5:e,this.renderer.setSize(this.sceneWidth,this.sceneHeight),this.renderer.setPixelRatio(this.pixelRatio)}}),Object(a.a)(this,"getWave",(e,t)=>Math.sin(e/15+(t+e)/17)),Object(a.a)(this,"initialise",()=>{Ze()&&et()?this.setupAnimation():Ke(()=>tt(this.setupAnimation))}),Object(a.a)(this,"drawFrame",()=>{const{isInView:e}=this.props;e&&(this.renderLoop=window.requestAnimationFrame(this.drawFrame));const t=7*this.clock.getElapsedTime();let i,s,n;this.background.geometry.vertices.forEach((e,o)=>{i=this.getWave(o,t),s=this.bgVertices[o],(n=e).x=s.x+i,n.y=s.y+i,n.z=s.z+i}),this.background.geometry.verticesNeedUpdate=!0,this.renderer.render(this.scene,this.camera)}),Object(a.a)(this,"sceneContainer",Object(r.createRef)()),Object(a.a)(this,"throttledOnMousemove",re()(this.move,200)),Object(a.a)(this,"throttledOnResize",re()(this.resize,50))}componentDidMount(){const{isInView:e}=this.props;e&&this.initialise()}componentDidUpdate(e){const{isInView:t}=this.props;t&&!this.isSetup?this.initialise():t&&this.isSetup?this.restartAnimation():e.isInView&&!t&&this.stopAnimation()}componentWillUnmount(){this.destroyScene()}render(){const{slnId:e}=this.props;return xt("figure",{ref:this.sceneContainer,className:"o-hero__bgImmersive -C1 -fadeInSlow","data-slnm-id":"".concat(e,"_immersiveC1")})}},HeroImmersiveC2:class extends r.PureComponent{constructor(){super(...arguments),Object(a.a)(this,"setupAnimation",()=>{this.sceneSetup(),this.cameraSetup(),this.textureSetup(),this.imageSetup(),this.lightSetup(),this.createCanvas(),this.drawFrame(),this.addListeners(),this.isSetup=!0}),Object(a.a)(this,"sceneSetup",()=>{this.prevSlide=0,this.currentSlide=0,this.isAnimating=!1,this.scene=new window.THREE.Scene,this.clock=new window.THREE.Clock,this.renderer=new window.THREE.WebGLRenderer;const e=window.devicePixelRatio;this.pixelRatio=e&&e>1?1.5:e,this.renderer.setSize(this.sceneWidth,this.sceneHeight),this.renderer.setPixelRatio(this.pixelRatio)}),Object(a.a)(this,"cameraSetup",()=>{this.camera=new window.THREE.PerspectiveCamera(47,this.sceneWidth/this.sceneHeight,.01,1e4),this.cameraRotation=0,this.camera.position.set(0,0,0)}),Object(a.a)(this,"imageSetup",()=>{this.updateScreenResolutionValues(),this.isPortrait=this.sceneHeight>this.sceneWidth,this.productSetup(),this.backgroundSetup(),this.textSetup()}),Object(a.a)(this,"productSetup",()=>{const e=this.isPortrait?Pt:jt,t=this.getImagesByGalleryId(this.isPortrait?Et+Ot:Et)||e,i=this.productContainer.current;t.forEach((e,t)=>{const s=document.createElement("div");i.appendChild(s),s&&(s.classList.add("o-hero__product"),s.style.backgroundImage="url(".concat(e,")"),0===t&&s.classList.add("-active"))})}),Object(a.a)(this,"textureSetup",()=>{const e=this.isPortrait?At:Ct,t=this.getImagesByGalleryId(this.isPortrait?Tt+Ot:Tt)||e;this.bgTextures=t.map(e=>(new window.THREE.TextureLoader).load(e));const i=this.isPortrait?It:kt,s=this.getImagesByGalleryId(this.isPortrait?Rt+Ot:Rt)||i;this.textTextures=s.map(e=>(new window.THREE.TextureLoader).load(e))}),Object(a.a)(this,"backgroundSetup",()=>{const e=new window.THREE.CylinderGeometry(70,70,65,200,100,!0);this.bgVertices=JSON.parse(ft()(e.vertices));const t=this.bgTextures.map(e=>{const t=e;return t.wrapS=window.THREE.RepeatWrapping,t.repeat.set(2,1),t}),i={transparent:!0,side:window.THREE.BackSide},n=t.map((e,t)=>new window.THREE.MeshLambertMaterial(Object(s.a)({},i,{map:e,opacity:0===t?1:0}))).map(t=>new window.THREE.Mesh(e,t));this.backgrounds=n.map(e=>{const t=e;return t.position.set(0,0,0),t.rotation.y=Math.PI/2,t}),this.totalSlides=this.backgrounds.length,this.backgrounds.forEach(e=>{this.scene.add(e)})}),Object(a.a)(this,"textSetup",()=>{const e=new window.THREE.CylinderGeometry(55,55,55,200,100,!0);this.textVertices=JSON.parse(ft()(e.vertices));const t=this.textTextures.map(e=>{const t=e;return t.wrapS=window.THREE.RepeatWrapping,t.repeat.set(2,1),t}),i={transparent:!0,side:window.THREE.BackSide},n=t.map((e,t)=>new window.THREE.MeshLambertMaterial(Object(s.a)({},i,{map:e,opacity:0===t?1:0}))).map(t=>new window.THREE.Mesh(e,t));this.texts=n.map(e=>{const t=e;return t.position.set(0,0,0),t.rotation.y=Math.PI/2,t}),this.texts.forEach(e=>{this.scene.add(e)})}),Object(a.a)(this,"lightSetup",()=>{const e=new window.THREE.PointLight(16777215,5,100,2),t=new window.THREE.PointLight(16777215,6,100,2);e.position.set(5,5,5),t.position.set(-5,5,-5),this.scene.add(e),this.scene.add(t)}),Object(a.a)(this,"createCanvas",()=>{this.sceneContainer&&(this.sceneContainer.current.innerHTML="",this.sceneContainer.current.appendChild(this.renderer.domElement))}),Object(a.a)(this,"addListeners",()=>{this.sceneContainer.current.addEventListener("click",this.spin,!1),window.addEventListener("mousemove",this.throttledOnMousemove,!1),window.addEventListener("resize",this.throttledOnResize,!1),window.addEventListener("orientationchange",this.throttledOnResize,!1),this.scrollListenerTimeout=setTimeout(this.addScrollListener,1500),this.resize()}),Object(a.a)(this,"addScrollListener",()=>{window.addEventListener("scroll",this.throttledOnScroll,!1)}),Object(a.a)(this,"removeListeners",()=>{this.sceneContainer.current.removeEventListener("click",this.spin,!1),window.removeEventListener("mousemove",this.throttledOnMousemove,!1),window.removeEventListener("resize",this.throttledOnResize,!1),window.removeEventListener("orientationchange",this.throttledOnResize,!1),this.removeScrollListener(),clearTimeout(this.scrollListenerTimeout)}),Object(a.a)(this,"removeScrollListener",()=>{window.removeEventListener("scroll",this.throttledOnScroll,!1)}),Object(a.a)(this,"destroyScene",()=>{this.stopAnimation(),this.scene&&this.scene.dispose()}),Object(a.a)(this,"stopAnimation",()=>{this.removeListeners(),this.renderer&&this.renderer.dispose&&this.renderer.dispose(),window.cancelAnimationFrame(this.renderLoop)}),Object(a.a)(this,"restartAnimation",()=>{this.drawFrame(),this.removeListeners(),this.addListeners()}),Object(a.a)(this,"spin",e=>{if(this.isAnimating)return!1;const t=this,i=this.productContainer.current.getElementsByTagName("div");this.isAnimating=!0;const s=e===Nt.UP?this.camera.rotation.y+Math.PI:this.camera.rotation.y-Math.PI;return this.cameraRotation=s,i.length&&(i[this.prevSlide].classList.remove(Mt),i[this.currentSlide].classList.add(Mt)),this.scene.remove(this.backgrounds),this.scene.remove(this.texts),this.scene.add(this.backgrounds[this.currentSlide]),this.scene.add(this.texts[this.currentSlide]),window.TweenMax.to(this.camera.rotation,Ht,{ease:window.Sine.easeInOut,y:s,onComplete(){t.isAnimating=!1}}),window.TweenMax.to(this.backgrounds[this.prevSlide].material,Ht,{ease:window.Sine.easeInOut,opacity:0,onComplete(){t.scene.remove(t.backgrounds[this.prevSlide]),t.scene.remove(t.texts[this.prevSlide])}}),window.TweenMax.to(this.backgrounds[this.currentSlide].material,Ht,{ease:window.Sine.easeInOut,opacity:1}),window.TweenMax.to(this.texts[this.prevSlide].material,Ht,{ease:window.Sine.easeInOut,opacity:0}),window.TweenMax.to(this.texts[this.currentSlide].material,Ht,{ease:window.Sine.easeInOut,opacity:1}),!0}),Object(a.a)(this,"move",e=>{const t=this.sceneWidth/2,i=this.sceneHeight/2,s=(t-e.clientX)/t,n=(i-e.clientY)/i,o=Math.PI*(.03*s),a=1.5*-n;et()&&!this.isAnimating&&(window.TweenMax.to(this.camera.rotation,5,{ease:window.Sine.easeOut,y:this.cameraRotation-o}),window.TweenMax.to(this.camera.position,5,{ease:window.Sine.easeOut,y:a}))}),Object(a.a)(this,"updateScreenResolutionValues",()=>{if(this.sceneContainer.current){const e=this.sceneContainer.current.getBoundingClientRect();this.sceneWidth=e.width,this.sceneHeight=e.height}else this.sceneWidth=window.innerWidth,this.sceneHeight=window.innerHeight}),Object(a.a)(this,"resize",()=>{this.updateScreenResolutionValues(),this.wrapperHeight=this.scrollWrapper.current.offsetHeight,this.camera&&(this.camera.aspect=this.sceneWidth/this.sceneHeight,this.camera.updateProjectionMatrix()),this.renderer&&(this.renderer.setSize(this.sceneWidth,this.sceneHeight),this.renderer.setPixelRatio(this.pixelRatio))}),Object(a.a)(this,"onScroll",()=>{const e=window.scrollY||window.pageYOffset,t=e>this.scrollPos?Nt.DOWN:Nt.UP;this.scrollPos=e,this.wrapperOffset=this.getWrapperOffset(),this.moveOnScroll(t)}),Object(a.a)(this,"moveOnScroll",e=>{if(!this.isStuck()||this.isAnimating)return!1;const t=e===Nt.UP&&this.currentSlide>0,i=e===Nt.DOWN&&this.currentSlide<this.totalSlides-1;return(t||i)&&(this.updateSlide(e),0===this.currentSlide?setTimeout(()=>this.scrollTo(_t),1200):this.currentSlide===this.totalSlides-1?setTimeout(()=>this.scrollTo(Lt),1200):this.resetScrollPosition()),!0}),Object(a.a)(this,"updateSlide",e=>{this.prevSlide=fe()(this.currentSlide,10),this.currentSlide=e===Nt.UP?this.currentSlide-1:this.currentSlide+1,this.spin(e)}),Object(a.a)(this,"scrollTo",e=>{if(!this.isStuck())return!1;const t=this.scrollPos+this.wrapperOffset,i=t+this.wrapperHeight-this.sceneHeight,s=e===_t?t:i;return this.scrollToPos(s),!0}),Object(a.a)(this,"resetScrollPosition",()=>{const e=this.scrollPos+this.wrapperOffset+this.wrapperHeight;this.removeScrollListener(),this.scrollToPos(e),this.addScrollListener()}),Object(a.a)(this,"scrollToPos",e=>window.scrollTo(0,e)),Object(a.a)(this,"isStuck",()=>(this.wrapperOffset=this.getWrapperOffset(),this.wrapperOffset<-this.sceneHeight/10&&this.wrapperOffset>-(this.wrapperHeight-this.sceneHeight))),Object(a.a)(this,"getWrapperOffset",()=>this.scrollWrapper.current?this.scrollWrapper.current.getBoundingClientRect().top:0),Object(a.a)(this,"getWave",(e,t)=>Math.sin(e/15+(t+e)/17)),Object(a.a)(this,"initialise",()=>{Ze()&&et()?this.setupAnimation():Ke(()=>tt(this.setupAnimation))}),Object(a.a)(this,"drawFrame",()=>{const{isInView:e}=this.props;e&&(this.renderLoop=window.requestAnimationFrame(this.drawFrame));const t=7*this.clock.getElapsedTime(),i=this.backgrounds[this.currentSlide],s=this.texts[this.currentSlide];let n,o,a,r,h,c;i.geometry.vertices.forEach((e,i)=>(n=this.getWave(i,t),o=this.bgVertices[i],(a=e).x=o.x+n,a.y=o.y+n,a.z=o.z+n,a)),i.geometry.verticesNeedUpdate=!0,s.geometry.vertices.forEach((e,i)=>(r=this.getWave(i,t),h=this.textVertices[i],(c=e).x=h.x+5*r,c.z=h.z-r,c)),s.geometry.verticesNeedUpdate=!0,this.renderer&&this.renderer.render(this.scene,this.camera)}),Object(a.a)(this,"getImagesByGalleryId",e=>{const{data:t}=this.props,i=t.get("item"),s=i&&i.toJS(),n=s&&s.filter(t=>t.entryName===e)[0];return n&&n.images.map(e=>e.defaultAssetUrl)}),Object(a.a)(this,"scrollWrapper",Object(r.createRef)()),Object(a.a)(this,"productContainer",Object(r.createRef)()),Object(a.a)(this,"sceneContainer",Object(r.createRef)()),Object(a.a)(this,"throttledOnMousemove",re()(this.move,200)),Object(a.a)(this,"throttledOnResize",re()(this.resize,50)),Object(a.a)(this,"throttledOnScroll",re()(this.onScroll,5))}componentDidMount(){const{isInView:e}=this.props;e&&this.initialise()}componentDidUpdate(e){const{isInView:t}=this.props;t&&!this.isSetup?this.initialise():t&&this.isSetup?this.restartAnimation():e.isInView&&!t&&this.stopAnimation()}componentWillUnmount(){this.destroyScene()}render(){const{slnId:e}=this.props;return zt("figure",{ref:this.scrollWrapper,className:"o-hero__bgImmersive -C2 -fadeInSlow","data-slnm-id":"".concat(e,"_immersiveC2")},zt("div",{className:"o-hero__scene"},zt("div",{ref:this.sceneContainer,className:"o-hero__backgrounds -staggerIn -stagger0"}),zt("div",{ref:this.productContainer,className:"o-hero__products -staggerIn -stagger2"})))}},HeroImmersiveD1:class extends r.PureComponent{constructor(){super(...arguments),Object(a.a)(this,"onToggleClick",()=>{this.isScrolling=!0,setTimeout(()=>{this.isScrolling=!1,this.drawFrame()},2e3)}),Object(a.a)(this,"getImagesByGalleryId",e=>{const{data:t}=this.props,i=t.get("item"),s=i&&i.toJS(),n=s&&s.filter(t=>t.entryName===e)[0];return n&&n.images.map(e=>e.defaultAssetUrl)}),Object(a.a)(this,"getSnowflakePosition",()=>2e3*Math.random()-1e3),Object(a.a)(this,"getRandomRange",(e,t)=>Math.random()*(t-e)+e),Object(a.a)(this,"setupAnimation",()=>{this.sceneSetup(),this.cameraSetup(),this.objectSetup(),this.createCanvas(),this.drawFrame(),this.animateLogo(),this.addListeners(),this.isSetup=!0}),Object(a.a)(this,"initialise",()=>{Ze()?this.setupAnimation():Ke(this.setupAnimation)}),Object(a.a)(this,"rotateX",(e,t)=>{const i=e,s=Math.cos(t*(Math.PI/180)),n=Math.sin(t*(Math.PI/180)),o=e.z,a=e.y;i.y=a*s+o*n,i.z=a*-n+o*s}),Object(a.a)(this,"rotateY",(e,t)=>{const i=e,s=Math.cos(t*(Math.PI/180)),n=Math.sin(t*(Math.PI/180)),o=e.z,a=e.x;i.x=a*s+o*n,i.z=a*-n+o*s}),Object(a.a)(this,"sceneSetup",()=>{this.scene=new window.THREE.Scene,this.renderer=new window.THREE.WebGLRenderer({alpha:!0}),this.renderer.setSize(this.sceneWidth,this.sceneHeight),this.renderer.setClearColor(0,0)}),Object(a.a)(this,"cameraSetup",()=>{this.camera=new window.THREE.PerspectiveCamera(75,this.sceneWidth/this.sceneHeight,1,1e4),this.camera.position.z=500}),Object(a.a)(this,"objectSetup",()=>{const e=this.snowflakeImages.map(e=>new window.THREE.SpriteMaterial({map:(new window.THREE.TextureLoader).load(e)}));let t,i;for(let s=0;s<1150;s+=1)t=e[Math.floor(Math.random()*e.length)],(i=new window.THREE.Sprite(t)).velocity=new window.THREE.Vector3(0,-4,0),this.rotateX(i.velocity,this.getRandomRange(-45,45)),this.rotateY(i.velocity,this.getRandomRange(0,360)),i.gravity=new window.THREE.Vector3(0,0,0),i.drag=1,i.position.x=this.getSnowflakePosition(),i.position.y=this.getSnowflakePosition(),i.position.z=this.getSnowflakePosition(),i.scale.x=18,i.scale.y=18,this.scene.add(i),this.particles.push(i)}),Object(a.a)(this,"createCanvas",()=>{this.sceneContainer.current&&(this.sceneContainer.current.innerHTML="",this.sceneContainer.current.appendChild(this.renderer.domElement))}),Object(a.a)(this,"animateLogo",()=>{this.wrapper.current&&this.wrapper.current.classList.add("-fadeInSlow"),this.logo.current&&this.logo.current.classList.add("-stroked")}),Object(a.a)(this,"updateMousePosition",e=>{const t=e.touches?e.touches[0].pageX:e.clientX;this.mouseX=t-this.windowHalfX}),Object(a.a)(this,"addListeners",()=>{document.addEventListener("mousemove",this.throttledOnMousemove,!1),document.addEventListener("touchmove",this.throttledOnMousemove,!1),window.addEventListener("resize",this.throttledOnResize,!1),this.resize()}),Object(a.a)(this,"removeListeners",()=>{document.removeEventListener("mousemove",this.throttledOnMousemove,!1),document.removeEventListener("touchmove",this.throttledOnMousemove,!1),window.removeEventListener("resize",this.throttledOnResize,!1)}),Object(a.a)(this,"destroyScene",()=>{this.stopAnimation(),this.sound&&(this.sound.setVolume(0),this.sound.stop()),this.particles&&this.particles.forEach(e=>{e.geometry.dispose(),e.material.dispose()}),this.renderer&&this.renderer.dispose(),this.scene&&(this.scene=null)}),Object(a.a)(this,"stopAnimation",()=>{this.removeListeners(),window.cancelAnimationFrame(this.renderLoop),this.renderer&&this.renderer.dispose&&this.renderer.dispose()}),Object(a.a)(this,"restartAnimation",()=>{this.drawFrame(),this.removeListeners(),this.addListeners()}),Object(a.a)(this,"updateScreenResolutionValues",()=>{if(this.wrapper.current){const e=this.wrapper.current.getBoundingClientRect();this.sceneWidth=e.width,this.sceneHeight=e.height}else this.sceneWidth=window.innerWidth,this.sceneHeight=window.innerHeight}),Object(a.a)(this,"resize",()=>{this.updateScreenResolutionValues(),this.camera&&(this.camera.aspect=this.sceneWidth/this.sceneHeight,this.camera.updateProjectionMatrix()),this.renderer&&this.renderer.setSize(this.sceneWidth,this.sceneHeight)}),Object(a.a)(this,"updateParticlePosition",()=>{const e=1e3,t=2e3;let i;this.particles.forEach(s=>{(i=s).velocity.multiplyScalar(i.drag),i.velocity.add(i.gravity),i.position.add(i.velocity),i.position.x>e?i.position.x-=t:i.position.x<-e&&(i.position.x+=t),i.position.y<-e&&(i.position.y+=t),i.position.z>e?i.position.z-=t:i.position.z<-e&&(i.position.z+=t)})}),Object(a.a)(this,"updateCameraPosition",()=>{this.camera&&(this.camera.position.x+=(this.mouseX-this.camera.position.x)*Ft,this.camera.lookAt(new window.THREE.Vector3(0,0,0)))}),Object(a.a)(this,"drawFrame",()=>{const{isInView:e}=this.props;e&&!this.isScrolling&&(this.renderLoop=window.requestAnimationFrame(this.drawFrame)),this.updateParticlePosition(),this.updateCameraPosition(),this.renderer&&this.renderer.render(this.scene,this.camera)}),Object(a.a)(this,"sceneContainer",Object(r.createRef)()),Object(a.a)(this,"wrapper",Object(r.createRef)()),Object(a.a)(this,"logo",Object(r.createRef)()),Object(a.a)(this,"throttledOnMousemove",re()(this.updateMousePosition,50)),Object(a.a)(this,"throttledOnResize",re()(this.resize,50))}componentDidMount(){this.updateScreenResolutionValues(),this.windowHalfX=this.sceneWidth/2,this.windowHalfY=this.sceneHeight/2,this.mouseX=0,this.mouseY=0,this.particles=[],this.snowflakeImages=this.getImagesByGalleryId("d1-snowflakes"),this.isScrolling=!1,Bt()(),this.initialise()}componentDidUpdate(e){const{isInView:t}=this.props;t&&this.isSetup?this.restartAnimation():e.isInView&&!t&&this.stopAnimation()}componentWillUnmount(){this.destroyScene()}render(){const{slnId:e,data:t}=this.props,i=this.getImagesByGalleryId("d1-backgrounds"),s=t&&t.get("item"),n=s&&s.toJS(),o=n&&n.filter(e=>"d1-title"===e.entryName),a=o&&o[0].title;return Wt("figure",{ref:this.wrapper,className:"o-hero__bgImmersive -D1","data-slnm-id":"".concat(e,"_immersiveD1")},i&&Wt("div",{className:"o-hero__snowScene"},Wt(lt.a,{src:i[0],className:"o-hero__snowBg"}),Wt(lt.a,{src:i[1],className:"o-hero__snowLight"}),Wt(lt.a,{src:i[2],className:"o-hero__snowLight2"}),Wt(lt.a,{src:i[3],className:"o-hero__cabinLight",transparent:!0})),Wt("div",{ref:this.logo,className:"o-hero__snowLogo"},Wt(ye.a,{icon:"snowLogo",invertColor:!0})),a&&Wt("figcaption",{className:"o-hero__bgCaption"},Wt("p",{className:"-fadeIn"},a||"THE STORY OF SHAPE")),Wt("div",{className:"o-hero__snowScene3D",ref:this.sceneContainer}))}},HeroImmersiveEdge1:ci,HeroImmersiveEdge2:wi,HeroImmersiveHarmony1:class extends r.PureComponent{constructor(e){super(e),Object(a.a)(this,"onToggleclick",()=>{this.isScrolling=!0,setTimeout(()=>{this.isScrolling=!1,this.drawFrame()},2e3)}),Object(a.a)(this,"setupAnimation",()=>{this.sceneSetup(),this.cameraSetup(),this.objectSetup(),this.lightSetup(),this.effectSetup(),this.createCanvas(),this.drawFrame(),this.addListeners(),this.isSetup=!0}),Object(a.a)(this,"initialise",()=>{$e()?this.setupAnimation():Ke(()=>Je(this.setupAnimation,[Ge.g]))}),Object(a.a)(this,"sceneSetup",()=>{this.sceneWidth=window.innerWidth,this.sceneHeight=window.innerHeight,this.isPortrait=this.sceneHeight>this.sceneWidth,this.scene=new window.THREE.Scene,this.renderer=new window.THREE.WebGLRenderer,this.renderer.setSize(this.sceneWidth,this.sceneHeight),this.renderer.setClearColor(16777215),this.renderer.autoClear=!1,this.renderer.setPixelRatio(window.devicePixelRatio),this.screenSpacePosition=new window.THREE.Vector3,this.sunPosition=new window.THREE.Vector3(0,500,-500),this.materialDepth=new window.THREE.MeshDepthMaterial,window.mythreejs=this}),Object(a.a)(this,"cameraSetup",()=>{this.camera=new window.THREE.PerspectiveCamera(70,this.sceneWidth/this.sceneHeight,1,3e3),this.camera.position.z=200}),Object(a.a)(this,"objectSetup",()=>{(new window.THREE.FontLoader).load(Ge.h,e=>{let t;this.isFontLoaded=!0;const i=new window.THREE.MeshBasicMaterial({color:26265,transparent:!0,opacity:0,side:window.THREE.DoubleSide}),s=e.generateShapes("A  S T O R Y",10),n=new window.THREE.ShapeBufferGeometry(s);n.computeBoundingBox(),t=-.5*(n.boundingBox.max.x-n.boundingBox.min.x),n.translate(2*t,0,0),this.text=new window.THREE.Mesh(n,i);const o=e.generateShapes("O F  M A G I C",10),a=new window.THREE.ShapeBufferGeometry(o);a.computeBoundingBox(),t=-.5*(a.boundingBox.max.x-a.boundingBox.min.x),a.translate(t,0,0),this.text2=new window.THREE.Mesh(a,i),this.resizeText()}),this.branches=[],this.rotationBoxes=[];for(let e=0;e<21;e++){const t=new window.THREE.PlaneGeometry(1,100,1,100),i=new window.THREE.MeshBasicMaterial({color:16777215,side:window.THREE.DoubleSide});this.branches[e]=new window.THREE.Mesh(t,i),this.rotationBoxes[e]=new window.THREE.Object3D,this.scene.add(this.rotationBoxes[e]),this.rotationBoxes[e].add(this.branches[e]),this.containingBox=(new window.THREE.Box3).setFromObject(this.rotationBoxes[e]);const s=this.containingBox.getSize(new window.THREE.Vector3);this.branches[e].position.y+=s.y/2,this.rotationBoxes[e].rotation.z=e*(Math.PI/20)-Math.PI/2,this.rotationBoxes[e].position.set(0,-15,0)}}),Object(a.a)(this,"resizeText",()=>{if(this.sceneWidth<720)this.scene.remove(this.text),this.scene.remove(this.text2);else{const e=(new window.THREE.Box3).setFromObject(this.text).getSize(new window.THREE.Vector3);this.text.position.set(e.x/2-Math.max(this.sceneWidth/25,75),0,1),this.scene.add(this.text),this.text2.position.set(Math.max(this.sceneWidth/25,75),0,1),this.scene.add(this.text2)}}),Object(a.a)(this,"lightSetup",()=>{this.spotLight=new window.THREE.DirectionalLight(16777215),this.spotLight.position.set(-20,25,-40),this.spotLight.intensity=1.8,this.scene.add(this.spotLight)}),Object(a.a)(this,"effectSetup",()=>{const{postProcessing:e,sceneHeight:t,sceneWidth:i}=this;e.scene=new window.THREE.Scene,e.camera=new window.THREE.OrthographicCamera(-.5,.5,.5,-.5,-1e4,1e4),e.camera.position.z=100,e.scene.add(e.camera);const s={minFilter:window.THREE.LinearFilter,magFilter:window.THREE.LinearFilter,format:window.THREE.RGBFormat};e.rtTextureColors=new window.THREE.WebGLRenderTarget(i,t,s),e.rtTextureDepth=new window.THREE.WebGLRenderTarget(i,t,s),e.rtTextureDepthMask=new window.THREE.WebGLRenderTarget(i,t,s);const n=window.innerWidth*this.godrayRenderTargetResolutionMultiplier,o=window.innerHeight*this.godrayRenderTargetResolutionMultiplier;e.rtTextureGodRays1=new window.THREE.WebGLRenderTarget(n,o,s),e.rtTextureGodRays2=new window.THREE.WebGLRenderTarget(n,o,s);const a=window.THREE.GodRaysDepthMaskShader;e.godrayMaskUniforms=window.THREE.UniformsUtils.clone(a.uniforms),e.materialGodraysDepthMask=new window.THREE.ShaderMaterial({uniforms:e.godrayMaskUniforms,vertexShader:a.vertexShader,fragmentShader:a.fragmentShader});const r=window.THREE.GodRaysGenerateShader;e.godrayGenUniforms=window.THREE.UniformsUtils.clone(r.uniforms),e.materialGodraysGenerate=new window.THREE.ShaderMaterial({uniforms:e.godrayGenUniforms,vertexShader:r.vertexShader,fragmentShader:r.fragmentShader});const h=window.THREE.GodRaysCombineShader;e.godrayCombineUniforms=window.THREE.UniformsUtils.clone(h.uniforms),e.materialGodraysCombine=new window.THREE.ShaderMaterial({uniforms:e.godrayCombineUniforms,vertexShader:h.vertexShader,fragmentShader:h.fragmentShader});const c=window.THREE.GodRaysFakeSunShader;e.godraysFakeSunUniforms=window.THREE.UniformsUtils.clone(c.uniforms),e.materialGodraysFakeSun=new window.THREE.ShaderMaterial({uniforms:e.godraysFakeSunUniforms,vertexShader:c.vertexShader,fragmentShader:c.fragmentShader}),e.godraysFakeSunUniforms.bgColor.value.setHex(this.bgColor),e.godraysFakeSunUniforms.sunColor.value.setHex(this.sunColor),e.godrayCombineUniforms.fGodRayIntensity.value=i>720?.82:.75,e.quad=new window.THREE.Mesh(new window.THREE.PlaneBufferGeometry(1,1),e.materialGodraysGenerate),e.quad.position.z=-9900,e.scene.add(e.quad)}),Object(a.a)(this,"resize",()=>{this.sceneWidth=window.innerWidth,this.sceneHeight=window.innerHeight,this.camera.aspect=this.sceneWidth/this.sceneHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(this.sceneWidth,this.sceneHeight),this.renderer.setPixelRatio(window.devicePixelRatio),this.postProcessing.rtTextureColors.setSize(this.sceneWidth,this.sceneHeight),this.postProcessing.rtTextureDepth.setSize(this.sceneWidth,this.sceneHeight),this.postProcessing.rtTextureDepthMask.setSize(this.sceneWidth,this.sceneHeight);const e=this.sceneWidth*this.godrayRenderTargetResolutionMultiplier,t=this.sceneHeight*this.godrayRenderTargetResolutionMultiplier;this.postProcessing.rtTextureGodRays1.setSize(e,t),this.postProcessing.rtTextureGodRays2.setSize(e,t),this.isFontLoaded&&this.resizeText()}),Object(a.a)(this,"addListeners",()=>{this.audioToggle=document.getElementById("audio-toggle"),this.audioToggle&&!this.audioEnabled&&this.audioToggle.addEventListener("click",this.onToggleclick,!1),window.addEventListener("mousemove",this.throttledOnMouse),window.addEventListener("touchmove",this.throttledOnTouch),window.addEventListener("resize",this.throttledOnResize,!1),window.addEventListener("orientationchange",this.throttledOnResize,!1),this.resize()}),Object(a.a)(this,"removeListeners",()=>{window.removeEventListener("mousemove",this.respondToMouse),window.removeEventListener("touchmove",this.respondToMouse),window.removeEventListener("resize",this.throttledOnResize,!1),window.removeEventListener("orientationchange",this.throttledOnResize,!1)}),Object(a.a)(this,"destroyScene",()=>{this.stopAudio(),this.stopAnimation(),this.removeListeners(),this.scene&&this.scene.dispose(),this.audioToggle&&this.audioToggle.removeEventListener("click",this.onToggleclick,!1)}),Object(a.a)(this,"stopAnimation",()=>{window.cancelAnimationFrame(this.renderLoop),this.text&&this.text.dispose&&this.text.dispose(),this.renderer&&this.renderer.dispose&&this.renderer.dispose()}),Object(a.a)(this,"stopAudio",()=>{this.sound&&(this.sound.setVolume(0),this.sound.stop())}),Object(a.a)(this,"restartAnimation",()=>{this.drawFrame(),this.removeListeners(),this.addListeners()}),Object(a.a)(this,"createCanvas",()=>{this.sceneContainer&&this.sceneContainer.current.appendChild(this.renderer.domElement)}),Object(a.a)(this,"respondToMouse",e=>{this.mouseX=e.clientX-window.innerWidth/2,this.mouseY=e.clientY-window.innerHeight/2}),Object(a.a)(this,"respondToTouch",e=>{e.touches[0]&&"undefined"!==typeof e.touches[0].clientX&&this.respondToMouse(e.touches[0])}),Object(a.a)(this,"getStepSize",(e,t,i)=>e*t**-i),Object(a.a)(this,"filterGodRays",(e,t,i)=>{this.postProcessing.scene.overrideMaterial=this.postProcessing.materialGodraysGenerate,this.postProcessing.godrayGenUniforms.fStepSize.value=i,this.postProcessing.godrayGenUniforms.tInput.value=e,this.renderer.setRenderTarget(t),this.renderer.render(this.postProcessing.scene,this.postProcessing.camera),this.postProcessing.scene.overrideMaterial=null}),Object(a.a)(this,"drawFrame",()=>{const{isInView:e}=this.props,{sunPosition:t,postProcessing:i,screenSpacePosition:s,renderer:n,camera:o,scene:a,sceneWidth:r,sceneHeight:h}=this;e&&!this.isScrolling&&(this.renderLoop=window.requestAnimationFrame(this.drawFrame));const c=r>720?.1:.5,d=r>720?[50,700]:[50,400];if(t.x+=this.mouseX*c-t.x-d[0],t.y+=this.mouseY*c*o.aspect-t.y+d[1],i.enabled){s.copy(t).project(o),s.x=(s.x+1)/2,s.y=(s.y+1)/2,i.godrayGenUniforms.vSunPositionScreenSpace.value.x=s.x,i.godrayGenUniforms.vSunPositionScreenSpace.value.y=s.y,i.godraysFakeSunUniforms.vSunPositionScreenSpace.value.x=s.x,i.godraysFakeSunUniforms.vSunPositionScreenSpace.value.y=s.y,n.setRenderTarget(i.rtTextureColors),n.clear(!0,!0,!1);const e=.74*h,c=.74*r;s.x*=window.innerWidth,s.y*=window.innerHeight,n.setScissor(s.x-c/2,s.y-e/2,c,e),n.setScissorTest(!0),i.godraysFakeSunUniforms.fAspect.value=o.aspect,i.scene.overrideMaterial=i.materialGodraysFakeSun,n.setRenderTarget(i.rtTextureColors),n.render(i.scene,i.camera),n.setScissorTest(!1),a.overrideMaterial=null,n.setRenderTarget(i.rtTextureColors),n.render(a,o),a.overrideMaterial=this.materialDepth,n.setRenderTarget(i.rtTextureDepth),n.clear(),n.render(a,o),i.godrayMaskUniforms.tInput.value=i.rtTextureDepth.texture,i.scene.overrideMaterial=i.materialGodraysDepthMask,n.setRenderTarget(i.rtTextureDepthMask),n.render(i.scene,i.camera);const d=1,l=6;this.filterGodRays(i.rtTextureDepthMask.texture,i.rtTextureGodRays2,this.getStepSize(d,l,1)),this.filterGodRays(i.rtTextureGodRays2.texture,i.rtTextureGodRays1,this.getStepSize(d,l,2)),this.filterGodRays(i.rtTextureGodRays1.texture,i.rtTextureGodRays2,this.getStepSize(d,l,3)),i.godrayCombineUniforms.tColors.value=i.rtTextureColors.texture,i.godrayCombineUniforms.tGodRays.value=i.rtTextureGodRays2.texture,i.scene.overrideMaterial=i.materialGodraysCombine,n.setRenderTarget(null),n.render(i.scene,i.camera),i.scene.overrideMaterial=null}else n.setRenderTarget(null),n.clear(),n.render(a,o)}),Object(a.a)(this,"sceneContainer",Object(r.createRef)()),Object(a.a)(this,"throttledOnResize",re()(this.resize,50)),Object(a.a)(this,"throttledOnMouse",re()(this.respondToMouse,50)),Object(a.a)(this,"throttledOnTouch",re()(this.respondToTouch,50)),this.step=0,this.stepAmount=.2,this.audioEnabled=!1,this.isSetup=!1,this.isScrolling=!1,this.postProcessing={enabled:!0},this.godrayRenderTargetResolutionMultiplier=.25,this.bgColor=2105376,this.sunColor=16772676,this.text=null,this.text2=null,this.isFontLoaded=!1,this.mouseX=window.innerWidth/2,this.mouseY=window.innerHeight/2,window.debugXX=this}componentDidMount(){this.initialise()}componentDidUpdate(e){const{isInView:t}=this.props;t&&this.isSetup?this.restartAnimation():e.isInView&&!t&&this.stopAnimation()}componentWillUnmount(){this.destroyScene()}render(){const{slnId:e}=this.props;return fi("div",{className:"-immersiveHarmony1"},fi("figure",{ref:this.sceneContainer,className:"o-hero__bgImmersive -A1 -fadeInSlow","data-slnm-id":"".concat(e,"_immersiveA1")}),fi("div",{id:"shadow-background"},fi("div",{className:"gradient"})),fi("div",{id:"visible-title"},fi("h2",null,"A story"),fi("h2",null,"of magic")))}},HeroImmersiveHarmony2:Oi}),Object(a.a)(Ti,"defaultProps",{toggleHeader(){},toggleFooterAria(){},toggleSupportingNav(){}}),Ti.displayName="ImmersivePage";const Ri=Object(B.a)(Ti);var ji=Object(k.a)(Ri,de),Pi=i("NnZy"),Ci=i("YUPe"),Ai=i("O6RK"),ki=Object(I.b)([".text-image-fiftyFifty__container{margin-top:",";margin-bottom:",";@media ","{margin-top:",";margin-bottom:",";}}.app-store-button{margin-top:",";display:flex;align-items:center;justify-content:center;@media ","{display:block;}& > div.m-appStoreButtons{padding-bottom:0;}@media ","{margin-top:0;& > div.m-appStoreButtons{padding-bottom:",";}}}.text-image-background__container{margin-bottom:",";.m-textAndImage > div{padding-top:0;}@media ","{.m-textAndImage > div{padding-top:",";}margin-bottom:",";}}"],Object(M.c)(10),Object(M.c)(50),e=>e.theme.mediaQuery.medium,Object(M.c)(20),Object(M.c)(40),Object(M.c)(50),e=>e.theme.mediaQuery.small,e=>e.theme.mediaQuery.medium,Object(M.c)(30),Object(M.c)(145),e=>e.theme.mediaQuery.medium,e=>Object(M.c)(e.theme.padding.paddingMedium),Object(M.c)(60)),Ii=h.a.createElement;class Mi extends r.Component{constructor(){super(...arguments),Object(a.a)(this,"getPageTitleData",e=>{const t=e.getIn(["storyHeader","item",0])||Object(c.Map)(),i=e.get("storyHeader")||Object(c.Map)(),s=e.get("tags")||Object(c.Map)(),n=t.getIn(["mediaItem","media"])||Object(c.Map)();return Object(c.fromJS)({title:t.get("title"),subtitle:t.get("subtitle"),soundCloudUrl:n.get("defaultAssetUrl"),tags:s,backgroundColor:i.get("backgroundColor"),backgroundImage:i.get("backgroundImage"),theme:i.get("colorTheme"),textColor:i.get("textColor")})}),Object(a.a)(this,"analyticsPageLoad",e=>{const{data:t,cartData:i,userInfo:s,currencyCode:n}=e,o=Object($.b)({userInfo:s,pageType:ee.ne,cartData:i,pageName:ee.rd,story_title:t.get("slug"),currencyCode:n});Object($.a)(o)})}componentDidMount(){setTimeout(()=>this.analyticsPageLoad(this.props))}render(){const{data:e=Object(c.Map)(),className:t,socialShareOnClick:i,appStoreLabel:s,locale:n}=this.props,o=e.get("storyItem"),a=o?o.getIn(["podcastAudio","item",0,"media"]):Object(c.Map)(),r="storyDetail_podcast",h=a&&a.get("defaultAssetUrl"),d=a&&a.get("hasPlaylist"),l=this.getPageTitleData(e),m=l.get("backgroundImage"),p={color:l.get("textColor")},u=m?J:U,g=o&&o.getIn(["textAndImageLeftVariant","item",0]),w=o&&o.get("appStoreLinks"),f=o&&o.getIn(["socialShare","item",0]),v=o&&o.get("textAndImageSixteenNine");return Ii("div",{className:t},l&&Ii(u,{data:l,slnId:r,inlineStyle:p}),g&&Ii("div",{className:"text-image-fiftyFifty__container"},Ii(Pi.a,{data:g,slnId:r,variant:"fiftyFifty",locale:n})),Ii(_.a,{disablePadding:!0},Ii("div",{className:"col-xs-12 col-sm-8 col-sm-offset-2 col-md-6 col-md-offset-3"},Ii(L.a,{url:h,hasPlaylist:d,slnId:r}))),Ii("div",{className:"col-xs-12 col-sm-8 col-sm-offset-2 col-md-6 col-md-offset-3"},Ii("div",{className:"app-store-button"},Ii(Ci.a,{appStoreLinks:w,slnId:r,appStoreLabel:s})),Ii(Ai.a,{data:f,slnId:r,socialShareOnClick:i,locale:n})),v&&Ii("div",{className:"text-image-background__container"},Ii(Pi.a,{data:v,variant:"background",slnId:r,locale:n})))}}Mi.displayName="PodcastPage";const Hi=Object(B.a)(Mi);var Ni=Object(k.a)(Hi,ki),_i=i("Gw6M"),Li=i("2fe0"),zi=h.a.createElement;class Di extends r.Component{constructor(){super(...arguments),Object(a.a)(this,"state",{showHeader:!0,showFooter:!1}),Object(a.a)(this,"getPageTitle",()=>{const{data:e}=this.props,t=e.get("storyHeader"),i=t&&t.getIn(["item","0"]);return{tags:e.get("tags"),theme:t&&t.get("colorTheme"),backgroundColor:t&&t.get("backgroundColor"),title:i&&i.get("title"),subtitle:i&&i.get("subtitle"),description:i&&i.get("description"),descriptionRichText:i&&i.get("descriptionRichText")}}),Object(a.a)(this,"toggleHeader",e=>{this.setState({showHeader:"undefined"===typeof e?!this.state.showHeader:e})}),Object(a.a)(this,"toggleFooterAria",e=>{this.setState({showFooter:"undefined"===typeof e?this.state.showFooter:e})}),Object(a.a)(this,"socialShareOnClick",(e,t,i)=>{const{data:s}=this.props;Object($.k)({eventName:ee.ae,section:ee.ne,subSection:"".concat(ee.ae,":").concat(s.get("slug")),selection:t,event:e,url:i,target:"_blank"})}),Object(a.a)(this,"storyDetailRender",e=>{const{data:t,userInfo:i,cartData:s,appStoreLabel:n,currencyCode:a,locale:r,viewportInfo:h}=this.props,c={data:t,pageTitle:this.getPageTitle(),locale:r,toggleHeader:this.toggleHeader};switch(e){case p:return zi(oe,Object(o.a)({},c,{cartData:s,userInfo:i,currencyCode:a,socialShareOnClick:this.socialShareOnClick,locale:r,viewportInfo:h}));case g:return zi(Ni,Object(o.a)({},c,{userInfo:i,cartData:s,appStoreLabel:n,currencyCode:a,socialShareOnClick:this.socialShareOnClick}));case u:return zi(ji,Object(o.a)({},c,{userInfo:i,cartData:s,currencyCode:a,socialShareOnClick:this.socialShareOnClick,toggleFooterAria:this.toggleFooterAria}));default:return null}}),Object(a.a)(this,"renderSeoTags",()=>{const{data:e,router:t}=this.props,i=e.get("storySeo");if(i){const e=i&&i.toJS(),{schemas:a=[]}=e,r=Object(n.a)(e,["schemas"]),h=encodeURI("".concat(y.m).concat(t.asPath)),c=Object(s.a)({},r,{url:h,site_name:h,canonical:h.toLowerCase()}),d=[Object(s.a)({},a[0],{url:h}),Object(s.a)({},a[1],{url:h})];return zi(Li.a,Object(o.a)({},c,{schemas:d}))}return null})}shouldComponentUpdate(e,t){return!l()(e,this.props)||!l()(t,this.state)}render(){const{data:e,locale:t}=this.props,{showHeader:i,showFooter:s}=this.state,n=e.get("storyType"),o=e.getIn(["story","hero","cardType"]),a=e.get("notAvailableInCountryContent"),r=n===u,h=n===p,d=o&&o.indexOf("heroImmersive")>-1,l=e.get("newsletter"),m=[];l&&m.push(Object(c.Map)(l));const g=Object(c.List)(m);return zi(E.a,{hasParallax:!0,showHeader:i,showSupportingNav:!1,hasTransparentHeader:r||d||h,hasPromoBanner:!1,hasCountryNotification:!1,showFooterAria:!s},this.renderSeoTags(),this.storyDetailRender(n),l&&zi(j.a,{items:g}),!n&&a&&zi(_i.a,{locale:t,errorInfo:a}))}}Di.displayName="StoryDetailPage";var Bi=Object(O.a)(Di,{mapStateToProps:e=>({data:e.getIn(["storyDetailPage","data"]),cartData:e.getIn(["global","cart","cartData"]),userInfo:e.getIn(["global","userData","userInfo"]),appStoreLabel:e.getIn(["global","cmsData","Global","appStoreLabel"]),currencyCode:e.getIn(["global","globalData","siteSettings","country","currency","code"]),locale:e.getIn(["global","globalData","userlanguage"]),viewportInfo:e.getIn(["global","globalData","viewportInfo"])}),key:"storyDetailPage",reducer:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(c.fromJS)({}),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_STORY_DETAIL_SUCCESS":return((e,t)=>e.set("data",Object(c.fromJS)(t.data)))(e,t);case"SET_NARRATION_STATE":return((e,t)=>e.set("audioStatus",t.data))(e,t);default:return e}},saga:function*(){try{yield Object(w.f)(m,S)}catch(e){yield Object(w.c)(Object(x.f)(e))}},useQuery:!0,initialActions:b,criticalState:[["storyDetailPage","data"],["global","header","categories"]]});i.d(t,"default",function(){return Bi})}},[["8HGU",2,1,0,3,4,5,6,8,7,9,10,12,11,13,14]]]); 