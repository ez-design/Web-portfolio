(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([["PinBetterSaveCommon",264,"PinRepEditButtonCommon"],{"+c4W":function(e,t,n){var i=n("711d"),o=n("4/ic"),r=n("9ggG"),a=n("9Nap");e.exports=function(e){return r(e)?i(a(e)):o(e)}},"+lzj":function(e,t,n){n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return c})),n.d(t,"a",(function(){return d})),n.d(t,"e",(function(){return l})),n.d(t,"d",(function(){return h})),n.d(t,"f",(function(){return p}));var i=n("fyR6"),o=n("vzKb");const r={cumulativeLayoutShiftScore:0,firstInputDelay:null,longTaskDurations:[],largestContentfulPaint:null,elementTimings:[]},a=()=>{r.longTaskDurations=[]},s=Object(i.a)(()=>r.elementTimings),c=()=>s.get(),d=e=>{e&&s.save(),r.elementTimings=[]},l=()=>r;let u=0;const h=()=>u,p=()=>{Object(o.a)({type:"element",buffered:!0},e=>{r.elementTimings=r.elementTimings.concat(e.getEntries().reduce((e,{identifier:t,loadTime:n,renderTime:i})=>e.concat("string"==typeof t&&"number"==typeof n&&"number"==typeof i?[{identifier:t,loadTime:n,renderTime:i}]:[]),[]))}),Object(o.a)({entryTypes:["longtask"]},e=>{e.getEntries().map(e=>r.longTaskDurations.push(e.duration))},()=>a()),Object(o.a)({type:"first-input",buffered:!0},(e,t)=>{const n=e.getEntries()[0];n&&n.startTime&&n.processingStart&&(r.firstInputDelay={startTime:n.startTime,endTime:n.processingStart}),t.disconnect()},()=>{r.firstInputDelay=null}),Object(o.a)({type:"largest-contentful-paint",buffered:!0},e=>{const t=e.getEntries(),n=t.length,i=t[n-1];i&&(u=n,r.largestContentfulPaint=i.renderTime||i.loadTime||null)}),Object(o.a)({type:"layout-shift",buffered:!0},e=>{e.getEntries().forEach(e=>{e.hadRecentInput||(r.cumulativeLayoutShiftScore+=e.value)})})}},"/WHw":function(e,t,n){n.d(t,"a",(function(){return f}));var i=n("q1tI"),o=n("/MKj"),r=n("JW66"),a=n("Ye/N"),s=n("5FNA"),c=n("Wer7"),d=n("vvax"),l=n("ANjH"),u=n("oN2T"),h=n("c50B"),p=n("nKUr");function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(e){var t,n;return n=t=class extends i.Component{constructor(...e){super(...e),b(this,"state",{createBoardError:null,inputName:this.props.prefilledName||"",nameValidators:[Object(h.o)({message:a.a._("Don't forget to name your board!")}),Object(h.j)({max:r.a.MAX_CHARS_FOR_BOARD_TITLE,maxErrorString:Object(d.b)(a.a._("Please enter no more than {{ maxLength }} characters.","Validation error when a user input is too long","Validation error when a user input is too long"),{maxLength:r.a.MAX_CHARS_FOR_BOARD_TITLE}).join("")})],nameValidatorErrors:[],privacy:this.props.isAdAccountOwner?r.a.BoardPrivacy.PUBLIC:r.a.BoardPrivacy.PROTECTED,saving:!1}),b(this,"invalidateResource",e=>{const{dispatch:t,viewer:n}=this.props;t(Object(c.f)("BoardsResource",Object(s.a)(n.isAuth?n.username:"",e===r.a.BoardPrivacy.SECRET)))}),b(this,"createBoard",e=>{const{dispatch:t,viewer:n}=this.props;return t(Object(u.g)(e,{isFBC:n.isAuth&&0===n.boardCount}))}),b(this,"handleChangeName",(e,t)=>{const n=Object(h.r)(this.state.nameValidators,e);this.setState({inputName:e,nameValidatorErrors:n,createBoardError:null},()=>{t&&this.handleCreate()})}),b(this,"handleChangePrivacy",()=>{const e=this.state.privacy===r.a.BoardPrivacy.SECRET?r.a.BoardPrivacy.PUBLIC:r.a.BoardPrivacy.SECRET;this.setState({privacy:e})}),b(this,"handleCreate",()=>{const{inputName:e,privacy:t}=this.state,{isAdAccountOwner:n,onCreate:i,advertiser_id:o}=this.props,r={privacy:t,name:e,...!n&&o?{advertiser_id:o}:{}};this.setState({saving:!0,createBoardError:null}),this.createBoard(r).then(e=>{this.setState({saving:!1}),i(e)}).catch(e=>{let t=a.a._("Uh oh! Something went wrong.");if("string"==typeof e)t=e;else if(e.message){const{message:n,message_detail:i}=e;t=i?`${n} ${i}`:n}this.setState({saving:!1,createBoardError:t})}),this.invalidateResource(t)})}render(){return Object(p.jsx)(e,{onBoardCreate:this.handleCreate,onChangeBoardName:this.handleChangeName,onChangeBoardPrivacy:this.handleChangePrivacy,...this.props,...this.state})}},b(t,"displayName",`WithBoardCreatePane(${e.displayName||e.name})`),n}function g({advertiser:e,viewer:t}){const n=!e||t.isAuth&&e.owner_user_id===t.id,i=e&&e.id;return{isAdAccountOwner:n,...i?{advertiser_id:i}:{},viewer:t}}function j(e){return{dispatch:e}}function f(e){return Object(l.compose)(Object(o.connect)(g,j),m)(e)}},"0zyx":function(e,t,n){n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return a}));var i=n("mVx/"),o=n.n(i);const r=({pathname:e})=>/^\/pin\/[\w-]+\/?$/.test(e),a=e=>{const t=o()(e,e=>!r(e));return t&&(({pathname:e})=>/^\/search\/pins\//.test(e))(t)?(({pathname:e,search:t})=>{const n=/^\/search\/pins\/(\?.*)$/.exec(e),i=(t||n&&n[1]||"").substr(1).split("&").map(e=>e.split("=")).find(e=>"q"===e[0]);return i?decodeURIComponent(i[1]):""})(t):""}},"1LK5":function(e,t){e.exports=function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}},"1vym":function(e,t,n){},"3R0Q":function(e,t,n){t.a=e=>{let t={};e.forEach(({label:e,timestamp:n})=>{t={...t,[e]:(t[e]||[]).concat([n])}});let n=Object.freeze({});return Object.keys(t).forEach(e=>{(t[e]||[]).forEach((t,i)=>{const o=i?`${e}_${i+1}`:e;n={...n,[o]:t}})}),n}},"4/ic":function(e,t,n){var i=n("ZWtO");e.exports=function(e){return function(t){return i(t,e)}}},"5uyJ":function(e,t,n){n.d(t,"a",(function(){return i}));const i={V_HLSV4:"V_HLSV4",V_720P:"V_720P"}},"6A0I":function(e,t,n){var i=n("q1tI"),o=n("/MKj"),r=n("JW66"),a=n("Sihc"),s=n("Ye/N"),c=n("GBVV"),d=n("n6mq"),l=n("nKUr");function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class h extends i.Component{constructor(e){super(e),u(this,"onCreateSection",()=>{const{board:e,dispatch:t,completeCreateSectionAction:n,pinImport:i}=this.props;return this.setState({isSaving:!0}),t(Object(a.a)({boardId:e.id,name:this.state.inputName.trim(),pinImport:i})).then(e=>{this.setState({isSaving:!1}),n(e)}).catch(e=>{this.setState({createError:e.message_detail||e.message,isSaving:!1})})}),u(this,"handleKeyDown",({event:e,value:t})=>{const{createError:n,inputName:i}=this.state;[r.a.KeyCode.ENTER,r.a.KeyCode.NUMPAD_ENTER].includes(e.which)&&!n&&i.trim()&&this.onCreateSection()}),u(this,"handleChangeName",({value:e})=>{this.setState({createError:null,inputName:e})}),u(this,"handleInputRef",e=>{this.setState({inputRef:e})}),this.state={createError:null,inputName:e.initialName||"",inputRef:null,isSaving:!1}}componentDidUpdate(e,t){const{createError:n,inputRef:i}=this.state;!i||t.inputRef&&!n||i.focus()}render(){const{showTitle:e,positionRelative:t}=this.props,{createError:n,inputName:i,isSaving:o}=this.state,r=!!i.trim()&&!n;return Object(l.jsxs)(d.e,{display:"flex",direction:"column",color:"white",flex:"grow",top:!0,bottom:!0,right:!0,position:t?"relative":"absolute",rounding:2,width:"100%",dangerouslySetInlineStyle:{__style:{borderLeft:"1px solid #f5f5f5"}},children:[e&&Object(l.jsx)(d.e,{marginTop:3,paddingX:6,paddingY:3,children:Object(l.jsx)(d.t,{size:"sm",children:s.a._("Add section","Title in the add section modal","Title in the add section modal")})}),Object(l.jsxs)(d.e,{padding:4,children:[Object(l.jsx)(d.e,{marginBottom:2,children:Object(l.jsx)(d.x,{htmlFor:"sectionEditName",children:Object(l.jsx)(d.Y,{size:"md",color:n?"red":"gray",children:s.a._("Name","Board section name","Board section name")})})}),Object(l.jsx)(d.e,{children:Object(l.jsx)(d.e,{ref:this.handleInputRef,children:Object(l.jsx)(d.ab,{errorMessage:n||"",id:"sectionEditName",name:"sectionName",onChange:this.handleChangeName,onKeyDown:this.handleKeyDown,placeholder:s.a._('Like "Lighting"',"Placeholder for board section name","Placeholder for board section name"),size:"lg",type:"text",value:i})})})]}),Object(l.jsx)(d.e,{display:"flex",flex:"grow"}),Object(l.jsx)(d.e,{padding:4,children:Object(l.jsx)(d.e,{display:"flex",justifyContent:"end",children:Object(l.jsx)(c.b,{disabled:!r||o,onClick:this.onCreateSection,submitting:o,text:s.a._("Add","add a new section","add a new section")})})})]})}}t.a=Object(o.connect)()(h)},"6G9P":function(e,t,n){n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return d}));var i=n("q1tI"),o=(n("JW66"),n("yaUg")),r=n("Ye/N"),a=n("n6mq"),s=n("nKUr");const c=(e,t)=>{if(!t)return e;const n=new RegExp(/http(s?):/);if(!n.test(e)){const i=n.exec(t);if(i&&i.length){e=i[0]+e}}return e},d=(e,t)=>t?Object(o.a)(r.a._("Saved to {{sectionName}} in {{boardName}}","Toast for successfully saving to a section within a board","Toast for successfully saving to a section within a board"),{sectionName:t.title,boardName:null!=e?e:""}):Object(s.jsxs)(i.Fragment,{children:[Object(s.jsx)(a.Y,{children:r.a._("Saved to")}),Object(s.jsx)(a.Y,{weight:"bold",children:e})]})},"711d":function(e,t){e.exports=function(e){return function(t){return null==t?void 0:t[e]}}},"7vSn":function(e,t,n){},"82UD":function(e,t,n){n.d(t,"a",(function(){return O}));var i=n("q1tI"),o=n("/MKj"),r=n("T+9/"),a=n("ajUs"),s=n("ou9u"),c=n("hFNL"),d=n("qD10"),l=n("yKES"),u=n("5uyJ"),h=n("n6mq"),p=n("nKUr");const b={overlay:{__style:{backgroundColor:"#000"}}};function m(e){var t;const{pin:{id:n,images:o,title:r,videos:a,video_status_message:s}}=e,c=s||{},m=o&&o["236x"],g=a&&(null===(t=a.video_list)||void 0===t?void 0:t[u.a.V_HLSV4]),{duration:j}=g||{};return Object(p.jsx)(i.Fragment,{children:Object(p.jsx)(h.i,{children:Object(p.jsxs)(d.a,{to:"/pin/"+n,children:[Object(p.jsxs)(h.e,{overflow:"hidden",position:"relative",rounding:2,children:[m&&Object(p.jsx)(h.w,{alt:r||"",color:"lightGray",naturalHeight:m.height,naturalWidth:m.width,src:m.url}),!!j&&Object(p.jsx)(h.e,{padding:2,position:"absolute",bottom:!0,left:!0,display:"flex",children:Object(p.jsx)(l.a,{duration:j})}),Object(p.jsx)(h.e,{position:"absolute",top:!0,bottom:!0,left:!0,right:!0,opacity:.4,dangerouslySetInlineStyle:b.overlay}),Object(p.jsxs)(h.e,{position:"absolute",top:!0,left:!0,padding:5,width:"100%",children:[Object(p.jsx)(h.t,{color:"white",overflow:"normal",size:"sm",children:c.title}),Object(p.jsx)(h.e,{marginTop:4,children:Object(p.jsx)(h.Y,{color:"white",size:"md",overflow:"normal",children:c.subtitle})})]})]}),Object(p.jsx)(h.e,{display:"flex",alignItems:"start",justifyContent:"between",marginTop:1,paddingX:1,children:Object(p.jsx)(h.e,{flex:"grow",children:r&&Object(p.jsx)(h.e,{paddingY:1,children:Object(p.jsx)(h.Y,{inline:!0,size:"md",weight:"bold",children:r})})})})]})})})}var g=n("Y8Sn"),j=n("EC67"),f=n("vpxy"),v=n("0nTG");function O({trackingParameters:e,pin:t,pinId:n,...d}){var l;const u=Object(j.i)(),h=Object(o.useSelector)(({pins:e})=>e[n])||t,b=Object(a.a)(h,u),O=Object(s.a)(h),x=!!(O&&O.url&&O.height&&O.width)||void 0,y=O&&h.videos?h.videos.id:void 0,[S,w]=Object(i.useState)(!1),_=Object(i.useCallback)(()=>w(!0),[]),C=Object(i.useCallback)(()=>w(!1),[]),{componentType:T,contextLogData:I,impressionAuxFields:B,slotIndex:P,viewData:R,viewParameter:k,viewType:E}=e;return Object(p.jsx)(r.a,{componentType:T,contextLogData:{..."undefined"!=typeof window?{pwa_type:Object(c.b)(window)}:{},...I,...Object(v.f)(h,I)},impressionAuxFields:{...B||{},isNativeVideoAndWatchable:x,videoIdStr:y,clientTrackingParams:b||(h.tracking_params||"")+"-0",imageURL:h.images&&(null===(l=h.images["236x"])||void 0===l?void 0:l.url),richTypes:Object(v.e)(h)},impressionType:"Pin",isPaused:!S,loggingId:h.id,slotIndex:P,viewData:R,viewParameter:k,viewType:E,children:Object(g.h)(h)?Object(p.jsx)(m,{pin:h}):Object(p.jsx)(f.a,{...d,debugImpressionState:S?"started":"paused",onError:C,onLoad:_,pin:h,pinId:n,trackingParameters:{componentType:T,contextLogData:I,slotIndex:P,viewParameter:k,viewType:E}})})}},"8Mj5":function(e,t,n){n.d(t,"a",(function(){return f}));var i=n("n6mq"),o=n("nKUr");function r({children:e}){return Object(o.jsx)(i.e,{dangerouslySetInlineStyle:{__style:{boxShadow:"0 0 0 1px #fff"}},rounding:"circle",children:e})}var a=n("Ye/N");function s({onClick:e,overlap:t,size:n}){return Object(o.jsx)(i.e,{marginStart:t,children:Object(o.jsx)(r,{children:Object(o.jsx)(i.v,{accessibilityLabel:a.a._("Add","facePile.addButton","Accessibility label for button to add a collaborator"),bgColor:"lightGray",icon:"add",iconColor:"darkGray",onClick:e,size:n})})})}function c({style:e}){return Object(o.jsx)(i.e,{bottom:!0,dangerouslySetInlineStyle:{__style:e||{}},left:!0,position:"absolute",right:!0,rounding:"pill",top:!0})}function d({children:e,hovered:t}){return Object(o.jsxs)(i.e,{position:"relative",children:[Object(o.jsx)(c,{style:t?{zIndex:1,backgroundColor:"rgba(0,0,0,0.06)"}:null}),e]})}function l({addButtonRef:e,hovered:t,overlap:n}){return Object(o.jsx)(i.e,{dangerouslySetInlineStyle:{__style:{zIndex:1}},children:Object(o.jsx)(i.e,{marginStart:n,children:Object(o.jsx)(d,{hovered:t,children:Object(o.jsx)(r,{children:Object(o.jsx)(i.e,{alignItems:"center",color:"lightGray",display:"flex",height:48,justifyContent:"center",ref:e,rounding:"circle",width:48,children:Object(o.jsx)(i.u,{accessibilityLabel:a.a._("Add","ui.Facepile","Accessibility label on icon"),icon:"add",color:"darkGray",size:20})})})})})},"addIcon")}var u=n("XRfM"),h=n("pLLR");const p={xs:24,sm:32,md:40,lg:48,xl:56};function b({count:e,size:t,showLargeNumbers:n}){const a=p[t],{locale:s}=Object(h.d)();return Object(o.jsx)(r,{children:Object(o.jsx)(i.e,{alignItems:"center",color:"lightGray",display:"flex",height:a,justifyContent:"center",position:"relative",rounding:"circle",width:a,children:Object(o.jsx)(i.Y,{size:"lg",weight:"bold",children:e>99&&!n?"99+":Object(u.g)(s,e,{shortform:!0})})})})}var m=n("7pfs"),g=n("FDmi");function j({isDim:e,name:t,size:n,src:r}){const a=p[n];return Object(o.jsx)(i.e,{color:"white",height:a,width:a,rounding:"circle",children:Object(o.jsx)(i.e,{dangerouslySetInlineStyle:{__style:{opacity:e?.5:1}},children:Object(o.jsx)(g.a,{name:t,outline:!0,src:r})})})}function f({addButtonRef:e,additionalCount:t,faces:n,faceSize:r,onAddClick:a,onClick:c,oneClickTargetFacepile:u,overlap:h,pileRef:p,showAddButton:g,showLargeNumbers:f}){const v=({apply:e,children:t})=>Object(o.jsx)(i.e,{marginStart:e?h:void 0,children:t});return Object(o.jsx)(m.a,{children:({hovered:m,onMouseEnter:O,onMouseLeave:x})=>{const y=n.map(({isDim:e,key:t,name:n,src:i},a)=>Object(o.jsx)(v,{apply:0!==a,children:Object(o.jsx)(d,{hovered:m&&!!c,children:Object(o.jsx)(j,{isDim:e,name:n,size:r,src:i},null!=t?t:n)})},"face-"+a));t&&y.push(Object(o.jsx)(i.e,{dangerouslySetInlineStyle:{__style:{zIndex:1}},children:Object(o.jsx)(v,{apply:!0,children:Object(o.jsx)(d,{hovered:m&&!!c,children:Object(o.jsx)(b,{count:t,size:r,showLargeNumbers:f})})})},"additionalCount")),u&&g&&y.push(Object(o.jsx)(l,{addButtonRef:e,hovered:m&&!!c,overlap:h}));const S=c?Object(o.jsx)(i.X,{ref:p,onTap:c,rounding:"pill",children:Object(o.jsx)(i.e,{alignItems:"center",display:"flex",children:y})}):y;return Object(o.jsxs)(i.e,{alignItems:"center",display:"flex",onMouseEnter:O,onMouseLeave:x,children:[S,!u&&g&&a&&Object(o.jsx)(i.e,{dangerouslySetInlineStyle:{__style:{zIndex:2}},ref:e,children:Object(o.jsx)(s,{onClick:a,overlap:h,size:r})})]})}})}},"B/lV":function(e,t,n){const i=e=>{const t=e.replace(new RegExp("^"+(window.location.origin||"")),""),n=document&&document.querySelector(`head > script[src='${t}']`);return!!n&&n.hasAttribute("defer")},o=e=>["pinimg","pinterest","pinterdev"].every(t=>!e.includes(t+".com/"));t.a=(e,t)=>{const n=(({name:e,initiatorType:t})=>{switch(t){case"xmlhttprequest":return"xmlhttprequest";case"img":return"image";case"video":return"video";default:{const t=e.split("."),n=(t.length>1&&t.pop()||"").toLowerCase();return["js","mjs"].includes(n)?"script":"css"===n?"css":["mp4","m4v","mov"].includes(n)?"video":["bmp","gif","jpg","jpeg","png","tiff","webp","svg"].includes(n)?"image":"other"}}})(e),{name:r}=e;return{category:n,isDeferred:"script"===n&&i(r),isExternal:o(r),isVisuallyCompleteRequired:"image"===n&&t.includes(r),timing:e}}},B6Tf:function(e,t,n){n.d(t,"a",(function(){return be})),n.d(t,"b",(function(){return me}));var i=n("q1tI"),o=n("b/K5"),r=n("/MKj"),a=n("JW66"),s=n("Ye/N"),c=n("GBVV"),d=n("/WHw"),l=n("pLLR"),u=n("fZbY"),h=n("oRM1"),p=n("FDmi"),b=n("yaUg"),m=n("n6mq"),g=n("nKUr");function j(e){const{body:t,img:n,onClick:i,selected:o,title:r,username:a,valid:c}=e,d=a||t;return Object(g.jsx)(m.e,{marginBottom:4,children:Object(g.jsx)(m.X,{onTap:i,children:Object(g.jsxs)(m.e,{alignItems:"center",direction:"row",display:"flex",width:"100%",children:[n,Object(g.jsxs)(m.e,{flex:"grow",marginEnd:2,marginStart:3,children:[Object(g.jsx)(m.e,{marginBottom:1,children:Object(g.jsx)(m.Y,{truncate:!0,weight:"bold",children:r})}),Object(g.jsx)(m.Y,{size:"sm",truncate:!0,children:d})]}),Object(g.jsx)(m.e,{marginStart:2,children:(l=o,u=c,a?l?Object(g.jsx)(m.u,{accessibilityLabel:s.a._("Confirmation an invite will be sent","Alt tags on a check box on the board create flow for board invites","Alt tags on a check box on the board create flow for board invites"),color:"red",icon:"check-circle",size:32}):Object(g.jsx)(m.e,{dangerouslySetInlineStyle:{__style:{border:"solid 1px #B5B5B5"}},height:32,rounding:"circle",width:32}):Object(g.jsx)(m.f,{color:"gray",disabled:!!l||Boolean(!u),inline:!0,size:"sm",text:l?s.a._("Sent","Sent a board collaborator invite","Sent a board collaborator invite"):s.a._("Invite","Add board collaborator invite","Add board collaborator invite")}))})]})})});var l,u}var f=n("ZE2w"),v=n("w70y");function O(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function x(e,t,n){const{id:i}=e;return t===n.findIndex(e=>e.id===i)}class y extends i.Component{constructor(...e){super(...e),O(this,"state",{selectedCollaborators:this.props.preselectedCollaborators||[],typeaheadSuggestions:[],value:""}),O(this,"isIdSelected",{}),O(this,"handleTextFieldChange",({value:e})=>{this.setState({value:e})}),O(this,"handleCollaboratorClick",e=>{const{id:t,type:n}=e;this.isIdSelected[t]=!this.isIdSelected[t];const{selectedCollaborators:i}=this.state,o=i.concat([e]),r="email"===n?f.c:f.d;this.props.onSelectedCollaboratorsChange({id:t,resource:r}),this.setState({selectedCollaborators:o})}),O(this,"handleTypeaheadSuggestionsChange",e=>{this.setState({typeaheadSuggestions:e})})}componentDidMount(){this.props.preselectedCollaborators&&this.props.preselectedCollaborators.map(e=>{const{id:t,type:n}=e;this.isIdSelected[t]=!this.isIdSelected[t];const i="email"===n?f.c:f.d;return this.props.onSelectedCollaboratorsChange({id:t,resource:i}),null})}render(){const{value:e}=this.state,{shareSuggestionsResource:{data:t}}=this.props,n=t||[],i=(""===e?this.state.selectedCollaborators.concat(n).filter(x):this.state.selectedCollaborators.concat(this.state.typeaheadSuggestions).concat({type:"email",id:e,valid:Object(u.a)(e)}).concat(n).filter(x)).map(e=>function(e,t,n){if("user_share_suggestion"===e.type||"user"===e.type){const i=Object(g.jsx)(p.a,{name:e.title||e.full_name,size:"sm",src:e.image_medium_url||e.image_large_url});return Object(g.jsx)(j,{img:i,onClick:()=>n(e),selected:t,title:e.full_name,username:e.username})}if("email"===e.type){const{id:i,valid:o}=e,r=Object(g.jsx)(m.e,{alignItems:"center",color:"lightGray",display:"flex",height:40,justifyContent:"center",rounding:"circle",width:40,children:Object(g.jsx)(m.u,{accessibilityLabel:s.a._("Email icon","Email icon on board create modal","Email icon on board create modal"),color:"darkGray",icon:"envelope",size:20})}),a=Object(b.a)(s.a._("Email {{ email }}"),{email:i});let c,d;return t?(c=s.a._("Done!","Text that lets the user know we sent the board invite email","Text that lets the user know we sent the board invite email"),d=()=>{}):(c=o?s.a._("Click to send!","Text that lets the user know they can successfully send a board invite email","Text that lets the user know they can successfully send a board invite email"):s.a._("Keep typing!","Text that lets a user know the email they are typing is not valid yet","Text that lets a user know the email they are typing is not valid yet"),d=()=>o?n(e):void 0),Object(g.jsx)(j,{body:c,img:r,onClick:d,selected:t,title:a,valid:o})}}(e,this.isIdSelected[e.id],this.handleCollaboratorClick)).map((e,t)=>Object(g.jsx)("li",{children:e},t));return Object(g.jsxs)(m.e,{direction:"column",display:"flex",height:"100%",children:[Object(g.jsx)(m.e,{paddingX:3,paddingY:2,children:Object(g.jsx)(m.Y,{size:"sm",children:s.a._("Add collaborators (optional)","Optional field to add collaborators to a board on board create","Optional field to add collaborators to a board on board create")})}),Object(g.jsx)(m.e,{marginBottom:4,marginTop:2,paddingX:3,width:"100%",children:Object(g.jsx)(m.e,{flex:"grow",children:Object(g.jsx)(h.a,{onTypeaheadSuggestionsChange:this.handleTypeaheadSuggestionsChange,resourceName:"ShareSuggestionsTypeaheadResource",value:e,children:Object(g.jsx)(m.N,{accessibilityLabel:s.a._("Search for collaborators by name or email"),id:"CollaboratorInviteSearchField",onChange:this.handleTextFieldChange,placeholder:s.a._("Search by name or email"),size:"lg",value:e})})})}),Object(g.jsx)(m.e,{overflow:"scrollY",paddingX:3,children:Object(g.jsx)("ul",{children:i})})]})}}var S=Object(v.b)({name:"ShareSuggestionsResource",key:"shareSuggestionsResource",allowStale:!1})(y);var w=Object(d.a)((function({createBoardError:e,inputName:t,nameValidatorErrors:n,onBoardCreate:o,onCancel:r,onChangeBoardName:d,onChangeBoardPrivacy:u,onInvite:h,privacy:p,preselectedCollaborators:b,saving:j,showTitle:f,isAdAccountOwner:v}){const{isRTL:O}=Object(l.d)(),x=0===n.length,y=p===a.a.BoardPrivacy.SECRET;return Object(g.jsx)(m.e,{color:"white",height:"100%",left:!0,position:"absolute",top:!0,width:"100%",children:Object(g.jsx)("form",{onSubmit:e=>{e.preventDefault(),o()},style:{height:"100%"},children:Object(g.jsxs)(m.e,{direction:"column",display:"flex",height:"100%",children:[f&&Object(g.jsx)(m.e,{display:"flex",marginTop:3,paddingX:6,paddingY:3,children:Object(g.jsx)(m.t,{size:"sm",children:s.a._("Create board")})}),Object(g.jsxs)(m.e,{padding:3,children:[Object(g.jsx)(m.e,{marginBottom:2,children:Object(g.jsx)(m.x,{htmlFor:"boardEditName",children:Object(g.jsx)(m.Y,{size:"sm",children:s.a._("Name")})})}),Object(g.jsx)(m.e,{children:Object(g.jsx)(m.ab,{errorMessage:n.join(", "),id:"boardEditName",name:"boardName",onChange:({value:e})=>d(e),placeholder:s.a._('Like "Places to Go" or "Recipes to Make"'),size:"lg",value:t})})]}),v&&Object(g.jsxs)(i.Fragment,{children:[Object(g.jsxs)(m.e,{padding:3,children:[Object(g.jsx)(m.e,{marginBottom:2,children:Object(g.jsx)(m.x,{htmlFor:"secret",children:Object(g.jsx)(m.Y,{size:"sm",children:s.a._("Secret","secret board","secret board")})})}),Object(g.jsx)(m.e,{children:Object(g.jsx)(m.T,{id:"secret",onChange:u,switched:y})})]}),Object(g.jsx)(m.e,{display:"flex",flex:"grow",overflow:"hidden",children:Object(g.jsx)(m.e,{width:"100%",children:Object(g.jsx)(S,{onSelectedCollaboratorsChange:h,preselectedCollaborators:b})})})]}),!v&&Object(g.jsx)(i.Fragment,{children:Object(g.jsxs)(m.e,{padding:3,children:[Object(g.jsx)(m.e,{marginBottom:2,children:Object(g.jsx)(m.x,{htmlFor:"protected",children:Object(g.jsx)(m.Y,{size:"sm",children:s.a._("Protected board (not listed on user's profile)","protected board","protected board")})})}),Object(g.jsx)(m.e,{children:Object(g.jsx)(m.T,{disabled:!0,id:"protected",onChange:()=>{},switched:!0})})]})}),Object(g.jsxs)(m.e,{bottom:!0,color:"white",dangerouslySetInlineStyle:{__style:{boxShadow:"0px 0px 8px rgba(0, 0, 0, 0.1)",borderBottomLeftRadius:"32px",borderBottomRightRadius:"32px"}},display:"flex",justifyContent:"between",left:O,paddingX:4,paddingY:2,position:"absolute",right:!O,width:720,children:[Object(g.jsx)(m.f,{inline:!0,onClick:r,text:s.a._("Cancel","cancel board create","cancel board create")}),Object(g.jsxs)(m.e,{display:"flex",justifyContent:"end",children:[!!e&&Object(g.jsx)(m.e,{paddingX:2,children:Object(g.jsx)(m.Y,{align:"center",color:"red",size:"md",weight:"bold",children:e})}),Object(g.jsx)(c.b,{disabled:!t.trim()||!x||!!e||j,submitting:j,text:s.a._("Create","create a new board","create a new board")})]})]})]})})})})),_=n("6A0I"),C=n("qyR9"),T=n("0BOE");class I extends i.Component{constructor(...e){var t,n,i;super(...e),i=e=>{const{board:t,sectionsResource:{data:n}}=this.props;return e.length>=2?[{items:Object(T.a)([t],e),customProps:{inSectionSelection:!0}},{items:Object(T.a)(n,e,"title")}]:[{items:[t],customProps:{inSectionSelection:!0}},{items:n}]},(n="getSections")in(t=this)?Object.defineProperty(t,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[n]=i}render(){const{sectionsResource:{error:e,isLoaded:t},boardSavedTo:n,isSelectMode:i,onSectionCreate:o,onSectionSelected:r,pinId:a}=this.props;return Object(g.jsx)(C.a,{isSelectMode:i,boardSavedTo:n,createButtonLabel:s.a._("Add section","Button for creating a board section","Button for creating a board section"),hasLoadError:!!e,isLoaded:t,getSections:this.getSections,onCreate:o,onSelected:r,pinId:a})}}var B=Object(v.b)({name:"BoardSectionsRepinResource",key:"sectionsResource",options:e=>({board_id:e.board.id})})(I),P=n("Wer7"),R=n("U4JR"),k=n("ANjH");function E(e,t,n){return{...e?{pin_id:e}:{},...t?{username:t}:{},...n?{advertiser_id:n,filter:"protected"}:{},field_set_key:"board_picker",limit:undefined,shortlist_suggestions:2}}class A extends i.Component{constructor(...e){var t,n,i;super(...e),i=e=>{const{boardResource:{data:t}}=this.props;if(!t)return[];const{all_boards:n,boards_shortlist:i}=t,o=(e=>{const t=[],n=[];return e.forEach(e=>{var i;null!==(i=e.name)&&void 0!==i&&i.match(/^\d/)?n.push(e):t.push(e)}),[...t,...n]})(n);return o.length<=3?[{items:o}]:e.length>=2?[{items:Object(T.a)(o,e)}]:[i.length?{items:i,title:s.a._("Top choices")}:{items:[]},{items:o,title:s.a._("All boards","title for board picker all boards section","title for board picker all boards section")}]},(n="getSections")in(t=this)?Object.defineProperty(t,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[n]=i}render(){const{boardResource:{data:e,error:t,isLoaded:n},boardSavedTo:i,isSelectMode:o,onBoardCreate:r,onBoardSelected:a,pinId:s}=this.props,c=n&&!!e&&e.all_boards.length<=3;return Object(g.jsx)(C.a,{isSelectMode:o,boardSavedTo:i,hasLoadError:!!t,hasLowBoardCount:c,isLoaded:n,getSections:this.getSections,onCreate:r,onSelected:a,pinId:s})}}var L=Object(k.compose)(Object(r.connect)((function(e){const{advertiser:t,viewer:n}=e;return n.isAuth&&t&&t.owner_user_id!==n.id?{advertiser_id:t.id,username:t.owner_user_id}:{}})),Object(v.b)({name:"BoardPickerBoardsResource",key:"boardResource",options:e=>E(e.pinId,e.username,e.advertiser_id)}))(A);function D(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class M extends i.Component{constructor(...e){super(...e),D(this,"state",{inviteQueue:{},newName:"",selectedSectionBoard:this.props.boardWithSection||null,showCreate:this.props.showCreate||!1}),D(this,"close",()=>{const{selectedSectionBoard:e,showCreate:t}=this.state,{onClose:n}=this.props;t&&e?this.setState({showCreate:!1},this.manageModalTitle):e?this.setState({selectedSectionBoard:null},this.manageModalTitle):n()}),D(this,"sendInvites",e=>{const{inviteQueue:t}=this.state;Object.keys(t).forEach(n=>{t[n].resource(e.id,[n])})}),D(this,"handleInvite",e=>{const{inviteQueue:t}=this.state;if(t[e.id]){const n={...t};delete n[e.id],this.setState({inviteQueue:n})}else{const n=Object.assign({},t,{[e.id]:e});this.setState({inviteQueue:n})}}),D(this,"handleBoardCreate",e=>{const{onBoardCreated:t}=this.props;this.handleBoardSave(e,!0),t&&t(e)}),D(this,"handleBoardSave",(e,t)=>{const{selectedSectionBoard:n}=this.state,{onBoardSave:i,invalidatePinBetterSaveResource:o,invalidateResource:r}=this.props;if(r(),o(),n&&"board_section"===e.type){return i(n,e,t)}const a=e,{section_count:s=0}=a;!n&&"number"==typeof s&&s>0?this.setState({selectedSectionBoard:a},this.manageModalTitle):(this.sendInvites(e),i(a,void 0,t))}),D(this,"handleCreate",e=>t=>{t=t||"",this.setState({newName:t,showCreate:!0},this.manageModalTitle);const n=e?13105:13025,i=e?10306:249;Object(R.b)(101,{component:n,element:i})}),D(this,"manageModalTitle",()=>{const{setModalTitle:e}=this.props,{selectedSectionBoard:t,showCreate:n}=this.state;e&&e(n&&t?s.a._("Add section","Repin title for making a board section","Repin title for making a board section"):n&&!t?s.a._("Create board","Repin title for making a new board","Repin title for making a new board"):t&&!n?s.a._("Choose section","Repin title for choosing a board section","Repin title for choosing a board section"):s.a._("Choose board","Repin title for choosing a board","Repin title for choosing a board"))})}render(){const{boardSavedTo:e,isRepin:t,isSelectMode:n,onToggleFlyout:i,pinId:o,preselectedCollaborators:r,setModalTitle:a,suggestedBoardTitle:s}=this.props,{newName:c,selectedSectionBoard:d,showCreate:l}=this.state,u=!!d,h=!a;return Object(g.jsxs)(m.e,{display:"flex",position:"relative",width:"100%",children:[!l&&Object(g.jsx)(m.e,{direction:"column",display:"flex",marginTop:4,width:"100%",children:d?Object(g.jsx)(B,{board:d,boardSavedTo:e,isSelectMode:n,onSectionCreate:this.handleCreate(u),onSectionSelected:this.handleBoardSave}):Object(g.jsx)(L,{boardSavedTo:e,isSelectMode:n,onBoardCreate:this.handleCreate(u),onBoardSelected:this.handleBoardSave,pinId:o})}),l&&!d&&Object(g.jsx)(w,{onCancel:this.close,onCreate:this.handleBoardCreate,onInvite:this.handleInvite,onToggleFlyout:i,pinId:o,prefilledName:c||s,preselectedCollaborators:r,showTitle:h}),l&&d&&Object(g.jsx)(_.a,{board:d,completeCreateSectionAction:this.handleBoardSave,initialName:c,isRepin:t,onClearModal:this.close,showTitle:h})]})}}var N=Object(r.connect)(null,(function(e,t){return{invalidateResource:()=>{e(Object(P.f)("BoardPickerBoardsResource",E(t.pinId)))},invalidatePinBetterSaveResource:()=>{e(Object(P.f)("BoardPickerBoardsResource",{field_set_key:"board_picker"}))}}}))(M),F=n("TgLd"),H=n("v+PR"),U=n("1inl"),z=n("K316"),q=n("TvzZ");const Y="publish_actions",W={checkFbTimelinePermission:function(e){Object(q.default)((function(t){t.api("/me/permissions",t=>{const n=t.data;let i=!1;if(n){i=!!n.find(e=>e.permission===Y&&"granted"===e.status)}i?e.success&&e.success():e.error&&e.error()})}),z.a)},fbConnectedAccountMatchesLoggedInAccount:function(e,t){if(!t)return!0;const n=e.getAuthResponse();return!n||t===n.userID},maybeRequestFbTimelinePermission:function(e,t){Object(q.default)(n=>{if(!W.fbConnectedAccountMatchesLoggedInAccount(n,t))return U.a.showError(s.a._("Oops! Your account is linked to a different Facebook account than the one you're logged into now.")),e.error&&e.error(),void(e.complete&&e.complete());W.checkFbTimelinePermission({success(){e.success&&e.success(),e.complete&&e.complete()},error(){W.fbLogin(e)}})},z.a)},fbLogin:function(e){Object(q.default)(t=>{t.login(t=>{t.authResponse?W.checkFbTimelinePermission(e):e.error&&e.error(),e.complete&&e.complete()},{scope:Y})},z.a)}};var G=W,K=n("G35+"),V=n("mBfy");var $=Object(k.compose)(Object(r.connect)(({viewer:e})=>({viewer:e}),()=>({})),Object(v.b)({name:"UserResource",key:"userSocialResource",options:e=>({user_id:e.viewer&&e.viewer.isAuth?e.viewer.id:"",field_set_key:"social_connect"})}))((function({onSocialConnect:e,userSocialResource:{data:t,isLoaded:n}}){const[o,r]=Object(i.useState)(!!(n&&t&&t.facebook_publish_stream_enabled)),[a,c]=Object(i.useState)(!!(n&&t&&t.twitter_publish_enabled));if(Object(i.useEffect)(()=>{n&&t&&(r(!!t.facebook_publish_stream_enabled),c(!!t.twitter_publish_enabled))},[t,n]),!t)return null;const{connected_to_facebook:d,twitter_url:l}=t,u=t=>{r(t),V.default.set("facebook_publish_stream_enabled",t),e(K.a.FACEBOOK,t)};return!(!d&&!l)&&Object(g.jsxs)(m.e,{display:"flex",padding:2,children:[d&&Object(g.jsxs)(m.e,{display:"flex",alignItems:"center",marginStart:2,children:[Object(g.jsx)(m.j,{checked:o,id:"share_facebook",onChange:()=>{o?u(!1):G.maybeRequestFbTimelinePermission({success:()=>u(!0),error:()=>u(!1)})},size:"sm"}),Object(g.jsx)(m.x,{htmlFor:"share_facebook",children:Object(g.jsx)(m.e,{marginStart:2,children:Object(g.jsx)(m.Y,{children:s.a._("Post to Facebook")})})})]}),l&&Object(g.jsxs)(m.e,{display:"flex",alignItems:"center",marginStart:5,children:[Object(g.jsx)(m.j,{checked:a,id:"share_twitter",onChange:()=>{const t=!a;c(t),e(K.a.TWITTER,t)},size:"sm"}),Object(g.jsx)(m.x,{htmlFor:"share_twitter",children:Object(g.jsx)(m.e,{marginStart:2,children:Object(g.jsx)(m.Y,{children:s.a._("Post to Twitter")})})})]})]})})),X=n("Sihc");var Q=({board:e,completeCreateSectionAction:t,height:n,onClose:o,pinImport:a,url:c,width:d})=>{const l=Object(r.useDispatch)(),[u,h]=Object(i.useState)(""),[p,b]=Object(i.useState)(!1),[j,f]=Object(i.useState)(null);return Object(g.jsx)(F.b,{accessibilityModalLabel:s.a._("Repin modal","save.pinToBoard.modal.label","Accessibility label on modal"),heading:Object(g.jsx)(m.e,{padding:8,children:Object(g.jsx)(m.r,{alignItems:"center",children:Object(g.jsx)(m.e,{width:"66%",marginStart:"auto",children:Object(g.jsxs)(m.r,{justifyContent:"between",children:[Object(g.jsx)(m.t,{size:"md",children:s.a._("Add section","sectionCreateModal.title","Title in the add section modal")}),Object(g.jsx)(m.v,{icon:"cancel",accessibilityLabel:s.a._("Close","sectionCreateModal.closeButton","close section create modal button"),size:"md",iconColor:"darkGray",onClick:o})]})})})}),footer:Object(g.jsx)(m.r,{children:Object(g.jsx)(m.e,{marginStart:"auto",children:Object(g.jsx)(m.f,{text:s.a._("Add","sectionCreateModal.add.button","add a new section"),color:"red",onClick:()=>{e&&(b(!0),l(Object(X.a)({boardId:e.id,name:u.trim(),pinImport:a})).then(n=>{t(e,n,!1)}).catch(e=>{f(e.message||e.message_detail)}).finally(()=>{b(!1)}))},disabled:p||!u.trim()||!!j,size:"lg"})})}),onDismiss:o,size:"sm",children:Object(g.jsx)(m.e,{padding:8,children:Object(g.jsxs)(m.r,{children:[Object(g.jsx)(m.B,{rounding:4,height:n,width:d,children:Object(g.jsx)(m.w,{alt:"",fit:"cover",src:c||"",naturalHeight:n,naturalWidth:d})}),Object(g.jsx)(m.e,{marginStart:8,dangerouslySetInlineStyle:{__style:{width:`calc(100% - ${d}px)`}},children:Object(g.jsx)(m.ab,{id:"sectionEditName",onChange:e=>{h(e.value)},placeholder:s.a._('Like "Lighting"',"sectionCreateModal.boardSection.name","Placeholder for board section name"),label:s.a._("Name","section.create.label","label text for section input"),size:"lg",type:"text",value:u})})]})})})};function Z(){return Object(g.jsxs)(m.e,{alignItems:"center",direction:"column",display:"flex",justifyContent:"center",children:[Object(g.jsx)(m.R,{accessibilityLabel:s.a._("Pins being saved to new sections","save.pin-to-board.PinToBoard.SectionSuggestions.SavingView","accessibility label on spinner"),show:!0}),Object(g.jsx)(m.e,{paddingY:2,children:Object(g.jsx)(m.t,{children:s.a._("Hold, please...","save.pin-to-board.PinToBoard.SectionSuggestions.SavingView","Heading on modal while saving pins")})}),Object(g.jsx)(m.Y,{children:s.a._("We're grouping the ideas you picked into sections. This will help organize all your ideas!","save.pin-to-board.PinToBoard.SectionSuggestions.SavingView","Text explaining new pins are being saved")})]})}var J=n("82UD");function ee({index:e,pin:t,sectionName:n}){const o=t.id,r=Object(i.useContext)(ce),[a,s]=Object(i.useState)(!1),c=Object(i.useCallback)(({event:e})=>{e.preventDefault(),e.stopPropagation(),r({type:a?"unselect":"select",payload:{sectionName:n,pinId:o}}),s(!a)},[o,a]);return Object(g.jsx)(m.X,{onTap:c,rounding:4,children:Object(g.jsx)(J.a,{attributionOption:"hide",blockClickEvents:!0,pin:t,pinId:t.id,pinImageCrop:"none",saveButtonOptions:{type:"none"},selectionState:a?"selected-image-only":"deselected-image-only",surface:"SectionSuggestedPins",trackingParameters:{slotIndex:e}})})}var te=Object(i.memo)((function({sectionSuggestion:e,showSpinner:t}){const n=Object(i.useRef)(),o=Object(v.a)({name:"BatchP2PResource",options:{clientType:"84",page_size:10,pinIds:e.pins.map(e=>e.id)},allowStale:!1});return Object(g.jsxs)(i.Fragment,{children:[Object(g.jsx)(m.e,{display:"flex",justifyContent:"center",width:"100%",children:Object(g.jsx)(m.R,{accessibilityLabel:s.a._("Loading pins","save.pin-to-board.PinToBoard.SectionSuggestions.SectionPinsSelection","Accessibility label on a loading spinner"),show:t&&o.isFetching})}),o.data&&Object(g.jsx)(m.e,{paddingY:4,paddingX:8,children:Object(g.jsx)(m.t,{align:"left",size:"sm",children:e.name})}),Object(g.jsx)(m.e,{ref:n,children:o.data&&n&&n.current&&Object(g.jsx)(m.C,{columnWidth:152,comp:({data:t,itemIdx:n})=>Object(g.jsx)(ee,{index:n,pin:t,sectionName:e.name}),gutterWidth:16,items:o.data||[],loadItems:()=>{},scrollContainer:()=>n.current})})]})}),(e,t)=>e.sectionSuggestion.id===t.sectionSuggestion.id);function ne({canSubmit:e,handleClose:t,handleSubmit:n,sectionSuggestions:o}){Object(i.useEffect)(()=>{const e=[];o.forEach(t=>e.push(t.name)),Object(R.b)(13,{suggested_section_names_viewed:e,view:1,viewParameter:3461})},[o]);return Object(g.jsx)(i.Fragment,{children:Object(g.jsxs)(m.e,{width:"100%",children:[Object(g.jsx)(m.e,{minHeight:"100%",marginBottom:12,width:"100%",children:o.map((e,t)=>Object(g.jsx)(m.e,{marginBottom:4,children:Object(g.jsx)(te,{sectionSuggestion:e,showSpinner:0===t})},e.name))}),Object(g.jsx)(m.e,{bottom:!0,color:"white",dangerouslySetInlineStyle:{__style:{boxShadow:"0px 0px 8px rgba(0, 0, 0, 0.1)",position:"sticky"}},display:"flex",justifyContent:"end",padding:4,width:720,children:Object(g.jsx)(m.f,{color:e?"red":"gray",inline:!0,size:"lg",text:e?s.a._("Next","save.pin-to-board.PinToBoard.SectionPinsWrapper","Button to submit form selections"):s.a._("Skip","save.pin-to-board.PinToBoard.SectionPinsWrapper","Button to submit form selections"),onClick:()=>{e?n():t()}})})]})})}function ie({handleClose:e,handleSubmit:t,suggestions:n}){const[o,r]=Object(i.useState)({}),a=!!Object.keys(o).length;return Object(g.jsxs)(m.e,{children:[Object(g.jsx)(m.e,{display:"flex",alignItems:"center",dangerouslySetInlineStyle:{__style:{height:"calc(100% - 88px)"}},children:Object(g.jsx)(m.e,{display:"flex",wrap:!0,height:360,paddingX:6,children:n.map(e=>Object(g.jsx)(m.e,{paddingX:1,height:160,children:Object(g.jsx)(m.X,{onTap:()=>{const t={...o};t[e.name]?delete t[e.name]:t[e.name]=e,r(t)},rounding:6,children:Object(g.jsx)(m.e,{rounding:7,dangerouslySetInlineStyle:{__style:{border:o[e.name]?"2px solid #111":"2px solid white",padding:"2px"}},children:Object(g.jsxs)(m.e,{height:160,width:152,position:"relative",rounding:6,children:[Object(g.jsx)(m.B,{rounding:6,height:160,width:152,children:Object(g.jsx)(m.w,{alt:e.name,fit:"cover",naturalHeight:e.images["236x"].height,naturalWidth:e.images["236x"].width,src:e.images["236x"].url})}),Object(g.jsx)(m.e,{alignItems:"center",dangerouslySetInlineStyle:{__style:{background:"rgba(0, 0, 0, 0.3)"}},display:"flex",height:160,justifyContent:"center",left:!0,paddingX:5,position:"absolute",rounding:6,top:!0,width:152,children:Object(g.jsx)(m.t,{align:"center",color:"white",size:"sm",children:e.name})})]})})})},e.name))})}),Object(g.jsx)(m.e,{display:"flex",width:"100%",justifyContent:"end",padding:5,children:Object(g.jsx)(m.f,{color:a?"red":"gray",inline:!0,size:"lg",text:a?s.a._("Next","save.pin-to-board.SectionSuggestionPicker","Button to submit form selections"):s.a._("Skip","save.pin-to-board.SectionSuggestionPicker","Button to submit form selections"),onClick:()=>{a?t(Object.values(o)):e()}})})]})}var oe=n("M1Uz"),re=n("6G9P"),ae=n("EC67"),se=n("nGHF");const ce=Object(i.createContext)();function de(e,t){const{sectionName:n,pinId:i}=t.payload,o=[...e[n]||[]];switch(t.type){case"select":return{...e,[n]:[...o,i]};case"unselect":const t=o.indexOf(i);if(o.splice(t,1),!o.length){const t={...e};return delete t[n],t}return{...e,[n]:o};default:throw new Error("Unsupported action received by PinSelectionReducer")}}function le({board:e,handleClose:t,setModalTitle:n,suggestions:o}){const[a,c]=Object(i.useState)("sections"),[d,l]=Object(i.useState)([]),[u,h]=Object(i.useState)([]),[p,b]=Object(i.useReducer)(de,{}),{showOneToast:m}=Object(se.b)(),j=Object(r.useDispatch)(),f=Object(ae.h)(),v=Object(i.useRef)(null);Object(i.useEffect)(()=>()=>{v.current&&clearTimeout(v.current)},[]),Object(i.useEffect)(()=>{const e=[];o.forEach(t=>e.push(t.name)),h(e)},[o]);const O=()=>{Object(R.b)(101,{component:20,view:52})},x=()=>{t(),m(({onHide:t})=>{var n;return Object(g.jsx)(oe.a,{duration:be,onHide:t,text:Object(re.a)(e.name),href:e.url,imageUrl:null!==(n=e.image_cover_url)&&void 0!==n?n:"",onClick:O})}),Object(R.b)(101,{element:1150,view:1,viewParameter:3460,suggested_section_names:u})};return{sections:Object(g.jsx)(ie,{handleClose:x,handleSubmit:e=>{l(e),c("pins"),n&&n(s.a._("Great! Now pick some ideas to start off with.","save.pin-to-board.PinToBoard.SectionSuggestions.SectionSuggestionContainer","Modal title for choosing ideas for a new board"));const t=[];e.forEach(e=>t.push(e.name)),Object(R.b)(101,{element:96,suggested_section_names_selected:t,suggested_section_names_viewed:u,view:1,viewParameter:3460})},suggestions:o}),pins:Object(g.jsx)(ce.Provider,{value:b,children:Object(g.jsx)(ne,{canSubmit:!!Object.keys(p).length,handleClose:x,handleSubmit:()=>{let t=0;c("saving"),n&&n(null);const i=d.reduce((e,t)=>(e[t.name]=null,e),{});let o=0;const r=[];Object.entries({...i,...p}).forEach(([n,i])=>{o+=Array.isArray(i)&&i.length,r.push({[n]:i}),j(Object(X.a)({boardId:e.id,initialPinIds:i,name:n})).then(()=>{t+=1,t===d.length&&(v.current=setTimeout(()=>{var t;f.push(null!==(t=e.url)&&void 0!==t?t:"")},1500),Object(R.b)(101,{element:76,number_pins_selected:o,number_sections_selected:d.length,selected_pin_ids:JSON.stringify(r),suggested_section_names:u,view:1,viewParameter:3460}))})})},sectionSuggestions:d})}),saving:Object(g.jsx)(Z,{})}[a]}var ue=n("Yo6N"),he=n("QAzJ");function pe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const be=4e3,me={LOADING:"loading",SUCCESS:"success"};class ge extends i.PureComponent{constructor(...e){super(...e),pe(this,"state",{isFlyoutOpen:!1,isSavingPin:!1,newBoard:null}),pe(this,"pinImageRef",Object(i.createRef)()),pe(this,"unmounted",!1),pe(this,"handleSavePinToBoard",(e,t,n)=>{const{handleSaveToBoard:i,sectionSuggestions:o,setModalTitle:r}=this.props;i(e,t,n),n&&(this.setState({isSavingPin:!0,newBoard:e}),o&&o.length>0&&r&&r(s.a._("Let's build out your new board! What topics will it include?","save.pin-to-board.PinToBoard.SectionPickerModalTitle","Modal title for selection recommended sections for a new board")))}),pe(this,"handleToggleFlyout",()=>this.setState({isFlyoutOpen:!this.state.isFlyoutOpen})),pe(this,"safeSetState",(e,t)=>{this.unmounted?t&&t():this.setState(e,t)}),pe(this,"close",()=>{const{isFlyoutOpen:e}=this.state,{handleAbort:t}=this.props;e||t()}),pe(this,"dismissModal",e=>{const{dismissModal:t}=this.props;t&&t()})}componentWillUnmount(){this.unmounted=!0}render(){const{activateRemoveBoardSectionUpsell:e,boardSavedTo:t,boardWithSection:n,color:r,displaySuccessAnimation:a,handleNewBoardAnimationCompletion:c,handleSocialConnectSet:d,isInModal:l,newPin:u,pin:h,preselectedCollaborators:p,onBoardCreated:b,sectionSuggestions:j,sensitiveContentNotice:f,setModalTitle:v,showCreate:O,shouldRenderContent:x,suggestedBoardTitle:y,updateDescription:S}=this.props;if(!h||!h&&!h.resourceLoaded||!x)return null;const{isSavingPin:w,newBoard:_}=this.state;if(O&&n){var C;const{url:e,width:t,height:i}=(null===(C=h.images)||void 0===C?void 0:C["236x"])||{};return Object(g.jsx)(Q,{board:n,url:e,height:i,width:t,onClose:this.close,completeCreateSectionAction:this.handleSavePinToBoard})}let T=null;u&&u.board&&(T=u.board.name);const I=f&&f.title||this.props.modalTitle,B=f?Object(g.jsx)(ue.a,{inModal:!0,notices:[f]}):Object(g.jsx)(m.e,{display:"flex",height:"calc(90vh - 97px)",justifyContent:"center",maxHeight:"703px",width:"100%",children:w&&_&&j&&j.length>0&&!e().group.startsWith("enabled")?Object(g.jsx)(le,{board:_,handleClose:this.close,setModalTitle:v,suggestions:j}):Object(g.jsxs)(i.Fragment,{children:[Object(g.jsxs)(m.e,{color:"white",display:"flex",height:"100%",overflow:"hidden",position:"relative",rounding:2,width:"100%",children:[Object(g.jsxs)(m.e,{direction:"column",display:"flex",justifyContent:"between",width:"40%",children:[Object(g.jsx)(m.e,{alignItems:"center",direction:"column",display:"flex",flex:"grow",justifyContent:"start",marginTop:3,children:Object(g.jsx)(H.a,{color:r,pin:h,pinImageRef:this.pinImageRef,updateDescription:S})}),Object(g.jsx)($,{onSocialConnect:d})]}),Object(g.jsx)(m.e,{display:"flex",width:"60%",children:Object(g.jsx)(N,{boardSavedTo:t,boardWithSection:n,isRepin:!0,onBoardCreated:b,onBoardSave:this.handleSavePinToBoard,onClose:this.close,onToggleFlyout:this.handleToggleFlyout,pinId:h.id,preselectedCollaborators:p,setModalTitle:l?v:void 0,showCreate:O,suggestedBoardTitle:y})})]}),a&&Object(g.jsx)(o.a,{onDismiss:()=>{c(),this.dismissModal()},pin:h,pinImageRef:this.pinImageRef,selectedBoardName:T})]})});return l?Object(g.jsx)(F.b,{accessibilityModalLabel:I||s.a._("Repin modal","save.pin-to-board.PinToBoard.PinToBoard","Accessibility label on modal"),heading:I,onDismiss:this.close,size:"md",children:B}):B}}pe(ge,"defaultProps",{pwtAuxData:{}});t.c=function(e){const t=Object(he.b)("web_remove_board_section_upsell");return Object(g.jsx)(ge,{...e,activateRemoveBoardSectionUpsell:t})}},CMye:function(e,t,n){var i=n("GoyQ");e.exports=function(e){return e==e&&!i(e)}},EHyI:function(e,t,n){n.d(t,"a",(function(){return a}));var i=()=>{var e;return!(null===(e=window.performance)||void 0===e||!e.timing)},o=n("XtwW"),r=n("gg0E");function a(e){return!("desktop"===e&&!i())&&(!!o.a&&Object(r.a)())}},EuRG:function(e,t,n){function i(e,t){return{type:"SEARCH_PIN_CLOSEUP_VIEWED",payload:{pinId:e,query:t}}}function o(e){return{type:"SEARCH_QUERY_STARTED",payload:{query:e}}}function r(e){return{type:"SEARCH_QUERY_INVALIDATED",payload:{query:e}}}n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return r}))},F4HH:function(e,t,n){var i=n("q1tI"),o=n("3R0Q"),r=n("o9su"),a=n("B/lV"),s=n("vzKb"),c=n("FylZ"),d=n("mRg4"),l=n("LvPn"),u=n("XtwW"),h=n("LrH5"),p=n("fZG9"),b=n("xfna"),m=n("gz6+"),g=n("3/Bf");const j=Object(h.a)("PwtStopwatch"),f=(e,t)=>{if(u.a){if("start"===t.type&&!e.isTiming){const{name:n,startTime:i,navigationType:o}=t;return Object(g.c)("TIMING."+n),{isTiming:!0,isSampled:t.isSampled,startTime:"number"==typeof i?i:u.a.now(),metricId:{type:"stopwatch",name:n,navigationType:o},pwtStaticContext:t.pwtStaticContext,annotations:e.annotations,binaryAnnotations:e.binaryAnnotations,spans:e.spans,traceId:e.traceId}}if("annotate"===t.type){const n=u.a.now();return j(`adding annotation {${t.label}: ${n}}`),{...e,annotations:e.annotations.concat([{label:t.label,timestamp:n}])}}if("binaryAnnotate"===t.type)return j(`adding binary annotation {${t.name}: ${String(t.value)}}`),{...e,binaryAnnotations:{...e.binaryAnnotations,[t.name]:{value:t.value,type:t.annotationType}}};if("binaryAnnotateOperation"===t.type){const{value:n,type:i}=t.binaryAnnotationValueAndType;if(e.binaryAnnotations[t.name]){const o=e.binaryAnnotations[t.name].value||0;return j(`operating on binary annotation {\n          name: ${t.name}\n          pervious value: ${String(o)}\n          operand: ${String(n)}\n        }`),{...e,binaryAnnotations:{...e.binaryAnnotations,[t.name]:{value:n?t.operation(o,n):o,type:i}}}}return{...e,binaryAnnotations:{...e.binaryAnnotations,[t.name]:{value:n,type:i}}}}if("addSubspan"===t.type){j(`adding subspan {${t.name}}`);let n=0;return t.startTime?n=t.startTime:e.startTime?n=e.startTime:j(`WARNING: adding subspan {${t.name}} without start time`),{...e,spans:[...e.spans,{name:t.name,id:t.id||Object(c.a)(),startTime:n,endTime:t.endTime||1/0,annotationMap:{...t.annotations},binaryAnnotationMap:{...t.binaryAnnotations},parentId:t.parentId}]}}if("subspanStart"===t.type){j(`starting subspan {${t.name}}`);return e.spans.findIndex(e=>e.name===t.name)&&j(`WARNING: adding duplicate subspan name {${t.name}}`),{...e,spans:[...e.spans,{name:t.name,id:t.id||Object(c.a)(),parentId:t.parentId||null,startTime:u.a.now(),endTime:1/0,annotationMap:{...t.annotations},binaryAnnotationMap:{...t.binaryAnnotations}}]}}if("subspanStop"===t.type){if(j(`stopping subspan {${t.name}}`),!t.id){e.spans.reduce((e,n)=>(n.name===t.name&&e.push(n),e),[]).length>1&&Object(g.b)("duplicate_subspan_stop_name",{name:t.name})}const n=t.id?e.spans.findIndex(e=>e.id===t.id):e.spans.findIndex(e=>e.name===t.name);return n>-1?(e.spans[n].endTime=u.a.now(),t.annotations&&(e.spans[n].annotationMap={...e.spans[n].annotationMap,...t.annotations}),t.binaryAnnotations&&(e.spans[n].binaryAnnotationMap={...e.spans[n].binaryAnnotationMap,...t.binaryAnnotations})):Object(g.b)("invalid_subspan_stop_name",{name:t.name}),e}if("stop"===t.type&&e.isTiming){const{startTime:n,metricId:i,pwtStaticContext:s,annotations:h,binaryAnnotations:b,isSampled:g,spans:j,traceId:f}=e;if(t.stopwatchPerformanceObserver&&t.stopwatchPerformanceObserver.disconnect(),g){const e=t.stopTime||u.a.now(),g=[...j.map(t=>(t.endTime===1/0&&(t.endTime=e),t))];if(t.manualAndResourceSpans||0===j.length){const i=Object(c.a)();g.push({name:"network_resources",id:i,startTime:n,endTime:e,annotationMap:{},binaryAnnotationMap:{},parentId:null},...(t.customStopwatchBuffer||[]).map(e=>Object(l.a)(Object(a.a)(e,[]),i)).filter(Boolean))}const v="initial_app_load"===i.navigationType&&Object(r.a)(),O={type:"COMPLETE",traceId:f,startTime:n,endTime:e,spans:g,annotationMap:{...Object(o.a)(h),...Object(m.a)("browser_",v?Object(m.b)(v):{})},binaryAnnotationMap:Object(p.a)({metricId:i,pwtStaticContext:s,binaryAnnotations:b,performanceResourceTimings:t.customStopwatchBuffer||[]})};Object(d.a)({metricId:i,pwtStaticContext:s,result:O})}return{isTiming:!1,annotations:[],binaryAnnotations:{},spans:[],traceId:Object(c.a)()}}if("error"===t.type){const{error:e,stopwatchPerformanceObserver:n}=t;return e&&Object(g.b)(e),n&&n.disconnect(),{isTiming:!1,annotations:[],binaryAnnotations:{},spans:[],traceId:Object(c.a)()}}if("abort"===t.type&&e.isTiming){t.stopwatchPerformanceObserver&&t.stopwatchPerformanceObserver.disconnect();const{metricId:n,pwtStaticContext:i}=e,o=t.reason||"";return Object(d.a)({metricId:n,pwtStaticContext:i,result:{type:"ABORT",reason:o}}),{isTiming:!1,annotations:[],binaryAnnotations:{},spans:[],traceId:Object(c.a)()}}}return e};var v=({name:e,sampleRate:t,navigationType:n,manualAndResourceSpans:o=!1})=>{const r=Object(b.c)(),a=Object(i.useRef)([]),d=Object(i.useRef)(null),[l,u]=Object(i.useReducer)(f,{isTiming:!1,annotations:[],binaryAnnotations:{},spans:[],traceId:Object(c.a)()});return r?{isTiming:l.isTiming,start:i=>{if(window.PerformanceObserver){const e=1e3;a.current=[],d.current=Object(s.a)({entryTypes:["resource"]},t=>{a.current=a.current.concat(t.getEntries()),a.current.length>e&&(a.current=a.current.slice(-e))})}const o={type:"start",startTime:i,name:e,navigationType:n,pwtStaticContext:r,isSampled:!t||Math.random()<t};return u(o)},stop:e=>u({type:"stop",stopTime:e,stopwatchPerformanceObserver:d.current,customStopwatchBuffer:a.current,manualAndResourceSpans:o}),error:e=>{u({type:"error",stopwatchPerformanceObserver:d.current,error:e})},abort:e=>u({type:"abort",stopwatchPerformanceObserver:d.current,customStopwatchBuffer:a.current,reason:e}),annotate:(e,t)=>u({type:"annotate",label:e,parentId:t}),binaryAnnotate:(e,t,n,i)=>u({type:"binaryAnnotate",name:e,value:t,annotationType:n,parentId:i}),binaryAnnotateOperation:(e,t,n,i)=>u({type:"binaryAnnotateOperation",name:e,binaryAnnotationValueAndType:t,operation:n,parentId:i}),addSubspan:({name:e,startTime:t,endTime:n,annotations:i={},binaryAnnotations:o={},parentId:r=null,id:a=null})=>u({type:"addSubspan",name:e,startTime:t,endTime:n,annotations:i,binaryAnnotations:o,parentId:r,id:a}),subspanStart:({name:e,annotations:t={},binaryAnnotations:n={},parentId:i=null,id:o=null})=>u({type:"subspanStart",name:e,annotations:t,binaryAnnotations:n,parentId:i,id:o}),subspanStop:({name:e,annotations:t,binaryAnnotations:n,id:i,parentId:o})=>u({type:"subspanStop",name:e,annotations:t,binaryAnnotations:n,id:i,parentId:o}),getSpans:(e,t)=>l.spans.filter(n=>n[e]===t),getTraceId:()=>l.traceId}:null},O=n("1dBE"),x=n("nKUr");t.a=({name:e,v2LoggerMetricName:t,sampleRate:n,abortOnUnloadOrClientNavigation:o=!0,navigationType:r,manualAndResourceSpans:a=!1})=>{const{Provider:s,useHook:c}=Object(O.b)("Stopwatch_"+e);return{Provider:function({children:t}){const c=v({name:e,sampleRate:n,navigationType:r,manualAndResourceSpans:a}),d=Object(b.b)(),l=d?d.time:0,u=Object(i.useRef)(!1),h=null==c?void 0:c.isTiming,p=e=>{u.current&&(u.current=!1,null==c||c.abort(e))};return Object(i.useEffect)(()=>()=>{o&&p("unloadOrClientNavigation")},[l]),Object(x.jsx)(s,{value:{isTiming:h,abort:p,addAnnotation:(e,t)=>{null==c||c.annotate(e,t)},addBinaryAnnotation:(e,t,n,i)=>{null==c||c.binaryAnnotate(e,t,n,i)},binaryAnnotationOperation:(e,t,n,i)=>{null==c||c.binaryAnnotateOperation(e,t,n,i)},addSubspan:({name:e,startTime:t,endTime:n,annotations:i,binaryAnnotations:o,parentId:r,id:a})=>{null==c||c.addSubspan({name:e,startTime:t,endTime:n,annotations:i,binaryAnnotations:o,parentId:r,id:a})},subspanStart:({name:e,annotations:t,binaryAnnotations:n,parentId:i,id:o})=>{null==c||c.subspanStart({name:e,annotations:t,binaryAnnotations:n,parentId:i,id:o})},subspanStop:({name:e,annotations:t,binaryAnnotations:n,id:i,parentId:o})=>{null==c||c.subspanStop({name:e,annotations:t,binaryAnnotations:n,id:i,parentId:o})},getSpans:(e,t)=>c?c.getSpans(e,t):[],getTraceId:()=>c?c.getTraceId():"",error:e=>{u.current&&(u.current=!1,null==c||c.error(e))},start:e=>{u.current&&(null==c||c.abort("duplicated_init_stopwatch_action")),u.current=!0,null==c||c.start(e)},stop:e=>{u.current&&(u.current=!1,null==c||c.stop(e))}},children:t})},useHook:c}}},FZ8N:function(e,t,n){n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return r}));const i=window.location.search.includes("debug_tracing"),o=window.location.search.includes("debug_lab_tracing"),r=i||o},FylZ:function(e,t,n){function i(){let e="";for(let t=0;t<16;t+=1){e+="0123456789abcdef"[Math.floor(16*Math.random())]}return e}n.d(t,"a",(function(){return i}))},GDhZ:function(e,t,n){var i=n("wF/u"),o=n("mwIZ"),r=n("hgQt"),a=n("9ggG"),s=n("CMye"),c=n("IOzZ"),d=n("9Nap");e.exports=function(e,t){return a(e)&&s(t)?c(d(e),t):function(n){var a=o(n,e);return void 0===a&&a===t?r(n,e):i(t,a,3)}}},"H/Lk":function(e,t,n){n.d(t,"a",(function(){return i}));const i=(e,t,n)=>({type:"MOST_RECENT_BOARD",payload:{id:e,name:t,url:n}})},IOzZ:function(e,t){e.exports=function(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}}},IWTy:function(e,t,n){var i=n("yue5");e.exports=function(e,t,n){for(var o=-1,r=e.criteria,a=t.criteria,s=r.length,c=n.length;++o<s;){var d=i(r[o],a[o]);if(d)return o>=c?d:d*("desc"==n[o]?-1:1)}return e.index-t.index}},JELi:function(e,t,n){var i=n("KwMD"),o=n("ut/Y"),r=n("Sxd8"),a=Math.max,s=Math.min;e.exports=function(e,t,n){var c=null==e?0:e.length;if(!c)return-1;var d=c-1;return void 0!==n&&(d=r(n),d=n<0?a(c+d,0):s(d,c-1)),i(e,o(t,3),d,!0)}},KwMD:function(e,t){e.exports=function(e,t,n,i){for(var o=e.length,r=n+(i?1:-1);i?r--:++r<o;)if(t(e[r],r,e))return r;return-1}},LvPn:function(e,t,n){n.d(t,"a",(function(){return s}));var i=n("FylZ"),o=n("pody"),r=n("nEAA");const a=({category:e,isDeferred:t,isExternal:n})=>[e].concat(t?["deferred"]:[]).concat(n?["external"]:[]).join("_");function s(e,t){const{category:n,timing:s,isDeferred:c,isExternal:d,isVisuallyCompleteRequired:l}=e;return s.responseEnd&&("image"!==n||l)?{name:a(e),id:Object(i.a)(),parentId:t,startTime:s.startTime,endTime:s.responseEnd,annotationMap:Object(o.a)(s),binaryAnnotationMap:{category:Object(r.d)(n),decodedBodySize:Object(r.b)(s.decodedBodySize||0),initiatorType:Object(r.d)(s.initiatorType),isDeferred:Object(r.a)(c),isExternal:Object(r.a)(d),name:Object(r.d)(s.name),nextHopProtocol:Object(r.d)(s.nextHopProtocol),transferSize:Object(r.b)(s.transferSize||0)}}:null}},O7RO:function(e,t,n){var i=n("CMye"),o=n("7GkX");e.exports=function(e){for(var t=o(e),n=t.length;n--;){var r=t[n],a=e[r];t[n]=[r,a,i(a)]}return t}},OSge:function(e,t,n){n.d(t,"c",(function(){return i})),n.d(t,"d",(function(){return o})),n.d(t,"e",(function(){return r})),n.d(t,"f",(function(){return a})),n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return d}));const i="0.8.0",o=9/16,r=6;function a(e,t=1){return{x:e/5,y:e*(t-1)}}const s={HEADING:"story_pin_heading_block",IMAGE:"story_pin_image_block",INGREDIENT:"story_pin_ingredient_block",LINK:"story_pin_link_block",MUSIC:"story_pin_music_block",PARAGRAPH:"story_pin_paragraph_block",SUPPLY:"story_pin_supply_block",VIDEO:"story_pin_video_block",MENTION_STICKER:"story_pin_mention_sticker_block",PRODUCT_STICKER:"story_pin_product_sticker_block"},c={alignment:1,hex_color:"#111111",highlight_color:"#FFFFFF",vertical_alignment:1},d={...c,font:{default_size:28,id:"1",key:"Graphik-Regular.otf",letter_spacing:-.4,line_height:1.25,name:"Teaspoon",url:"https://s.pinimg.com/story_pins/fonts/Graphik-Regular.otf"},font_size:28}},Og0o:function(e,t,n){n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return o}));const i="closeupImage",o=()=>{if(!document.querySelector)return null;const e=document.querySelector('head>link[rel="preload"][as="image"][href^="https://i.pinimg.com/"]');return e instanceof HTMLLinkElement?e.href:null}},P6kd:function(e,t,n){n.d(t,"a",(function(){return p}));var i=n("q1tI"),o=n("Ye/N"),r=n("oRao"),a=n("eOdZ"),s=n("Sbkd"),c=n("vvax"),d=n("n6mq"),l=n("nKUr");function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class h extends i.Component{constructor(...e){super(...e),u(this,"state",{recommendations:[],selectedIndex:0,resourceLoaded:!1}),u(this,"onDismiss",()=>{}),u(this,"mounted",!1),u(this,"addHashtag",e=>{this.props.addHashtag(e),this.setState({recommendations:[]})}),u(this,"handleKeyDown",e=>{38===e.keyCode?this.handlePrevHashtag(e):40===e.keyCode?this.handleNextHashtag(e):27===e.keyCode?this.handleClose(e):13===e.keyCode&&this.handleSubmit(e)}),u(this,"handlePrevHashtag",e=>{e.preventDefault(),this.state.selectedIndex>0&&this.setState(e=>({selectedIndex:e.selectedIndex-1}))}),u(this,"handleNextHashtag",e=>{e.preventDefault(),this.state.selectedIndex<this.state.recommendations.length-1&&this.setState(e=>({selectedIndex:e.selectedIndex+1}))}),u(this,"handleClose",e=>{e.preventDefault(),this.setState({recommendations:[]})}),u(this,"handleSubmit",e=>{e.preventDefault(),this.addHashtag(this.state.recommendations[this.state.selectedIndex].query)}),u(this,"callResource",e=>{const{makeCancelablePromise:t}=this.props;t(a.a.create("HashtagTypeaheadResource",{query:e,showPinCount:!0}).callGet(),"typeahead").then(e=>{if(!this.mounted)return;const t=e.resource_response.data;this.setState({recommendations:t.slice(0,5),resourceLoaded:!0})}).catch(({isCanceled:e})=>{e||this.setState({resourceLoaded:!1})})})}componentDidMount(){this.mounted=!0,this.callResource(this.props.query),window.addEventListener("keydown",this.handleKeyDown)}componentDidUpdate(e){this.props.query!==e.query&&""!==this.props.query&&this.callResource(this.props.query)}componentWillUnmount(){window.removeEventListener("keydown",this.handleKeyDown),this.mounted=!1}render(){const{recommendations:e,resourceLoaded:t,selectedIndex:n}=this.state,{anchor:i,idealDirection:a}=this.props,s=e.filter(e=>e.query),u=a||"down",h="flyout_"+s.length;return t&&s.length>0?Object(l.jsx)("div",{className:"HashtagFlyout",children:Object(l.jsx)(d.I,{anchor:i,idealDirection:u,onDismiss:this.onDismiss,size:"sm",children:Object(l.jsx)("div",{className:"HashtagRecommendations",children:s.length>0?s.map((e,t)=>Object(l.jsx)("div",{className:"HashtagItem",children:Object(l.jsx)(d.X,{fullWidth:!1,onTap:()=>this.addHashtag(e.query),children:Object(l.jsxs)(d.e,{display:"flex",justifyContent:"between",alignItems:"center",color:t===n?"lightGray":"transparent",padding:1,children:[Object(l.jsx)(d.e,{flex:"grow",children:Object(l.jsx)(d.Y,{inline:!0,size:"md",weight:"bold",children:e.query})}),Object(l.jsx)(d.e,{flex:"none",children:Object(l.jsx)(d.Y,{inline:!0,size:"sm",children:Object(c.b)(o.a.ngettext("{{ count }} pin","{{ count }} pins",Number(e.pin_count),"label for n pins in hashtag flyout","label for n pins in hashtag flyout"),{count:Object(l.jsx)(r.a,{value:Number(e.pin_count)},"pinCount")})})})]})})},e.query)):null})},h)}):null}}function p(e){const t=Object(s.a)();return Object(l.jsx)(h,{...e,makeCancelablePromise:t})}},QKYm:function(e,t,n){n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return s})),n.d(t,"b",(function(){return c})),n.d(t,"e",(function(){return d})),n.d(t,"d",(function(){return l}));const i=3,o={square:{width:236,height:236},wide:{width:300,height:200},xWide:{width:358,height:200},xxWide:{width:376,height:200}},r={square:{width:236,height:176},wide:{width:300,height:135},xWide:{width:358,height:200},xxWide:{width:376,height:200}},a={square:{width:236,height:157},wide:{width:320,height:213}};function s(e,t){return t?r[e].width:o[e].width}function c(e,t){return t?r[e].height:o[e].height}function d(e){return a["square"===e?"square":"wide"]}function l(e){return"list"===e?"100%":d(e).width+16}},Sbkd:function(e,t,n){n.d(t,"a",(function(){return r}));var i=n("q1tI"),o=n("mvLR");function r(){const e=Object(i.useRef)([]),t=Object(i.useRef)({});return Object(i.useEffect)(()=>()=>{[...Object.keys(t.current).map(e=>t.current[e]),...e.current].forEach(e=>e())},[]),function(n,i){if(i){const e=t.current[i];e&&(e(),delete t.current[i])}const{cancel:r,promise:a}=Object(o.a)(n);return i?t.current[i]=r:e.current.push(r),a}}},WnNx:function(e,t,n){function i(e){return{type:"SHOW_REPIN_ANIMATION",payload:{pinId:e}}}function o(){return{type:"HIDE_REPIN_ANIMATION"}}function r(){return{type:"SHOW_ACCOUNT_MENU_FLYOUT"}}function a(){return{type:"HIDE_ACCOUNT_MENU_FLYOUT"}}n.d(t,"d",(function(){return i})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return r})),n.d(t,"a",(function(){return a}))},XKAG:function(e,t,n){var i=n("ut/Y"),o=n("MMmD"),r=n("7GkX");e.exports=function(e){return function(t,n,a){var s=Object(t);if(!o(t)){var c=i(n,3);t=r(t),n=function(e){return c(s[e],e,s)}}var d=e(t,n,a);return d>-1?s[c?t[d]:d]:void 0}}},Yo6N:function(e,t,n){n.d(t,"b",(function(){return m})),n.d(t,"a",(function(){return g}));var i=n("q1tI"),o=n("qD10"),r=n("n6mq"),a=n("nKUr");function s({action:e,alignCenter:t}){const{title:n,description:i,button:s}=e,c=n&&n.text,d=i&&i.text,l=s&&s.text||"",u=s&&s.link||"",h=s&&s.link?s.link.replace(/^(?:https?:\/\/)?(?:www\.)?/i,"").replace("/",""):"";return s&&l&&u.startsWith("http")?Object(a.jsxs)(r.e,{children:[Object(a.jsx)(r.e,{marginBottom:1,children:Object(a.jsx)(r.Y,{align:t?"center":"left",weight:"bold",children:""!==l?l:"Visit"})}),Object(a.jsx)(r.e,{marginBottom:1,children:Object(a.jsx)(o.a,{className:"underlineLink",to:u,children:Object(a.jsx)("span",{style:{textDecoration:"underline"},children:Object(a.jsx)(r.Y,{align:t?"center":"left",truncate:!0,children:h})})})})]}):Object(a.jsxs)(r.e,{children:[!!c&&Object(a.jsx)(r.e,{marginBottom:1,children:Object(a.jsx)(r.Y,{align:t?"center":"left",weight:"bold",children:c})}),!!d&&Object(a.jsx)(r.e,{marginBottom:1,children:Object(a.jsx)(r.Y,{align:t?"center":"left",children:d})})]})}const c={backgroundColor:"#E1F8F7",boxShadow:"0 4px 16px rgba(0, 0, 0, 0.04)"},d={boxShadow:"0 4px 16px rgba(0, 0, 0, 0.04)"};function l({inModal:e,notice:t}){const{title:n,description:i,actions:o=[]}=t,l=i&&i.text||"",u=i&&i.text_tags||[],h=1===o.length,p=m(l,u);return Object(a.jsxs)(r.e,{rounding:2,padding:6,dangerouslySetInlineStyle:{__style:e?d:c},children:[!!n&&!e&&Object(a.jsx)(r.e,{marginBottom:2,display:"flex",children:Object(a.jsx)(r.t,{size:"md",children:n})}),!!l&&Object(a.jsx)(r.e,{marginBottom:4,children:Object(a.jsx)("span",{style:{whiteSpace:"pre-wrap"},children:Object(a.jsx)(r.Y,{overflow:"normal",align:e?"center":"left",children:p})})}),!!o.length&&Object(a.jsx)(r.e,{display:"flex",wrap:!0,marginStart:-2,marginEnd:-2,direction:e?"column":"row",children:o.map(t=>Object(a.jsx)(r.e,{column:e||h?12:6,paddingY:1,paddingX:2,children:Object(a.jsx)(s,{action:t,alignCenter:e||h})},JSON.stringify(t)))})]})}var u=n("EC51");function h({notice:e}){const{actions:t=[],description:n,footer:i}=e,o=m(n&&n.text||"",n&&n.text_tags||[]),s={color:"#004b91",display:"block",fontSize:"28px",WebkitFontSmoothing:"antialiased"};return Object(a.jsxs)(r.e,{width:"100%",display:"flex",direction:"column",alignItems:"center",marginBottom:3,children:[Object(a.jsx)(r.e,{dangerouslySetInlineStyle:{__style:{backgroundColor:"#86d1ce"}},display:"flex",justifyContent:"center",width:656,rounding:8,children:Object(a.jsxs)(r.e,{height:"100%",width:"100%",padding:10,children:[Object(a.jsx)("span",{style:s,children:o}),Object(a.jsx)(r.e,{marginTop:6,children:t.map(e=>{var t;const n=null===(t=e.button)||void 0===t?void 0:t.link;var i,o,c;return n&&n.startsWith("tel")?Object(a.jsxs)(r.e,{children:[Object(a.jsx)("span",{style:{fontWeight:"600",...s},children:null===(i=e.title)||void 0===i?void 0:i.text}),Object(a.jsx)("span",{style:s,children:null===(o=e.description)||void 0===o?void 0:o.text})]}):Object(a.jsx)(u.a,{href:n||"",children:Object(a.jsx)(r.e,{display:"inlineBlock",children:Object(a.jsx)(r.e,{alignItems:"center",color:"navy",display:"flex",justifyContent:"center",height:44,rounding:"pill",width:117,children:Object(a.jsx)(r.Y,{color:"white",weight:"bold",children:(null===(c=e.button)||void 0===c?void 0:c.text)||""})})})})})})]})}),!!i&&Object(a.jsx)(r.e,{paddingY:2,width:540,children:Object(a.jsx)(u.a,{inline:!0,target:"blank",href:i.link,children:Object(a.jsx)(r.Y,{align:"center",color:"gray",size:"sm",children:Object(a.jsx)("div",{dangerouslySetInnerHTML:{__html:i.text}})})},i.link)})]})}var p=n("hZxF"),b=n("U4JR");function m(e,t){const n=[];let i=0;for(let o=0;o<t.length;o+=1){const s=t[o];if(5===s.tag_type&&s.link){const t=e.substring(s.offset,s.offset+s.length),o=Object(a.jsx)(r.Y,{inline:!0,weight:"bold",children:Object(a.jsx)(u.a,{inline:!0,target:"blank",href:s.link,children:t},t)});n.push(Object(a.jsx)("span",{children:e.substring(i,s.offset)})),n.push(o),i=s.offset+s.length}}return i>0&&n.push(Object(a.jsx)("span",{children:e.substring(i)})),0===n.length?[Object(a.jsx)("span",{children:e})]:n}function g({inModal:e,notices:t,viewType:n,query:o,sensitivity:r}){return Object(p.a)(()=>{n&&Object(b.b)(120,{component:13367,view:n,entered_query:o,advisory_details:null==r?void 0:r.advisory_details,advisory_level:null==r?void 0:r.advisory,severity_level:null==r?void 0:r.severity})}),Object(a.jsx)(i.Fragment,{children:t.map(t=>2===t.style?Object(a.jsx)(h,{notice:t}):Object(a.jsx)(l,{notice:t,inModal:e}))})}},ZCpW:function(e,t,n){var i=n("lm/5"),o=n("O7RO"),r=n("IOzZ");e.exports=function(e){var t=o(e);return 1==t.length&&t[0][2]?r(t[0][0],t[0][1]):function(n){return n===e||i(n,e,t)}}},ZE2w:function(e,t,n){n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return s})),n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return d}));var i=n("4dcN"),o=n("eOdZ");const r="collaborator_approve_invite";function a(e,t){return o.a.create("BoardEmailInviteResource",{board_id:e,emails:t}).callCreate()}function s(e,t){return o.a.create("BoardInviteResource",{board_id:e,invited_user_ids:t}).callCreate()}function c(e,t){return n=>o.a.create("BoardInviteResource",{board_id:e,invited_user_id:t}).callUpdate().then(()=>{i.a.trackEvent(r,"success")}).catch(()=>i.a.trackEvent(r,"error"))}function d(e,t,n){return t=>{const{invited_user:i,status:r,board:{id:a}}=e;return o.a.create("accepted"===r?"BoardCollaboratorResource":"BoardInviteResource",{ban:n,board_id:a,field_set_key:"boardEdit",invited_user_id:i.id}).callDelete({showError:!1})}}},ZdPf:function(e,t,n){n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return r})),n.d(t,"d",(function(){return a}));const i={CONDITIONAL:0,EMOTIONAL_DISDRESS_OR_SUICIDE:4},o={ABUSIVE:0,SENSITIVE:1,BRAND_UNSAFE:2};function r(e){return null!=e&&(!!e.notice||!!e.notices&&e.notices.length>0)}function a(e){return!!e&&e.severity===o.ABUSIVE}},a49R:function(e,t,n){n.d(t,"a",(function(){return s}));var i=n("q1tI"),o=n("n6mq"),r=n("nKUr");function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const s=Object(i.createContext)(()=>{});class c extends i.Component{constructor(...e){super(...e),a(this,"state",{flyout:void 0,showOnTopOfModal:!1}),a(this,"setActive",(e,t,n=!1)=>{if(e){const e={...t,onDismiss:()=>{t&&t.onDismiss&&(t.onDismiss(),this.setState({flyout:void 0}))},positionRelativeToAnchor:!1};this.setState({flyout:{props:e},showOnTopOfModal:n})}else this.setState({flyout:void 0})})}render(){var e,t,n,a,c,d,l,u,h;const{flyout:p,showOnTopOfModal:b}=this.state,{children:m}=this.props;return Object(r.jsxs)(i.Fragment,{children:[Object(r.jsx)(s.Provider,{value:this.setActive,children:m}),p&&Object(r.jsx)("div",{...b?{style:{zIndex:752,position:"absolute",top:0}}:{},children:Object(r.jsx)(o.I,{anchor:null===(e=p.props)||void 0===e?void 0:e.anchor,onDismiss:null===(t=p.props)||void 0===t?void 0:t.onDismiss,color:null===(n=p.props)||void 0===n?void 0:n.color,idealDirection:null===(a=p.props)||void 0===a?void 0:a.idealDirection,positionRelativeToAnchor:null===(c=p.props)||void 0===c?void 0:c.positionRelativeToAnchor,shouldFocus:null===(d=p.props)||void 0===d?void 0:d.shouldFocus,showCaret:null===(l=p.props)||void 0===l?void 0:l.showCaret,size:null===(u=p.props)||void 0===u?void 0:u.size,children:null===(h=p.props)||void 0===h?void 0:h.children})})]})}}t.b=c},alwl:function(e,t,n){var i=n("eUgh"),o=n("ZWtO"),r=n("ut/Y"),a=n("l9OW"),s=n("1LK5"),c=n("sEf8"),d=n("IWTy"),l=n("zZ0H"),u=n("Z0cm");e.exports=function(e,t,n){t=t.length?i(t,(function(e){return u(e)?function(t){return o(t,1===e.length?e[0]:e)}:e})):[l];var h=-1;t=i(t,c(r));var p=a(e,(function(e,n,o){return{criteria:i(t,(function(t){return t(e)})),index:++h,value:e}}));return s(p,(function(e,t){return d(e,t,n)}))}},"b/K5":function(e,t,n){n.d(t,"a",(function(){return j}));var i=n("q1tI"),o=n("n6mq"),r=n("nKUr");function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const s=["#0074e8","#0FA573","#B469EB","#F13535","#E2780D"],c=(e,t)=>Math.random()*((e||1)-(t||0))+(t||0),d=e=>e*(Math.PI/180);class l extends i.PureComponent{constructor(...e){super(...e),a(this,"animationTimer",null),a(this,"canvasRemovalTimer",null),a(this,"containerRef",Object(i.createRef)()),a(this,"buildCanvas",()=>{if(!this.containerRef.current)return null;const{height:e,width:t}=this.containerRef.current.getBoundingClientRect(),n=2.5*e,i=document.createElement("canvas");return i.style.position="absolute",i.style.left=0-(n-t)/2+"px",i.style.top=0-(n-e)/2+"px",i.style.pointerEvents="none",i.style.width=n+"px",i.style.height=n+"px",i.style.overflow="visible",i.width=n,i.height=n,i}),a(this,"explode",()=>{const e=this.buildCanvas(),t=this.containerRef.current;if(!e||!t)return;const n=e.getContext("2d");t.prepend(e);const i=Array.from(Array(120)).map(()=>({x:e.width/2,y:e.height/2,radius:Math.round(c(10,30)),color:s[Math.floor(Math.random()*s.length)],degree:Number(c(0,360).toFixed(1)),speed:Math.round(c(0,25)),friction:.9,opacity:Number(c(0,.5).toFixed(1)),yVel:0,gravity:.04})),o=(e,t,n,i)=>{window.requestAnimationFrame(()=>o(e,t,n,i)),t.clearRect(0,0,n,i),e.forEach((e,n)=>{e.x+=e.speed*Math.cos(d(e.degree)),e.y+=e.speed*Math.sin(d(e.degree)),e.opacity-=.01,e.speed*=e.friction,e.radius*=e.friction,e.yVel+=e.gravity,e.y+=e.yVel,e.opacity<0||e.radius<0||(t.beginPath(),t.globalAlpha=e.opacity,t.fillStyle=e.color,t.arc(e.x,e.y,e.radius,0,2*Math.PI,!1),t.fill())})};o(i,n,e.width,e.height),this.canvasRemovalTimer=setTimeout(()=>{t.removeChild(e)},(this.props.delay||0)+800)})}componentDidUpdate(e){const{delay:t,startAnimation:n}=this.props,{startAnimation:i}=e;n&&i!==n&&(this.animationTimer=setTimeout(this.explode,t))}componentWillUnmount(){this.animationTimer&&clearTimeout(this.animationTimer),this.canvasRemovalTimer&&clearTimeout(this.canvasRemovalTimer)}render(){return Object(r.jsx)(o.e,{ref:this.containerRef,position:"relative",children:this.props.children})}}a(l,"defaultProps",{delay:0});var u=l,h=n("Ye/N"),p=n("vvax");function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const m=e=>({opacity:e?1:0,WebkitTransition:"opacity .5s ease-in-out .75s",transition:"opacity .5s ease-in-out .75s",overflow:"visible"}),g=e=>({opacity:e?1:0,WebkitTransform:e?"translateY(0)":"translateY(20%)",transform:e?"translateY(0)":"translateY(20%)",WebkitTransition:"all .5s ease-in-out .75s",transition:"all .5s ease-in-out .75s",textAlign:"center",marginTop:"24px"});class j extends i.PureComponent{constructor(...e){super(...e),b(this,"state",{isInitialized:!1}),b(this,"containerRef",Object(i.createRef)()),b(this,"pinDestinationRef",Object(i.createRef)())}componentDidMount(){this.requestAnimationFrameId=window.requestAnimationFrame(()=>{this.setState({isInitialized:!0})})}componentWillUnmount(){this.dismissTimeout&&clearTimeout(this.dismissTimeout)}componentDidUpdate(e,t){const{isInitialized:n}=this.state,{onDismiss:i}=this.props;n&&i&&!this.dismissTimeout&&(this.dismissTimeout=setTimeout(i,2600))}render(){const{firstRepin:e,pin:t,pinImageRef:n,selectedBoardName:a}=this.props,{description:s="",images:c}=t,{height:d=0,width:l=0,url:b=""}=(null==c?void 0:c["236x"])||{},{isInitialized:j}=this.state,{mask:f,imageContainer:v}=((e,t,n,i)=>{var o,r,a;let s,c,d={};const l=null===(o=n.current)||void 0===o?void 0:o.getBoundingClientRect(),u=null===(r=t.current)||void 0===r?void 0:r.getBoundingClientRect(),h=null===(a=i.current)||void 0===a?void 0:a.getBoundingClientRect();if(u&&l&&h){d={left:l.left-u.left,top:l.top-u.top};const e={x:h.left-l.left,y:h.top-l.top},t={x:(h.width-l.width)/2,y:(h.height-l.height)/2};s=`translate(${e.x}px, ${e.y}px)`,c=`translate(${t.x}px, ${t.y}px)`}return{mask:{position:"absolute",left:d.left,top:d.top,width:e?null==h?void 0:h.width:null==l?void 0:l.width,height:e?null==h?void 0:h.height:null==l?void 0:l.height,WebkitTransformOrigin:"left top",transformOrigin:"left top",WebkitTransform:e?s:"none",transform:e?s:"none",WebkitTransition:"all .5s ease-in-out .25s",transition:"all .5s ease-in-out .25s",borderRadius:e?"8px 0px 0px 8px":"8px",zIndex:2},imageContainer:{width:null==l?void 0:l.width,height:null==l?void 0:l.height,WebkitTransformOrigin:"left top",transformOrigin:"left top",WebkitTransform:e?c:"none",transform:e?c:"none",WebkitTransition:"all .5s ease-in-out .25s",transition:"all .5s ease-in-out .25s"}}})(j,this.containerRef,n,this.pinDestinationRef);return Object(r.jsx)(i.Fragment,{children:Object(r.jsxs)(o.e,{position:"absolute",top:!0,bottom:!0,right:!0,left:!0,ref:this.containerRef,children:[Object(r.jsx)(o.e,{maxHeight:335,overflow:"hidden",dangerouslySetInlineStyle:{__style:f},children:Object(r.jsx)(o.e,{dangerouslySetInlineStyle:{__style:v},children:Object(r.jsx)(o.w,{alt:null!=s?s:"",src:b||"",naturalHeight:d||1,naturalWidth:l||1})})}),Object(r.jsx)(o.e,{color:"white",position:"absolute",top:!0,bottom:!0,right:!0,left:!0,dangerouslySetInlineStyle:{__style:(O=j,{pointerEvents:"none",opacity:O?1:0,WebkitTransition:"opacity .3s ease-in-out",transition:"opacity .3s ease-in-out",zIndex:1})},children:Object(r.jsxs)(o.e,{display:"flex",justifyContent:"center",alignItems:"center",direction:"column",height:"100%",dangerouslySetInlineStyle:{__style:m(j)},children:[Object(r.jsx)(u,{delay:1250,startAnimation:j,children:Object(r.jsx)(o.B,{rounding:2,width:270,height:180,children:Object(r.jsxs)(o.e,{display:"flex",height:"100%",width:"100%",children:[Object(r.jsx)(o.e,{ref:this.pinDestinationRef,color:"transparent",marginEnd:1,flex:"grow",height:"100%"}),Object(r.jsxs)(o.e,{display:"flex",width:80,direction:"column",children:[Object(r.jsx)(o.e,{color:"lightGray",flex:"grow",marginBottom:1}),Object(r.jsx)(o.e,{color:"lightGray",flex:"grow"})]})]})})}),Object(r.jsx)(o.e,{paddingX:2,dangerouslySetInlineStyle:{__style:g(j)},children:Object(r.jsx)(o.t,{align:"center",children:e?Object(p.b)(h.a._("You saved your first Pin to {{ selectedBoardName }}!","First board create confirmation message","First board create confirmation message"),{selectedBoardName:null!=a?a:""}):Object(p.b)(h.a._("You saved this Pin to {{ selectedBoardName }}!","Board create confirmation message","Board create confirmation message"),{selectedBoardName:null!=a?a:""})})})]})})]})});var O}}b(j,"defaultProps",{firstRepin:!1})},c50B:function(e,t,n){n.d(t,"o",(function(){return o})),n.d(t,"d",(function(){return r})),n.d(t,"e",(function(){return a})),n.d(t,"m",(function(){return s})),n.d(t,"a",(function(){return c})),n.d(t,"n",(function(){return d})),n.d(t,"i",(function(){return l})),n.d(t,"l",(function(){return u})),n.d(t,"q",(function(){return h})),n.d(t,"j",(function(){return p})),n.d(t,"f",(function(){return b})),n.d(t,"g",(function(){return m})),n.d(t,"h",(function(){return g})),n.d(t,"b",(function(){return j})),n.d(t,"c",(function(){return f})),n.d(t,"s",(function(){return v})),n.d(t,"p",(function(){return O})),n.d(t,"k",(function(){return x})),n.d(t,"r",(function(){return y})),n.d(t,"t",(function(){return S}));const i=e=>{const t={"０":"0","１":"1","２":"2","３":"3","４":"4","５":"5","６":"6","７":"7","８":"8","９":"9","　":" "},n=String(e).split("");return n.forEach((e,i)=>{const o=t[e];o&&(n[i]=o)}),n.join("")};function o(e){return function(t,n){const i=[];t&&/\S/.test(t)||i.push(e.message);const o={errors:i,warnings:[]};return n&&n(o),o}}const r=new RegExp(["(^[-!#$%&'*+/=?^_`{}|~0-9A-Z]+(\\.[-!#$%&'*+/=?^_`{}|~0-9A-Z]+)*",'|^"([\\001-\\010\\013\\014\\016-\\037!#-\\[\\]-\\177]|\\\\[\\001-\\011\\013\\014\\016-\\177])*"',")@((?:[A-Z0-9](?:[A-Z0-9-]{0,61}[A-Z0-9])?\\.)+[A-Z]{2,20}$)","|\\[(25[0-5]|2[0-4]\\d|[0-1]?\\d?\\d)(\\.(25[0-5]|2[0-4]\\d|[0-1]?\\d?\\d)){3}\\]$"].join(""),"i");function a(e){return function(t,n){const i=[];(t=t&&t.trim())&&!t.match(r)&&i.push(e.message);const o={errors:i,warnings:[]};return n&&n(o),o}}function s(e){return function(t,n){const i=[];(t=t&&t.trim())&&!t.match(/^[^0-9].*$/)&&i.push(e.message);const o={errors:i,warnings:[]};return n&&n(o),o}}function c(e){return function(t,n){const o=i(t.trim()),r=[];o&&""!==o&&o.length<2&&r.push(e.ageTooShortString);const a=Math.floor(parseInt(o,10));""===o||/^\d+$/.test(o)&&a>0&&a<300||r.push(e.invalidAgeString);const s={errors:r,warnings:[]};return n&&n(s),s}}function d(e){return function(t,n){const i=(t=t&&t.trim()).replace(/[\(\)\+\-\. ]/g,""),o=[],r=!1!==e.checkLength&&i.length<7;!t||t.match(/^(\(?\+?[0-9]*\)?)?[0-9_\- \.\(\)]*$/g)&&!r||o.push(e.message);const a={errors:o,warnings:[]};return n&&n(a),a}}function l(e){return function(t,n){const o=/^\d+$/,r=[];"number"==typeof t||"string"==typeof t&&(t=t&&t.trim(),(t=i(t))&&!t.match(o)&&r.push(e.message));const a={errors:r,warnings:[]};return n&&n(a),a}}function u(e){return function(t,n){const o=/^[\d\ -]+$/,r=[];"number"==typeof t||"string"==typeof t&&(t=t&&t.trim(),(t=i(t))&&!t.match(o)&&r.push(e.message));const a={errors:r,warnings:[]};return n&&n(a),a}}function h(e){return function(t,n){const i=[];t&&!t.match(/^(https?:\/\/){0,1}[a-z0-9_\-]+\..+/gi)&&i.push(e.message);const o={errors:i,warnings:[]};return n&&n(o),o}}function p(e){return function(t,n){const i=[];(e.should_trim||!1)&&(t=t&&t.trim());const o=t.length;e.min&&o<e.min?i.push(e.minErrorString):e.max&&o>e.max&&i.push(e.maxErrorString);const r={errors:i,warnings:[]};return n&&n(r),r}}function b(e){return function(t,n){const i=[];t!==(e&&e.targetValue)&&i.push(e.message);const o={errors:i,warnings:[]};return n&&n(o),o}}function m(e){return function(t,n){t&&(t=parseFloat(t));const i=[];t<=e.value&&i.push(e.message);const o={errors:i,warnings:[]};return n&&n(o),o}}function g(e){return function(t,n){t&&(t=parseFloat(t));const i=[];t<e.value&&i.push(e.message);const o={errors:i,warnings:[]};return n&&n(o),o}}function j(e){return function(t,n){const i=[];/^[\040-\176]*$/.test(t)||i.push(e.message);const o={errors:i,warnings:[]};return n&&n(o),o}}function f(e){return function(t,n){const i=e.hasFractionalCents?/^\d*(\.\d\d?\d?)?$/:/^\d*(\.\d\d?)?$/,o=[];"number"==typeof t&&(t=t.toString()),t&&!t.match(i)&&(t=t&&t.trim(),o.push(e.message));const r={errors:o,warnings:[]};return n&&n(r),r}}function v(e){return function(t,n){t=t&&t.trim();const i=[],o=new Date(t);t&&!o.getTime()&&i.push(e.message);const r={errors:i,warnings:[]};return n&&n(r),r}}function O(e){return function(t,n){const i=[];(t=t&&t.trim())&&!t.match(/^([01]?[0-9]|2[0-3]):[0-5][0-9]$/)&&i.push(e.message);const o={errors:i,warnings:[]};return n&&n(o),o}}function x(e){return function(t,n){const i=[];e.pattern.test(t)||i.push(e.message);const o={errors:i,warnings:[]};return n&&n(o),o}}function y(e,t){const n=e.map(e=>e(t).errors);return[].concat(...n)}function S(e,t){let n="";return t.some(t=>{const i=t(e);return i.errors.length>0&&(n=i.errors[0],!0)}),n}},dtqy:function(e,t,n){var i=n("q1tI"),o=n("/MKj"),r=n("5S2N"),a=n("Sp3T"),s=n("ANjH"),c=n("U4JR"),d=n("nKUr");t.a=Object(s.compose)(Object(o.connect)(({pins:e},{pinId:t,carouselSlotCurrentIndex:n})=>{const{carousel_data:i}=e&&t&&e[t]||{},{index:o}=i||{};return void 0!==n?{carouselSlotCurrentIndex:o||n||0}:{}}),(function(e){return function(t){const[n,o]=Object(i.useState)(!1),s=Object(a.a)(),{pinId:l,onDelete:u,onSubmit:h,carouselSlotCurrentIndex:p}=t;return Object(d.jsxs)(i.Fragment,{children:[Object(d.jsx)(e,{...t,handlePinEditButtonClick:e=>s(()=>{e&&e.stopPropagation();const{component:n,onToggleModal:i}=t;i&&i(!0),Object(c.b)(101,{element:3,...n?{component:n}:{}}),o(!0)})}),n&&Object(d.jsx)(r.a,{carouselSlotCurrentIndex:p,onDelete:u,onHide:()=>{o(!1),t.onToggleModal&&t.onToggleModal(!1)},onSubmit:h,pinId:l})]})}}))},e0nq:function(e,t,n){function i(e){return{type:"PIN_BETTER_SAVE",payload:e}}function o(e){return{type:"PIN_BETTER_UNSAVE",payload:e}}function r(e){return{type:"PIN_BETTER_SELECT_BOARD_OR_SECTION",payload:e}}function a(e){return{type:"POST_REPIN_MORE_IDEAS_UPSELL_SHOWN",payload:{boardId:e}}}n.d(t,"a",(function(){return i})),n.d(t,"d",(function(){return o})),n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return a}))},e3KR:function(e,t,n){n.d(t,"c",(function(){return U})),n.d(t,"b",(function(){return z})),n.d(t,"a",(function(){return q}));var i=n("q1tI"),o=n("/MKj"),r=(n("7vSn"),n("8cMa")),a=n("s7xj"),s=n("n6mq"),c=n("nKUr");const d=({collaborator_count:e,useLegoLayout:t,type:n})=>t?Object(c.jsx)(s.e,{marginEnd:e?2:0,children:Object(c.jsx)(r.a,{type:n})}):Object(c.jsx)(r.a,{type:n});var l=({board:e,showCollaborativeIcon:t,showPrivateIcon:n,showProtectedIcon:i,showSectionsIcon:o,useLegoLayout:l})=>{var u;const h=(null==e||null===(u=e.collaborating_users)||void 0===u?void 0:u.length)||0;return t||n||i||o?Object(c.jsxs)(s.e,{display:"flex",direction:"row",marginEnd:l?0:5,dangerouslySetInlineStyle:{__style:{paddingLeft:8}},alignItems:"center",children:[n&&Object(c.jsx)(d,{collaborator_count:h,useLegoLayout:l,type:"secret"}),i&&Object(c.jsx)(d,{collaborator_count:h,useLegoLayout:l,type:"protected"}),t&&(l?Object(c.jsx)(a.a,{board:e,isCompact:!0,ownerOnly:!1}):Object(c.jsx)(r.a,{type:"group"})),o&&Object(c.jsx)(r.a,{type:"sections"})]}):null},u=n("JW66"),h=n("Ye/N"),p=n("4cpq");function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class m extends i.Component{constructor(...e){super(...e),b(this,"state",{hovered:!1}),b(this,"handleMouseEnter",()=>{this.setState({hovered:!0})}),b(this,"handleMouseLeave",()=>{this.setState({hovered:!1})}),b(this,"handleTouch",()=>{const{board:e,onClick:t}=this.props;t(e)}),b(this,"handleButtonClick",({event:e})=>{const{onButtonClick:t}=this.props;this.handleTouch(),t&&t(),e.stopPropagation()}),b(this,"tapAreaRef",Object(i.createRef)())}focus(){const e=this.tapAreaRef.current;e&&e.focus()}render(){const{hovered:e}=this.state,{board:t,buttonText:n,isSectionOpen:i,shouldOpenSections:o,showSaveToProfile:r,showFlyoutSaveButton:a,useLegoLayout:d}=this.props,b=!!t.section_count&&t.section_count>0,m=b?"boardWithSection":"boardWithoutSection",g=t.image_cover_url;return Object(c.jsx)(p.a,{id:m,children:Object(c.jsx)(s.X,{onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,onTap:this.handleTouch,ref:this.tapAreaRef,children:Object(c.jsxs)(s.e,{alignItems:"center",color:e?"lightGray":"white",display:"flex",height:d?64:52,marginStart:d?2:3,marginEnd:d?2:3,marginBottom:d?0:1,marginTop:d?0:1,padding:d?2:0,rounding:3,children:[Object(c.jsxs)(s.e,{"aria-hidden":"true",flex:"none",height:d?48:36,marginBottom:d?0:1,marginStart:d?0:2,marginEnd:d?2:3,marginTop:d?0:1,overflow:"hidden",width:d?48:36,children:[r&&"boardless"===t.type&&Object(c.jsx)(s.B,{rounding:2,width:48,height:48,children:Object(c.jsx)(s.e,{color:e?"white":"lightGray",display:"flex",height:"100%",width:"100%",children:Object(c.jsx)(s.e,{alignItems:"center",justifyContent:"center",padding:3,children:Object(c.jsx)(s.u,{accessibilityLabel:h.a._("Save to profile icon","BoardRow.TapArea.Icon","Icon to indicate saving to profile."),color:"darkGray",icon:"history",size:24})})})}),g&&!o&&Object(c.jsx)(s.B,{height:d?48:36,rounding:2,wash:!0,width:d?48:36,children:Object(c.jsx)(s.w,{src:g,alt:"",naturalHeight:d?48:36,naturalWidth:d?48:36,fit:"cover"})}),g&&o?Object(c.jsx)(s.B,{rounding:2,wash:!0,width:d?48:36,height:d?48:36,children:Object(c.jsx)(s.w,{src:g,alt:"",naturalHeight:d?48:36,naturalWidth:d?48:36,fit:"cover"})}):Object(c.jsx)(s.e,{color:o?"lightGray":"transparent",width:"100%",height:"100%"})]}),Object(c.jsx)(s.e,{flex:"grow",paddingY:1,overflow:"hidden",marginStart:d?0:1,children:Object(c.jsx)(s.Y,{truncate:!0,weight:o||!o?"bold":"normal",children:t.name})}),t&&(!e||e&&b&&!i)?Object(c.jsx)(s.e,{children:Object(c.jsx)(l,{board:t,isOpen:t.isOpen,showCollaborativeIcon:!!t.is_collaborative,showPrivateIcon:t.privacy===u.a.BoardPrivacy.SECRET,showProtectedIcon:t.privacy===u.a.BoardPrivacy.PROTECTED,showSectionsIcon:b&&o,useLegoLayout:d})}):null,e&&(0===t.section_count||!o)&&a&&Object(c.jsx)(s.e,{marginEnd:d?0:2,flex:"none",children:Object(c.jsx)(s.f,{accessibilityLabel:"save button",color:"red",inline:!0,onClick:this.handleButtonClick,text:n||h.a._("Save","save button","save button")})})]})})})}}b(m,"defaultProps",{shouldOpenSections:!0,showFlyoutSaveButton:!0});var g=({image_url:e,naturalHeight:t,naturalWidth:n})=>Object(c.jsx)(s.e,{"aria-hidden":"true",marginBottom:1,marginEnd:2,marginTop:1,overflow:"hidden",width:48,height:48,children:Object(c.jsx)(s.B,{wash:!0,width:48,height:48,rounding:2,children:Object(c.jsx)(s.w,{src:e,alt:"",naturalHeight:t,naturalWidth:n})})});function j(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class f extends i.Component{constructor(...e){super(...e),j(this,"state",{hovered:!1}),j(this,"handleMouseEnter",()=>{this.setState({hovered:!0})}),j(this,"handleMouseLeave",()=>{this.setState({hovered:!1})}),j(this,"handleTouch",()=>{const{board:e,onClick:t,section:n}=this.props;t(n,e)}),j(this,"handleButtonClick",({event:e})=>{const{onButtonClick:t}=this.props;this.handleTouch(),t&&t(),e.stopPropagation()}),j(this,"tapAreaRef",Object(i.createRef)())}focus(){const e=this.tapAreaRef.current;e&&e.focus()}render(){var e,t,n,i,o,r;const{hovered:a}=this.state,{buttonText:d,section:l,showSectionSaveButton:u,useLegoLayout:p}=this.props;return Object(c.jsx)(s.X,{onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,onTap:this.handleTouch,ref:this.tapAreaRef,children:Object(c.jsxs)(s.e,{color:a?"lightGray":"white",display:"flex",alignItems:"center",height:p?64:52,marginStart:p?2:0,marginEnd:p?2:0,padding:p?2:0,marginTop:p?0:1,rounding:3,dangerouslySetInlineStyle:{__style:p?{}:{marginLeft:53,marginRight:11}},children:[p&&!(null===(e=l.preview_pins)||void 0===e||!e.length)&&Object(c.jsx)(g,{image_url:null!==(t=l.preview_pins[0].image_square_url)&&void 0!==t?t:"",naturalHeight:null!==(n=null===(i=l.preview_pins[0].image_square_size_pixels)||void 0===i?void 0:i.height)&&void 0!==n?n:1,naturalWidth:null!==(o=null===(r=l.preview_pins[0].image_square_size_pixels)||void 0===r?void 0:r.width)&&void 0!==o?o:1}),Object(c.jsx)(s.e,{flex:"grow",paddingY:1,marginStart:p?0:4,children:Object(c.jsx)(s.Y,{truncate:!0,weight:p?"bold":"normal",children:l.title})}),a&&u&&Object(c.jsx)(s.e,{marginEnd:p?0:2,flex:"none",children:Object(c.jsx)(s.f,{accessibilityLabel:"save button",color:"red",inline:!0,text:d||h.a._("Save","save button","save button"),onClick:this.handleButtonClick})})]})})}}j(f,"defaultProps",{showSectionSaveButton:!0});var v=n("w70y");var O=Object(v.b)({name:"BoardSectionsRepinResource",key:"sectionsResource",options:e=>({board_id:e.board.id}),allowStale:!1})(e=>{const{board:t,buttonText:n,sectionsResource:i,onClick:o,onButtonClick:r,showSectionSaveButton:a,useLegoLayout:d}=e,l=i&&i.data||[];return Object(c.jsxs)(s.e,{children:[!i.isLoaded&&Object(c.jsx)(s.e,{display:"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"100%",minHeight:200,children:Object(c.jsx)(s.R,{accessibilityLabel:h.a._("loading board picker","accessibility text for loading spinner","accessibility text for loading spinner"),show:!0})}),i.isLoaded&&Object(c.jsxs)(s.e,{children:[d&&Object(c.jsx)(s.e,{marginStart:4,marginTop:2,paddingY:1,children:Object(c.jsx)(s.Y,{size:"sm",children:h.a._("Section","PinBetterSave.BoardFlyout.SectionPlaceholderText","section list title")})}),l.map(e=>Object(c.jsx)(f,{board:t,buttonText:n,onButtonClick:r,onClick:o,section:e,showSectionSaveButton:a,useLegoLayout:d},e.id))]})]})});function x({isBoardCreate:e,onCreateBoardClick:t,useLegoLayout:n}){const[o,r]=Object(i.useState)(!1);return Object(c.jsx)(s.e,{"data-test-id":"create-board",height:"100%",display:"flex",children:Object(c.jsx)(s.X,{onMouseEnter:()=>r(!0),onMouseLeave:()=>r(!1),onTap:t,rounding:2,children:Object(c.jsxs)(s.e,{display:"flex",alignItems:"center",padding:n?4:2,color:o?"lightGray":"white",width:"100%",height:"100%",children:[Object(c.jsx)(s.e,{rounding:n?2:0,dangerouslySetInlineStyle:{__style:n?{padding:"14px"}:{}},marginStart:n?0:4,marginEnd:n?2:5,color:n?"lightGray":"transparent",children:Object(c.jsx)(s.u,{accessibilityLabel:"Add a board",size:n?20:28,icon:n?"add":"add-circle",color:n?"darkGray":"red"})}),e?Object(c.jsx)(s.Y,{align:"center",truncate:!0,weight:"bold",children:h.a._("Create board")}):Object(c.jsx)(s.Y,{align:"center",truncate:!0,weight:"bold",children:h.a._("Create section")})]})})})}var y=n("nKlH"),S=n("eOdZ");function w({onClick:e,title:t,showIcon:n}){const[o,r]=Object(i.useState)(!1);return Object(c.jsx)(s.X,{onMouseEnter:()=>r(!0),onMouseLeave:()=>r(!1),onTap:()=>{e({title:t})},children:Object(c.jsxs)(s.e,{color:o?"lightGray":"white",display:"flex",alignItems:"center",height:n?64:52,marginStart:3,marginEnd:3,marginBottom:1,rounding:3,children:[Object(c.jsx)(s.e,{flex:"none",marginBottom:1,marginStart:n?1:2,marginEnd:3,marginTop:1,overflow:"hidden",width:n?48:36,height:n?48:36,rounding:n?2:1,children:Object(c.jsx)(s.e,{color:"lightGray",width:"100%",height:"100%",display:n?"flex":void 0,alignItems:n?"center":void 0,justifyContent:n?"center":void 0,children:n&&Object(c.jsx)(s.u,{icon:"add",color:"darkGray",size:20,accessibilityLabel:h.a._("Create board icon","BoardSuggestionRow.AccessibilityLabel.Text","accessibility label text form add icon")})})}),Object(c.jsx)(s.e,{flex:"grow",paddingY:1,children:Object(c.jsx)(s.Y,{truncate:!0,weight:"bold",children:t})}),o&&Object(c.jsx)(s.e,{marginEnd:2,children:Object(c.jsx)(s.f,{accessibilityLabel:"create button",color:"red",inline:!0,text:h.a._("Create","create button to create a new board","create button to create a new board")})})]})})}const _=e=>{const{suggestionsResource:t,onClick:n,pinBuilderSuggestions:o,inWebRepinFlowExp:r}=e,a=o||t&&t.data||[],d=Object(c.jsxs)(i.Fragment,{children:[r&&Object(c.jsx)(s.e,{marginStart:4,marginTop:2,paddingY:1,children:Object(c.jsx)(s.Y,{size:"sm",children:h.a._("Suggestions","PinBetterSave.BoardFlyout.SectionPlaceholderText","section list title")})}),a.map((e,t)=>Object(c.jsx)(w,{title:e.title,onClick:n,showIcon:r},t))]});return Object(c.jsx)(i.Fragment,{children:a?d:Object(c.jsx)(s.e,{display:"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"100%",minHeight:200,children:Object(c.jsx)(s.R,{accessibilityLabel:h.a._("loading board suggestions","accessibility text for loading spinner","accessibility text for loading spinner"),show:!0})})})};var C=n("0BOE"),T=n("eUcp"),I=n("Wer7"),B=n("U4JR"),P=n("pLLR"),R=n("seP0"),k=n("ANjH");function E(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const A=e=>e?498:439,L=360,D=e=>e?80:52;class M extends i.PureComponent{constructor(...e){var t;super(...e),t=this,E(this,"state",{boardSuggestions:[],isSectionOpen:null,selectedBoardId:"",selectedBoardCategory:"",searchQuery:"",searchBoxFocused:!0}),E(this,"getItems",e=>{const{boardResource:t,suggestedBoardsShortListResource:n,displayShortlistMostRecentBoard:i,showSaveToProfile:o}=this.props;if(!t||!t.data)return[];const{all_boards:r,boards_shortlist:a}=t&&t.data,s=[{boardId:"",image_cover_url:"",is_collaborative:!1,isOpen:!1,name:h.a._("Profile","pinBetterSave.initialSelection.boardlessPinsOption","Option to save to profile without a board."),privacy:"public",section_count:0,type:"boardless",url:"/me/"}],c=r.filter(e=>!this.props.advertiser_id||"secret"!==e.privacy).map(e=>this.mapBoards(e,"allBoards",0)),d=i?a.map((e,t)=>this.mapBoards(e,"shortlist",t+1)):(n&&n.data||[]).map((e,t)=>this.mapBoards(e,"shortlist",t+1)),l=o&&r.length>=3?[...s,...d.slice(0,2)]:d,{searchQuery:u}=this.state;return u.length>=2?[...Object(C.a)(c,u)]:[...r.length<3&&o?[{type:"header",title:h.a._("Quick save and organize later","BoardFlyout.inPinBetterSaveAndLessThanThreeBoards.boardlessPinsTitle","Header saving to profile")},...s]:[],...r.length>3&&l&&l.length?[{type:"header",title:e?h.a._("Top choices","PinBetterSave.BoardFlyout.TopChoicesSectionTitle","Header for top suggestions in board picker"):h.a._("Top board suggestions","Header for top suggesions in board picker","Header for top suggesions in board picker")},...l]:[],...r.length>0?[{type:"header",title:r.length<3&&o?h.a._("Save to board","BoardFlyout.inPinBetterSaveAndLessThanThreeBoards.saveToBoardTitle","Header for boards when there are less than 3 boards in board picker"):h.a._("All boards","Header for all boards in board picker","Header for all boards in board picker")},...c]:[]]}),E(this,"mapBoards",(e,t,n)=>{const{setBoardWithSection:i}=this.props,{selectedBoardId:o,selectedBoardCategory:r}=this.state,a=e.id===o&&t===r;return a&&i&&i(e),{...e,category:t,isOpen:a,gridIndex:n}}),E(this,"handleBack",()=>{const{setBoardWithSection:e}=this.props;this.setState({isSectionOpen:!1,selectedBoardId:"",selectedBoardCategory:""}),e&&e(null)}),E(this,"handleSectionClick",(e,t)=>{const{onItemChosen:n}=this.props;Object(B.b)(101,{component:13282,element:36,objectId:t.id,view:91,grid_index:t.gridIndex}),n({boardId:t.id,url:e.slug?`${t.url}${e.slug}/`:t.url,sectionId:e.id,title:e.title||"",type:e.type,imageCoverUrl:t.image_cover_url})}),E(this,"getPinBuilderSuggestions",(async function(){const{pin:e}=t.props;if(e){var n;const i=S.a.create("BoardTitleSuggestionsResource",{pin_id:e.id}),o=await i.callGet({showError:!1},{retries:1});if(null!==(n=o.resource_response)&&void 0!==n&&n.data){const e=o.resource_response.data.map(e=>({title:e.title}))||[];t.setState({boardSuggestions:e})}}})),E(this,"handleBoardWithSectionsClick",e=>{const{selectedBoardId:t,selectedBoardCategory:n}=this.state,i=t===e.id&&n===e.category;this.setState({isSectionOpen:!0,selectedBoardId:i?"":e.id,selectedBoardCategory:i?"":e.category})}),E(this,"handleBoardClick",({board:e,toggleSections:t})=>{const{onItemChosen:n}=this.props;this.setState({searchBoxFocused:!1}),t?this.handleBoardWithSectionsClick({id:e.id,category:e.category}):(Object(B.b)(101,{component:13282,element:36,objectId:e.id,view:91,grid_index:e.gridIndex}),n({boardId:e.id,url:e.url,title:e.name||"",type:e.type,imageCoverUrl:e.image_cover_url}))}),E(this,"handleSearchQueryUpdate",e=>{this.setState(t=>({...t,searchQuery:e}))}),E(this,"boardSectionsHeaderRef",Object(i.createRef)())}componentDidMount(){this.props.boardResource&&this.props.boardResource.isLoaded&&this.setPWTLoadingEnd()}componentDidUpdate(e,t){e.boardResource&&!e.boardResource.isLoaded&&this.props.boardResource&&this.props.boardResource.isLoaded&&this.setPWTLoadingEnd(),this.state.isSectionOpen&&!t.isSectionOpen&&this.boardSectionsHeaderRef.current&&this.boardSectionsHeaderRef.current.focus()}setPWTLoadingEnd(){const{boardResource:e,boardPickerStopwatch:t}=this.props;t&&(!e||e.error?t.error():t.stop())}render(){const{boardResource:e,buttonText:t,changeBoardModal:n,customItem:o,onBoardCreate:r,onButtonClick:a,paneHeight:d,paneWidth:l,showSaveToProfile:u,showCreateBoardButton:b,showFlyoutSaveButton:g,showSections:j,showSectionSaveButton:f,suggestedBoardsShortListResource:v,useStoryboardStyle:S,useLegoLayout:w}=this.props,{boardSuggestions:C,isSectionOpen:I,searchBoxFocused:B,searchQuery:P}=this.state;if(!e)return null;const{isLoaded:R,error:k}=e;let E=[];(R&&!k||v&&v.data&&!v.error)&&(E=this.getItems(!!w));const M=E.filter(e=>e&&"allBoards"===e.category).length;M<=3&&0===C.length&&this.getPinBuilderSuggestions();const N=S?200:322,F=S?214:334,H=d||290,U=null===I?"":"BoardsSlideRight",z=e=>Object(c.jsxs)(i.Fragment,{children:[!w&&Object(c.jsx)(s.o,{}),Object(c.jsx)(s.e,{overflow:"hidden",height:D(w),borderStyle:w&&M>=3&&E.length>1?"shadow":"none",dangerouslySetInlineStyle:{__style:{borderBottomRightRadius:8,borderBottomLeftRadius:8}},children:Object(c.jsx)(x,{onCreateBoardClick:()=>r({title:this.state.searchQuery}),isBoardCreate:e,useLegoLayout:w})})]});return Object(c.jsxs)(s.e,{width:w&&!n?"100%":l,rounding:2,overflow:"hidden",height:S||n?"100%":A(w),color:"white",zIndex:T.a,children:[R?null:Object(c.jsx)(s.e,{display:"flex",alignItems:"center",justifyContent:"center",width:w&&!n?L:l,height:"100%",minHeight:200,children:Object(c.jsx)(s.R,{accessibilityLabel:h.a._("loading board picker","accessibility text for loading spinner","accessibility text for loading spinner"),show:!0})}),Object(c.jsx)(s.e,{display:"flex",direction:"row",children:R&&Object(c.jsx)("div",{className:I?"BoardsSlideLeft":U,children:Object(c.jsx)(s.e,{position:"relative",children:Object(c.jsxs)(s.e,{display:"flex",direction:"row",width:w&&!n?720:2*l,zIndex:new s.q(0),children:[Object(c.jsxs)(s.e,{display:"flex",direction:"column",width:w&&!n?L:l,children:[w&&!n&&Object(c.jsx)(s.e,{height:64,display:"flex",alignItems:"center",justifyContent:"center",children:Object(c.jsx)(s.Y,{align:"center",size:"lg",weight:"bold",children:u?h.a._("Save","PinBetterSave.BoardFlyout.SavePlaceholder","flyout header text to indicate save options"):h.a._("Save to board","PinBetterSave.BoardFlyout.SaveToBoardPlaceholder","flyout header text")})}),!n&&Object(c.jsx)(s.e,{padding:w?0:3,paddingX:w?4:3,height:w?64:"auto",children:Object(c.jsx)(y.a,{accessibilityLabel:h.a._("Search through your boards","search bar placeholder text","search bar placeholder text"),focused:B,id:"pickerSearchField",onChange:({value:e})=>this.handleSearchQueryUpdate(e),placeholder:h.a._("Search","search bar placeholder text","search bar placeholder text"),value:P})}),Object(c.jsxs)(s.e,{minHeight:w?290:N,maxHeight:w?H:N,overflow:"scrollY",children:[v&&!v.isLoaded?Object(c.jsx)(p.a,{id:"suggestedBoardsContainer",children:Object(c.jsx)(s.e,{display:"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"100%",minHeight:128.5,children:Object(c.jsx)(s.R,{accessibilityLabel:h.a._("loading board picker","accessibility text for loading spinner","accessibility text for loading spinner"),show:!0})})}):null,o,E.map((e,n)=>"header"===e.type?Object(c.jsx)(s.e,{paddingX:w?4:3,paddingY:1,marginTop:n>0?2:1,children:Object(c.jsx)(s.Y,{size:w?"sm":"md",children:e.title})},e.title):Object(c.jsx)(s.e,{children:Object(c.jsx)(m,{board:e,buttonText:t,onClick:e=>{this.handleBoardClick({board:e,toggleSections:j&&!!e.section_count})},onButtonClick:a,shouldOpenSections:j,showFlyoutSaveButton:g,showSaveToProfile:u,useLegoLayout:w})},`${e.category}-${e.id}`)),M<=3&&Object(c.jsx)(_,{onClick:r,pinBuilderSuggestions:C,inWebRepinFlowExp:w})]}),b&&z(!0)]}),Object(c.jsxs)(s.e,{display:"flex",direction:"column",width:w&&!n?L:l,marginBottom:w?2:0,children:[Object(c.jsxs)(s.e,{display:"flex",direction:"row",justifyContent:"center",alignContent:"center",alignItems:"center",children:[Object(c.jsx)(s.l,{span:2,children:Object(c.jsx)(s.e,{display:"flex",justifyContent:"start",alignContent:"center",alignItems:"center",marginStart:3,children:Object(c.jsx)(s.v,{accessibilityLabel:"Back button",icon:"arrow-back",iconColor:"darkGray",onClick:this.handleBack,size:"sm"})})}),Object(c.jsx)(s.l,{span:8,children:Object(c.jsx)(s.e,{display:"flex",justifyContent:"center",alignItems:"center",height:w?64:52,children:Object(c.jsx)(s.Y,{weight:"bold",children:w?h.a._("Save Pin to","PinBetterSave.BoardFlyout.SectionHeader","Header for section header"):h.a._("Choose section","Header for section header","Header for section header")})})}),Object(c.jsx)(s.l,{span:2,children:Object(c.jsx)(s.e,{})})]}),!w&&Object(c.jsx)(s.o,{}),Object(c.jsx)(s.e,{minHeight:w?354:F,maxHeight:w?H:F,overflow:"scrollY",children:E?Object(c.jsx)(i.Fragment,{children:E&&E.map(e=>"header"===e.type?null:Object(c.jsx)(s.e,{children:e.isOpen&&Object(c.jsxs)(i.Fragment,{children:[w&&Object(c.jsx)(s.e,{marginStart:4,marginTop:2,paddingY:1,children:Object(c.jsx)(s.Y,{size:"sm",children:h.a._("Board","PinBetterSave.BoardFlyout.BoardPickerTitle","board title on section picker")})}),Object(c.jsx)(m,{board:e,buttonText:t,isSectionOpen:!0,onClick:e=>{this.handleBoardClick({board:e,toggleSections:!1})},onButtonClick:a,shouldOpenSections:!1,showFlyoutSaveButton:g,ref:this.boardSectionsHeaderRef,useLegoLayout:w}),Object(c.jsx)(O,{board:e,buttonText:t,onClick:this.handleSectionClick,onButtonClick:a,showSectionSaveButton:f,useLegoLayout:w})]})},`${e.category}-${e.id}`))}):null}),b&&!n&&z(!1)]})]})})})})]})}}function N(e){return Object(c.jsx)(M,{...e,boardPickerStopwatch:Object(R.c)(),requestContext:Object(P.d)()})}function F(e){const{advertiser:t,viewer:n}=e;if(n&&t){const t=e.advertiser;if(n.isAuth&&t.is_impersonation)return{hasMUA:!1,advertiser_id:t.id,username:t.owner_user_id};if(n.isAuth&&t.owner_user_id!==n.id)return{hasMUA:!0,advertiser_id:t.id,username:t.owner_user_id};if(n.isAuth&&t.owner_user_id===n.id)return{hasMUA:!1,advertiser_id:t.id,username:"me"}}return{advertiser_id:void 0,hasMUA:void 0,username:void 0}}function H(e){const{advertiser_id:t,hasMUA:n,username:i}=e;return{field_set_key:"board_picker",filter:n?"protected":"all",...i?{username:i}:{},...t?{advertiser_id:t}:{}}}function U(){return(e,t)=>e(Object(I.f)("BoardPickerBoardsResource",H(F(t()))))}E(M,"defaultProps",{paneWidth:320,showCreateBoardButton:!0,showFlyoutSaveButton:!0,showSections:!0,showSectionSaveButton:!0,useLegoLayout:!0});const z=Object(k.compose)(Object(o.connect)((function(e){return F(e)})),Object(v.b)({name:"BoardPickerBoardsResource",key:"boardResource",options:H}))(N),q=Object(v.b)({name:"BoardPickerBoardsShortlistResource",key:"suggestedBoardsShortListResource",options:e=>({pin_id:e.pin.id,shortlist_length:3,num_shortlist_suggestions:3})})(N)},eUcp:function(e,t,n){n.d(t,"j",(function(){return o})),n.d(t,"f",(function(){return r})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return s})),n.d(t,"d",(function(){return c})),n.d(t,"l",(function(){return d})),n.d(t,"i",(function(){return l})),n.d(t,"k",(function(){return u})),n.d(t,"h",(function(){return h})),n.d(t,"e",(function(){return p})),n.d(t,"b",(function(){return b})),n.d(t,"g",(function(){return m})),n.d(t,"m",(function(){return g}));var i=n("n6mq");const o=new i.q(0),r=new i.q(1),a=2,s=new i.q(a),c=2,d=new i.q(c),l=new i.q(3),u=new i.q(1),h=new i.q(3),p=3,b=4,m=(new i.q(b),new i.q(5)),g=new i.q(100)},fEA9:function(e,t,n){n.r(t),n.d(t,"PinBetterSave",(function(){return ie}));var i=n("q1tI"),o=n("/MKj"),r=(n("1vym"),n("TSYQ")),a=n.n(r),s=n("Ye/N"),c=n("juJw"),d=n("pLLR"),l=n("n6mq"),u=n("nKUr");function h(e){const{dropdownClasses:t,dropdownRef:n,onBoardDropdownClick:o,onSaveClick:r,renderPinSaveTooltip:c,saveButtonClasses:d,saveButtonRef:h,showSaveButton:p,textColor:b,title:m,hideDropdown:g}=e;return g?Object(u.jsx)(l.e,{alignItems:"center",justifyContent:"end",display:"flex",width:"100%",height:44,children:Object(u.jsxs)(i.Fragment,{children:[Object(u.jsx)("button",{className:d,onClick:o,"data-test-id":"PinBetterSaveButton",ref:n,children:Object(u.jsx)(l.Y,{color:"white",size:"sm",weight:"bold",children:s.a._("Save","BetterSave.Save.HideDropdown.label","BetterSave Save label")})}),!!c&&!!h.current&&c(h.current)]})}):Object(u.jsxs)(l.e,{alignItems:"center",display:"flex",width:"100%",height:44,children:[Object(u.jsx)("button",{className:t,"data-test-id":"PinBetterSaveDropdown",onClick:o,ref:n,children:Object(u.jsxs)(l.e,{paddingX:4,display:"flex",flex:"grow",alignItems:"center",children:[Object(u.jsx)(l.e,{flex:"grow",overflow:"hidden",children:Object(u.jsx)(l.Y,{color:b,truncate:!0,size:"sm",children:Object(u.jsx)("span",{className:a()("PinBetterSave__DropdownText","PinBetterSave__DropdownText--lego"),children:m})})}),Object(u.jsx)(l.e,{marginStart:2,flex:"none","data-test-id":"boardSelectionDropdown",children:Object(u.jsx)("div",{className:a()("PinBetterSave__DownArrowContainer","PinBetterSave__DownArrowContainer--lego"),children:Object(u.jsx)(l.u,{accessibilityLabel:s.a._("Select a board you want to save to","BetterSave accessibility label to change the board","BetterSave accessibility label to change the board"),color:"darkGray",icon:"arrow-down",size:12})})})]})}),p&&Object(u.jsxs)(i.Fragment,{children:[Object(u.jsx)("button",{className:d,onClick:r,"data-test-id":"PinBetterSaveButton",ref:h,children:Object(u.jsx)(l.Y,{color:"white",size:"sm",weight:"bold",children:s.a._("Save","BetterSave Save label","BetterSave Save label")})}),!!c&&!!h.current&&c(h.current)]})]})}function p(e){const{dropdownRef:t,onBoardDropdownClick:n,onSaveClick:i,renderPinSaveTooltip:o,saveButtonRef:r,hideDropdown:a=!1,title:d,view:h}=e,p="closeup"===h,b=p?"darkGray":"white";return Object(u.jsxs)(l.e,{alignItems:"center",display:"flex",width:"100%",ref:t,children:[!a&&Object(u.jsx)(l.e,{flex:"grow",width:"100%",children:Object(u.jsx)(l.X,{onTap:({event:e})=>n(e),children:Object(u.jsxs)(l.e,{alignItems:"center",display:"flex",flex:"grow",justifyContent:p?"end":"start",paddingX:p?4:1,children:[Object(u.jsx)(l.e,{width:"auto",overflow:"auto","data-test-id":"PinBetterSaveDropdown",children:Object(u.jsx)(l.Y,{color:b,size:"lg",weight:"bold",children:Object(c.a)(d,13)})}),Object(u.jsx)(l.e,{"data-test-id":"boardSelectionDropdown",flex:"none",marginStart:d.length<13?2:1,children:Object(u.jsx)(l.u,{accessibilityLabel:s.a._("Select a board you want to save to","PinBetterSave.BoardSelection.DropdownIcon","BetterSave accessibility label to change the board"),color:b,icon:"arrow-down",size:12})})]})})}),Object(u.jsx)(l.e,{flex:"none",marginStart:"auto",alignSelf:p?"center":"start",children:Object(u.jsx)(l.f,{color:"red",inline:!0,onClick:({event:e})=>{a?n(e):i(e)},ref:r,size:"lg",text:s.a._("Save","PinBetterSave.BoardSelection.SaveButton","BetterSave Save label")})}),!!o&&!!r.current&&o(r.current)]})}function b(e){const{dropdownRef:t,onBoardDropdownClick:n,onSaveClick:o,renderPinSaveTooltip:r,selectedTitle:s,showSaveButton:c,unselectedText:l,shouldUseLegoStyles:b,view:m,hideDropdown:g}=e,{isRTL:j}=Object(d.d)(),f=Object(i.useRef)(),v=s||l;if(b)return Object(u.jsx)(p,{dropdownRef:t,onBoardDropdownClick:n,onSaveClick:o,renderPinSaveTooltip:r,saveButtonRef:f,hideDropdown:g,title:v,view:m});const O=a()("PinBetterSave__Button",{"PinBetterSave__Button--rtl":j},"PinBetterSave_Button--repin-flow"),x=a()("PinBetterSave__Button",{"PinBetterSave__Button--rtl":j,"PinBetterSave__Button--lego-pin":"pin"===m},"PinBetterSave__Button--lego");return Object(u.jsx)(h,{dropdownClasses:a()("PinBetterSave__Dropdown","PinBetterSave__Dropdown--lego",{"PinBetterSave__Dropdown--rtl":j,"PinBetterSave__Dropdown--lego-pin":"pin"===m,"PinBetterSave__Dropdown--lego-closeup":"closeup"===m,"PinBetterSave__Dropdown--expandedLego":!c}),dropdownRef:t,onBoardDropdownClick:n,onSaveClick:o,renderPinSaveTooltip:r,saveButtonClasses:g?O:x,saveButtonRef:f,showSaveButton:c,textColor:s?"darkGray":"gray",title:v,hideDropdown:g})}var m=n("clxp"),g=n("1inl"),j=n("ajUs"),f=n("uVIr"),v=n("EC51"),O=n("a49R");class x extends i.Component{constructor(...e){var t,n,i;super(...e),i=()=>{const{setActive:e,showOnTopOfModal:t,...n}=this.props;e("flyout",n,t||!1)},(n="renderFlyout")in(t=this)?Object.defineProperty(t,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[n]=i}componentDidMount(){this.renderFlyout()}componentDidUpdate(){this.renderFlyout()}componentWillUnmount(){this.props.setActive()}render(){return null}}const y=e=>Object(u.jsx)(O.a.Consumer,{children:t=>Object(u.jsx)(x,{...e,setActive:t})});y.displayName="MasonryFlyout";var S=y,w=n("eOdZ"),_=n("lm6u");function C(e){const{action:t,additionalCreateFields:n,boardWithSection:o,children:r,onClose:a,pin:s,setCompletionPromise:c,showModal:d}=e,l=((e,t)=>{const[n,o]=Object(i.useState)([]);return Object(i.useEffect)(()=>{let n=!1;return e&&w.a.create("SectionRecommendationsResource",{pinIds:[t]}).callGet().then(e=>{var t;if(n)return;const i=null==e||null===(t=e.resource_response)||void 0===t?void 0:t.data;o(i.length>0&&i[0]||[])}),()=>{n=!0}},[e,t]),n})(d,s.id);return Object(u.jsx)(_.a,{additionalCreateFields:n,boardWithSection:o,action:t,hideSuccessAnimation:!!l.length,onClose:a,setCompletionPromise:c,showCreate:!0,shouldShowToast:!l.length,pin:s,children:e=>r({...e,sectionSuggestions:l})})}var T=n("qnp8"),I=n("uyxo"),B=n("M1Uz"),P=n("Sp3T"),R=n("wm0H"),k=n("v/Q4"),E=n("e3KR"),A=n("Wrea"),L=n("KFEb"),D=n("0zyx"),M=n("x12c"),N=n("vvax"),F=n("EuRG"),H=n("H/Lk"),U=n("WnNx"),z=n("U4JR"),q=n("NjDU"),Y=n("QAzJ"),W=n("B6Tf"),G=n("e0nq");class K extends i.PureComponent{constructor(...e){var t,n,i;super(...e),i=()=>{const{boardId:e}=this.props;Object(z.b)(101,{component:20,element:10805,objectId:e})},(n="handleClick")in(t=this)?Object.defineProperty(t,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[n]=i}componentDidMount(){const{toastShown:e}=this.props;e()}render(){const{boardName:e,boardUrl:t,onHide:n}=this.props;return Object(u.jsx)(B.a,{duration:5e3,onHide:n,text:Object(u.jsx)(l.Y,{weight:"bold",children:Object(N.b)(s.a._("Find more ideas for {{ boardName }}","postRepinUpsellToast.findMoreIdeas.toast","Find more ideas for you board"),{boardName:e}).join("")}),href:t+"more_ideas/?ideas_referrer=16",onClick:this.handleClick})}}var V=Object(o.connect)(null,(e,t)=>({toastShown:()=>e(Object(G.c)(t.boardId))}))(K),$=n("w70y"),X=n("ZdPf"),Q=n("seP0"),Z=n("nGHF"),J=n("0nTG"),ee=n("EC67");function te(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ne({savedInfo:e,variant:t,shouldUseLegoStyles:n}){const i="closeup"===t,o=i?"sm":"md",r="boardless"===e.type?s.a._("Profile","PinBetterSave.PinBetterSaveSavedStatus.savedTitle","Text indicating saved to your profile"):e.title;return Object(u.jsx)(v.a,{onClick:({event:e})=>{e.stopPropagation()},href:e.url||"",children:Object(u.jsx)(l.e,{dangerouslySetInlineStyle:{__style:{color:"#333"}},marginStart:i?1:0,children:n?Object(u.jsx)(l.Y,{color:"darkGray",size:"lg",weight:"bold",align:i?"right":void 0,children:r.length<=25?r:Object(c.a)(r,25)}):Object(u.jsx)(l.Y,{color:"darkGray",inline:!0,size:o,children:Object(N.b)(s.a._("Saved to {{ destination }}","Saved to label for better save","Saved to label for better save"),{destination:Object(u.jsx)(l.Y,{color:"darkGray",size:o,truncate:!0,weight:"bold",inline:!0,children:r.length<=25?r:Object(c.a)(r,25)},"pin_auto_save_link")})})})})}class ie extends i.Component{constructor(...e){var t;super(...e),t=this,te(this,"state",{boardWithSection:null,createdBoard:null,suggestedBoardTitle:"",showBoardFlyout:!1,showRepinModal:!1,sensitiveContentNotice:null}),te(this,"setBoardSaveCompletionPromise",e=>{const{createdBoard:t}=this.state;this._repinCompletionPromise=e,this._repinCompletionPromise.promise.then(e=>{if(!e.board)return;const{board:{id:n,name:i,url:o}}=e,r={boardId:n,title:i,url:o};this.updateSelectedBoardOrSection(r),this.updateSavedState({...r,localPinId:e.id}),t&&Object(X.d)(t.sensitivity)&&Object(X.c)(t.sensitivity)?this.setState({sensitiveContentNotice:t.sensitivity.notice||t.sensitivity.notices[0]}):this.handleRepinHide()})}),te(this,"updateSavedState",e=>{const{reduxLocation:t,save:n,searchQueryInvalidated:i,onSave:o,pin:{id:r}}=this.props,a=t.query&&t.query.q||Object(D.a)(t.history);n({pinId:r,...e}),a&&i(a),o&&o()}),te(this,"updateSelectedBoardOrSection",e=>{const{selectBoardOrSection:t,pin:{id:n}}=this.props;t({pinId:n,...e})}),te(this,"updateSelectedItem",()=>{const{initialSelection:e,selectedItem:t}=this.props;!t&&e&&this.updateSelectedBoardOrSection(e)}),te(this,"dropdownRef",Object(i.createRef)()),te(this,"handleItemChosen",e=>{this.updateSelectedBoardOrSection(e),this.hideFlyout(!0),this.save(e)}),te(this,"handleBoardCreate",({title:e=""}={})=>this.props.requireAuth(()=>{this.hideFlyout(!0),this.setState(t=>({...t,suggestedBoardTitle:e,showRepinModal:!0}));const{onToggleFlyout:t}=this.props;t&&t(!0,!0)})),te(this,"handleBoardCreated",e=>{this.setState({createdBoard:e})}),te(this,"handleRepinHide",()=>{this.setState(e=>({...e,suggestedBoardTitle:"",showRepinModal:!1}));const{onToggleFlyout:e}=this.props;e&&e(!1,!1)}),te(this,"handleBoardDropdownClick",e=>{const{pin:{id:t},viewParameter:n,location:{pathname:i},boardPickerStopwatch:o}=this.props;e&&e.preventDefault&&e.preventDefault(),e&&e.stopPropagation&&e.stopPropagation(),this.state.showBoardFlyout?this.hideFlyout(!0):(Object(z.b)(101,{component:13282,element:10960,viewParameter:n,objectId:t}),o&&(o.start(),Object(Q.b)(o,i)),this.showFlyout())}),te(this,"handleSaveClick",(async function(e){const{selectedItem:n}=t.props;n?(e&&e.preventDefault&&e.preventDefault(),e&&e.stopPropagation&&e.stopPropagation(),Object(z.b)(101,{component:13282,element:36,objectId:n.boardId,grid_index:4}),await t.save(n)):t.handleBoardDropdownClick(e)})),te(this,"setBoardWithSection",e=>{this.setState({boardWithSection:e})}),te(this,"handleEditSubmit",({boardId:e,sectionId:t,url:n,title:i})=>{const{pin:{id:o},savedInfo:{localPinId:r}={}}=this.props;this.updateSavedState({pinId:o,localPinId:r,boardId:e,sectionId:t||"",url:n,title:i})}),te(this,"resetPinSavedState",()=>{this.updateSavedState({boardId:"",localPinId:"",sectionId:"",title:"",url:""})}),te(this,"deleteSavedState",e=>{const{unsave:t,onDelete:n,pin:{id:i},shouldUseLegoStyles:o,toastManagerContext:r}=this.props;t({pinId:i}),o&&e&&w.a.create("PinResource",{id:e}).callDelete().then(()=>{r.showToast(({onHide:e})=>Object(u.jsx)(B.a,{onHide:e,text:s.a._("Pin deleted!","PinBetterSave.SavedPin.Delete","User deleted their pin")}))}),n&&n()}),te(this,"save",(async function(e){const{addPinToBoardlessPinsFeed:n,isLimitedLogin:i,mostRecentBoard:o,pin:{id:r},postRepinMoreIdeasUpsell:a,postRepinUpsellDisabled:s,save:c,setMostRecentBoard:d,shouldUseLegoStyles:l,showRepinAnimation:h,toastManagerContext:p}=t.props;t.updateSavedState(e);const b="boardless"===e.type;try{const{resource_response:{data:i}}=await t.getPinResource(e).callCreate({showError:!1}),m=e.url,{incrementBoardPinCount:g,updateUserPinCount:j,viewerUserId:f}=t.props;if(!s&&m&&!b&&(({boardId:e,boardUrl:t,postRepinMoreIdeasUpsell:n})=>{if(!t)return!1;const{recentSaves:i,recentUpsell:o}=n;if(o[e])return!1;const r=i.findIndex(t=>t.boardId!==e);return(-1===r?i.length:r)+1>=3})({boardId:e.boardId,boardUrl:m,postRepinMoreIdeasUpsell:a})&&p.showToast(({onHide:t})=>Object(u.jsx)(V,{boardId:e.boardId,boardName:e.title,boardUrl:m,onHide:t})),c({pinId:r,...{...e,localPinId:i.id,localPin:i}}),M.b.publish("currentUser","pinCreated",i),M.b.publish(i.board.id,"pinCreated",{pin:i}),g({boardId:e.boardId,sectionId:e.sectionId}),j(f),n(f,i.id),l){const{id:n,images:o,board:a}=i,s=o["236x"];t.updateSavedState({pinId:r,...{...e,localPinId:n}}),p.showToast(({onHide:i})=>Object(u.jsx)(T.a,{boardName:e.title,boardUrl:e.url||a.url,isBoardlessPin:b,onHide:i,onUndo:()=>t.deleteSavedState(n),pinImageUrl:b&&e.url?e.url:s.url}))}else h(r);o&&e.boardId!==o.id&&!b&&d(e.boardId,e.title,e.url)}catch(m){i||g.a.showError(m.message_detail||m.message),t.resetPinSavedState()}})),te(this,"hideFlyout",(e=!1)=>{const{onToggleFlyout:t}=this.props;this.setState({showBoardFlyout:!1}),t&&t(!1,e)})}componentDidMount(){const{onMount:e}=this.props;this.updateSelectedItem(),e&&e()}componentDidUpdate(){this.updateSelectedItem()}getPinResource(e){const{carouselData:t,location:n,previousHistory:i,pin:o}=this.props,r={carousel_slot_index:t&&t.index||0,clientTrackingParams:Object(j.a)(o,n,i)||(o.tracking_params||"")+"~0",description:o.description||"",image_base64:o.image_base64,is_buyable_pin:!1,is_removable:o.promoted_is_removable,link:o.link,pin_id:o.id||"",title:o.title||"",...e.boardId&&"boardless"!==e.type?{board_id:e.boardId}:null,...e.sectionId?{section:e.sectionId}:null,...Object(J.f)(o)||{}};return w.a.create("RepinResource",r)}showFlyout(){const{onToggleFlyout:e}=this.props;this.setState({showBoardFlyout:!0}),e&&e(!0,!0)}render(){const{boardResource:e,carouselData:t,onToggleModal:n,pin:i,renderPinSaveTooltip:o,renderSavedStatus:r,savedInfo:a,selectedItem:s,unselectedText:c,useMasonryFlyout:d,variant:h,viewParameter:p,hideDropdown:g,showSaveToProfile:j,shouldUseLegoStyles:f}=this.props,{boardWithSection:v,showBoardFlyout:O,showRepinModal:x,sensitiveContentNotice:y,suggestedBoardTitle:w}=this.state,_=d?S:l.I,T=Object(u.jsx)(E.a,{boardResource:e,setBoardWithSection:this.setBoardWithSection,showSaveToProfile:j,onItemChosen:this.handleItemChosen,onBoardCreate:this.handleBoardCreate,pin:i});return Object(u.jsx)(m.a,{name:"PinBetterSave",children:Object(u.jsxs)(l.e,{width:"100%",display:"closeup"===h?"flex":void 0,height:f?60:"closeup"===h?44:void 0,color:f||"closeup"!==h?void 0:"lightGray",rounding:f||"closeup"!==h?void 0:4,children:[null!=a&&a.title?Object(u.jsx)(I.a,{currentCarouselIndex:t&&t.index,onDeleteSavedState:()=>this.deleteSavedState(a.localPinId),onEditSubmit:this.handleEditSubmit,onToggleModal:n,pinId:a.localPinId,variant:h,viewParameter:p,shouldUseLegoStyles:f,children:r&&a&&r({savedInfo:a,variant:h,shouldUseLegoStyles:f})}):Object(u.jsx)(b,{dropdownRef:this.dropdownRef,onBoardDropdownClick:this.handleBoardDropdownClick,onSaveClick:this.handleSaveClick,renderPinSaveTooltip:o,selectedTitle:s&&s.title,showSaveButton:!O,unselectedText:c,view:h,hideDropdown:g,shouldUseLegoStyles:f}),Object(u.jsx)(C,{additionalCreateFields:{is_stl_pin:Object(J.i)(i)},boardWithSection:v,action:"create",onClose:this.handleRepinHide,setCompletionPromise:this.setBoardSaveCompletionPromise,showModal:x,pin:i,children:({boardSavedTo:e,dismissModal:t,displaySuccessAnimation:n,handleAbort:i,handleNewBoardAnimationCompletion:o,handleSocialConnectSet:r,handleSaveToBoard:a,newPin:s,updateDescription:c,modalTitle:d,sectionSuggestions:l,setModalTitle:h,pin:p})=>Object(u.jsx)(W.c,{boardSavedTo:e,isInModal:!0,displaySuccessAnimation:n,dismissModal:t,handleAbort:i,handleNewBoardAnimationCompletion:o,handleSocialConnectSet:r,handleSaveToBoard:a,updateDescription:c,onBoardCreated:this.handleBoardCreated,sensitiveContentNotice:y,pin:p,pwtAuxData:{pin_create_method:"repin"},sectionSuggestions:l,suggestedBoardTitle:w,boardWithSection:v,shouldRenderContent:x,newPin:s,modalTitle:d,setModalTitle:h,showCreate:!0})}),O&&"closeup"===h&&Object(u.jsx)(l.I,{anchor:this.dropdownRef.current,idealDirection:"down",onDismiss:this.hideFlyout,size:"xl",children:T}),O&&"pin"===h&&Object(u.jsx)(_,{anchor:this.dropdownRef.current,idealDirection:"down",onDismiss:this.hideFlyout,positionRelativeToAnchor:!d,size:"xl",children:T})]})})}}te(ie,"defaultProps",{variant:"pin",renderSavedStatus:({savedInfo:e,variant:t,shouldUseLegoStyles:n})=>Object(u.jsx)(ne,{savedInfo:e,variant:t,shouldUseLegoStyles:n})});t.default=Object(i.memo)((function(e){var t;const{pin:{id:n}}=e,i=Object($.a)({name:"BoardPickerBoardsResource",options:{field_set_key:"board_picker"}}),r=Object($.a)({name:"BoardPickerBoardsShortlistResource",options:{pin_id:e.pin.id,shortlist_length:2,num_shortlist_suggestions:2,suggestions_only:!0,min_confidence:.5}}),a=Object(ee.h)(),c=Object(ee.i)(),d=Object(Z.b)(),h=Object(Q.c)(),p=Object(k.a)(),b=Object(o.useDispatch)(),m=Object(P.a)(),g=Object(o.useSelector)(({mostRecentBoard:e})=>e),j=Object(o.useSelector)(({pins:e})=>e[n]),v=Object(o.useSelector)(({history:e})=>e.previous),O=Object(o.useSelector)(({location:e})=>e),x=Object(o.useSelector)(({ui:e})=>e.postRepinMoreIdeasUpsell);let y=e.initialSelection,S=(null===(t=y)||void 0===t?void 0:t.title)||"",w=!0;const _=Object(Y.b)("web_boardless_pins"),C=!!p.has_quicksave_board&&_().anyEnabled,{showEnabledSaveBehavior:T}=Object(R.a)(),I={boardId:"",title:s.a._("Profile","pinBetterSave.initialSelection.boardlessPinsOption","Option to save to profile without a board."),type:"boardless",url:"/me/"};if(!y){const e=r&&r.data&&r.data[0];y=r&&r.isLoaded&&e&&{boardId:e.id,title:e.name,url:e.url}||r&&r.isLoaded&&!e&&(C||T)&&I||r&&r.isLoaded&&!e&&g&&{boardId:g.id,title:g.name,url:g.url}||void 0,S=r&&r.isLoaded?s.a._("Select","BetterSave label to pick a board from the list","BetterSave label to pick a board from the list"):"...",w=!1}return Object(u.jsx)(l.e,{overflow:"hidden",children:Object(u.jsx)(ie,{...e,addPinToBoardlessPinsFeed:(e,t)=>b(Object(f.a)({feedId:e,feedType:L.a.BOARDLESS_PINS,itemIds:[t],itemType:"pin"})),boardResource:i,boardPickerStopwatch:h,carouselData:j&&j.carousel_data,history:a,incrementBoardPinCount:({boardId:e,sectionId:t})=>b(Object(A.d)({boardId:e,sectionId:t,increment:1})),initialSelection:y,isLimitedLogin:p.isLimitedLogin,location:c,mostRecentBoard:g,postRepinMoreIdeasUpsell:x,postRepinUpsellDisabled:w,previousHistory:v,reduxLocation:O,requireAuth:m,save:e=>b(Object(G.a)(e)),savedInfo:j&&j.savedInfo,searchQueryInvalidated:e=>b(Object(F.b)(e)),selectBoardOrSection:e=>b(Object(G.b)(e)),selectedItem:j&&j.selectedItem,setMostRecentBoard:(e,t,n)=>b(Object(H.a)(e,t,n)),showSaveToProfile:C||T,showRepinAnimation:e=>b(Object(U.d)(e)),toastManagerContext:d,unsave:e=>b(Object(G.d)(e)),unselectedText:S,updateUserPinCount:e=>b(Object(q.c)({userId:e,increment:1})),viewerUserId:p.isAuth?p.id:""})})}))},fZG9:function(e,t,n){n.d(t,"a",(function(){return g})),n.d(t,"b",(function(){return f}));var i=n("bNC6"),o=n("HMdf"),r=n("+lzj"),a=n("SyXB"),s=n("nEAA");const c=(e,t)=>(e||[]).reduce((e,n)=>({...e,["experiment."+n]:Object(s.d)(t(n))}),{}),d=(e,t)=>"number"==typeof t?e(t):null,l=e=>e.reduce((e,t)=>e+t,0),u=(e,t)=>Object.keys(t).reduce((n,i)=>({...n,[`${e}${i}`]:t[i]}),{}),h=e=>{if(!e.length)return{};const t=e.map(({startTime:e,requestStart:t,responseStart:n,responseEnd:i})=>{const o=t||e;return{startTime:e,requestStart:o,responseStart:n||o,responseEnd:i}}),n=l(t.map(e=>e.requestStart-e.startTime)),i=l(t.map(e=>e.responseStart-e.requestStart)),o=l(t.map(e=>e.responseEnd-e.responseStart)),r=n+i+o,a=l(e.map(e=>e.decodedBodySize||0));return{decodedBodySize:Object(s.b)((c=a,Number(Number(c/1024).toFixed(3)))),"duration.all":Object(s.b)(r),"duration.requestStartToResponseStart":Object(s.b)(i),"duration.responseStartToResponseEnd":Object(s.b)(o),"duration.startToRequestStart":Object(s.b)(n)};var c},p=e=>{const t=e.filter(e=>!!e.responseEnd);return{...e.length?{...h(t),"count.completed":Object(s.b)(t.length)}:{},"count.all":Object(s.b)(e.length)}},b=e=>{const t=e.reduce((e,t)=>(e[t.category]=(e[t.category]||[]).concat([t]),e),{}),n={script:t.script,script_deferred:e.filter(e=>e.isDeferred),external:e.filter(e=>e.isExternal),css:t.css,image:t.image,video:t.video,xmlhttprequest:t.xmlhttprequest,visually_complete:e.filter(e=>e.isVisuallyCompleteRequired)};return Object.keys(n).reduce((e,t)=>({...e,...u(`resource.${t}.`,p((n[t]||[]).map(e=>e.timing)))}),{})},m=(e,t)=>{const{devicePixelRatio:n,navigator:o,innerWidth:r,innerHeight:a}=window,{deviceMemory:c,hardwareConcurrency:d,platform:l,userAgent:u}=o,{appType:h,appVersion:p,browserName:b,browserVersion:m,deviceType:g,isAppShell:j,isAuthenticated:f,isBot:v,isSocialBot:O,locale:x,osName:y,stageName:S}=t,w="desktop"===g?h||5:h||6;let _;const{navigationType:C}=e;return _="initial_app_load"===C?1:4,{"app.type":Object(s.c)(w),"app.version":Object(s.d)(p),"browser.name":Object(s.d)(b),"browser.version":Object(s.d)(m),"cpu.speed":Object(s.c)(d),"device.memory":Object(s.c)(c),"device.type":Object(s.c)(0),"device.typeName":Object(s.d)(g),"device.version":Object(s.d)("unknown"),"pwt.cause":Object(s.c)(_),"pwt.result":Object(s.c)(1),"view.type":Object(s.b)(0),"viewport.height":Object(s.b)(a||0),"viewport.width":Object(s.b)(r||0),devicePixelRatio:Object(s.b)(n||0),isAppShell:Object(s.a)(j),isAuthenticated:Object(s.a)(f),isBot:Object(s.a)(v),isSocialBot:Object(s.a)(O),locale:Object(s.d)(x),osName:Object(s.d)(y),platform:Object(s.d)(l||null),profilerVersion:Object(s.d)("3"),pwtActionName:Object(s.c)(Object(i.a)(e)),stageName:Object(s.d)(S),userAgent:Object(s.d)(u)}},g=({annotateExperiments:e,metricId:t,pwtStaticContext:n,binaryAnnotations:i={},performanceResourceTimings:r=[]})=>{let a={};{const{connection:e,hardwareConcurrency:t,deviceMemory:n}=window.navigator;a={"net.effectiveType":Object(s.d)((null==e?void 0:e.effectiveType)||null),"net.rtt":Object(s.b)(d(e=>10*Math.round(e/10),null==e?void 0:e.rtt)),"net.speed":Object(s.b)(Object(o.b)(r,!1)),"cpu.threads":Object(s.c)(t),"memory.size":Object(s.b)(n)}}return{...c(e,n.getExperimentGroup),...m(t,n),...i,...a,stopwatchVersion:Object(s.c)(1)}},j=(e,t,n)=>{var i;const{navigator:c}=window,{connection:u,serviceWorker:h}=c,{surface:p,navigationType:b,isAuthenticated:m}=e,{cumulativeLayoutShiftScore:g,longTaskDurations:j}=Object(r.e)();return{...j.length?{"longTask.count":Object(s.b)(j.length),"longTask.maxDuration":Object(s.b)(Math.max(...j)),"longTask.totalDuration":Object(s.b)(l(j))}:{},cumulativeLayoutShiftScore:Object(s.b)(100*g),"masonry.paginationMarkCount":Object(s.b)(Object(a.e)(a.a,t)),"metricId.isAuthenticated":Object(s.a)(m),"metricId.navigationType":Object(s.d)(b),"metricId.surface":Object(s.d)(p),"net.effectiveType":Object(s.d)((null==u?void 0:u.effectiveType)||null),"net.rtt":Object(s.b)(d(e=>10*Math.round(e/10),null==u?void 0:u.rtt)),"net.speed":Object(s.b)(Object(o.b)(n)),resourceBufferClearedCount:Object(s.c)(Object(a.e)("resourceBufferCleared",t)),scrollDuringLayout:Object(s.a)(Object(a.f)("scrollDuringLayout",t)),serviceWorker:Object(s.a)(h?!!h.controller:null),serviceWorkerState:Object(s.d)((null==h||null===(i=h.controller)||void 0===i?void 0:i.state)||null)}},f=({annotateExperiments:e,binaryAnnotations:t={},entries:n,metricId:i,performanceResources:o,pwtEndTime:r,pwtStaticContext:a})=>({...t,...b(o),...c(e,a.getExperimentGroup),...m(i,a),...j(i,r,n)})},"g/XF":function(e,t,n){n.d(t,"a",(function(){return s}));var i=n("JW66"),o=n("zwad"),r=n("n6mq"),a=n("nKUr");function s({url:e,description:t,color:n}){return n=n||i.a.DEFAULT_IMAGELESS_PIN_COLOR,Object(a.jsx)(r.e,{rounding:2,height:216,width:"100%",dangerouslySetInlineStyle:{__style:{background:n}},children:Object(a.jsxs)(r.e,{maxHeight:200,padding:4,overflow:"hidden",children:[e&&Object(a.jsx)(r.e,{marginBottom:2,children:Object(a.jsx)(r.Y,{color:"white",size:"sm",children:o.a.parse(e).hostname||e})}),Object(a.jsx)(r.e,{maxHeight:144,children:Object(a.jsx)(r.Y,{color:"white",overflow:"normal",weight:"bold",children:t})})]})})}},gONw:function(e,t,n){var i=n("q1tI"),o=n("n6mq"),r=n("nKUr");function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class s extends i.Component{constructor(...e){super(...e),a(this,"state",{isHovering:!1}),a(this,"onHover",()=>{this.setState({isHovering:!0})}),a(this,"offHover",()=>{this.setState({isHovering:!1})})}render(){const{name:e,selected:t,image:n,inFlyoutExp:i}=this.props;return i?Object(r.jsxs)(o.e,{alignItems:"center",color:this.state.isHovering?"lightGray":"transparent",direction:"row",display:"flex",paddingX:4,paddingY:2,onMouseOver:this.onHover,onMouseOut:this.offHover,children:[Object(r.jsx)(o.e,{children:Object(r.jsx)(o.B,{height:40,width:40,rounding:2,children:this.state.isHovering&&n?Object(r.jsx)(o.w,{alt:"",color:"",fit:"cover",naturalHeight:n.height,naturalWidth:n.width,src:n.url}):Object(r.jsx)(o.e,{color:"lightGray",height:40,width:40})})}),Object(r.jsx)(o.e,{padding:2,children:Object(r.jsx)(o.t,{size:"sm",children:e})})]}):Object(r.jsxs)(o.e,{alignItems:"center",color:t?"lightGray":"transparent",direction:"row",display:"flex",paddingX:6,paddingY:2,children:[Object(r.jsx)(o.e,{children:Object(r.jsx)(o.u,{color:t?"darkGray":"gray",icon:"add",accessibilityLabel:""})}),Object(r.jsx)(o.e,{marginStart:3,children:Object(r.jsx)(o.Y,{color:t?"darkGray":"gray",weight:"bold",children:e})})]})}}var c=n("Ye/N"),d=n("w70y"),l=n("U4JR"),u=n("seP0");t.a=({inFlyoutExp:e,inFirstBoardCreateGestaltExp:t,pinId:n,image:a,minHeight:h,onBoardSelected:p})=>{const[b,m]=Object(i.useState)(-1),g=Object(u.c)(),{data:j=[],error:f,isLoaded:v}=Object(d.a)({name:"BoardTitleSuggestionsResource",options:{pin_id:n}}),O=(x=j,Object(i.useMemo)(()=>x&&x.length?x.map(e=>e.title):[],[x]));var x;Object(i.useEffect)(()=>{v&&t&&g&&(f?g.error():g.stop())},[v]);const y=()=>{m(-1)},S=(t,n)=>{const i=b===n;return Object(r.jsx)("li",{children:Object(r.jsx)(o.X,{onMouseEnter:()=>(e=>{m(e)})(n),onMouseLeave:y,onTap:()=>(e=>{p(O[e],!1),Object(l.b)(101,{component:13025,element:23})})(n),children:Object(r.jsx)(s,{selected:i,name:t,inFlyoutExp:e,image:a})})},n)};return v?O&&O.length?e?Object(r.jsx)("div",{children:Object(r.jsx)("ul",{children:O.map(S)})}):t?Object(r.jsxs)(o.e,{children:[Object(r.jsx)(o.e,{marginTop:5,marginStart:6,marginBottom:3,children:Object(r.jsx)(o.Y,{children:c.a._("Suggested board names","text above suggested board names list","text above suggested board names list")})}),Object(r.jsx)("ul",{children:O.map(S)})]}):Object(r.jsxs)(o.e,{children:[Object(r.jsx)(o.e,{marginTop:2,paddingX:5,children:Object(r.jsx)(o.Y,{children:c.a._("Suggested board names")})}),Object(r.jsx)("ul",{children:O.map(S)})]}):null:Object(r.jsx)(o.e,{alignItems:"center",display:"flex",height:"100%",justifyContent:"center",minHeight:h||"",children:Object(r.jsx)(o.R,{accessibilityLabel:c.a._("Loading board suggestions","Accesibility label for loading board suggestions","Accesibility label for loading board suggestions"),show:!0})})}},"gz6+":function(e,t,n){n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return s})),n.d(t,"d",(function(){return c}));var i=n("pody"),o=n("+lzj");const r=e=>({...Object(i.a)(e),domComplete:e.domComplete||0,domContentLoadedEventEnd:e.domContentLoadedEventEnd||0,domContentLoadedEventStart:e.domContentLoadedEventStart||0,domInteractive:e.domInteractive||0,loadEventEnd:e.loadEventEnd||0,loadEventStart:e.loadEventStart||0}),a=()=>{const{firstInputDelay:e,largestContentfulPaint:t}=Object(o.e)();return{firstInputDelayStart:(null==e?void 0:e.startTime)||0,firstInputDelayEnd:(null==e?void 0:e.endTime)||0,largestContentfulPaint:t||0}},s=(e,t)=>Object.keys(t).reduce((n,i)=>({...n,[`${e}${i}`]:t[i]}),{}),c=(e,t)=>Object.keys(e).reduce((n,i)=>t.includes(i)?{...n,[i]:e[i]}:n,Object.freeze({}))},jHGc:function(e,t,n){n.r(t),n.d(t,"PinRepEditButton",(function(){return s}));var i=n("Ye/N"),o=n("dtqy"),r=n("n6mq"),a=n("nKUr");function s({handlePinEditButtonClick:e,style:t,useLegoStyles:n=!1,usePersistentOneClickSaveStyles:o,wrappingIconStyle:s,shouldUseLegoStyles:c,onDelete:d}){const l=Object(a.jsx)(r.v,{accessibilityLabel:i.a._("Edit","edit button on pin","edit button on pin"),bgColor:t&&t.bgColor||"white",icon:"edit",iconColor:t&&t.iconColor||"darkGray",onClick:({event:t})=>e(t),size:t&&t.size||"md"});return c?Object(a.jsx)(r.f,{size:"lg",color:"gray",text:i.a._("Saved","PinRepEditButton.SavedButton","saved button on pin"),onClick:d,accessibilityLabel:i.a._("Pin Saved Button","PinRepEditButton.SavedButtonLabel","saved button label on pin"),selected:!0}):n||o?Object(a.jsx)("div",{style:{...s||{}},children:l}):l}t.default=Object(o.a)(s)},l9OW:function(e,t,n){var i=n("SKAX"),o=n("MMmD");e.exports=function(e,t){var n=-1,r=o(e)?Array(e.length):[];return i(e,(function(e,i,o){r[++n]=t(e,i,o)})),r}},"lm/5":function(e,t,n){var i=n("fmRc"),o=n("wF/u");e.exports=function(e,t,n,r){var a=n.length,s=a,c=!r;if(null==e)return!s;for(e=Object(e);a--;){var d=n[a];if(c&&d[2]?d[1]!==e[d[0]]:!(d[0]in e))return!1}for(;++a<s;){var l=(d=n[a])[0],u=e[l],h=d[1];if(c&&d[2]){if(void 0===u&&!(l in e))return!1}else{var p=new i;if(r)var b=r(u,h,l,e,t,p);if(!(void 0===b?o(h,u,3,r,p):b))return!1}}return!0}},lm6u:function(e,t,n){n.d(t,"a",(function(){return R}));var i=n("q1tI"),o=n("/MKj"),r=n("1inl"),a=n("3z7j"),s=n("ajUs"),c=n("Ye/N");var d=n("x12c"),l=n("eOdZ"),u=n("G35+"),h=n("M1Uz"),p=n("Wrea"),b=n("ANjH"),m=n("Vzit"),g=n("xjIv"),j=n("WnNx"),f=n("n6mq"),v=n("U4JR"),O=n("NjDU"),x=n("6G9P"),y=n("B6Tf"),S=n("seP0"),w=n("nGHF"),_=n("oN2T"),C=n("EC67"),T=n("nKUr");function I(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const B=/#[^(\-\\.\s#,\/$%\^&\*;:{}=\`~()\[\]@|<>…)]+/gi;class P extends i.Component{constructor(...e){super(...e),I(this,"state",{boardSavedTo:null,displaySuccessAnimation:!1,newPin:null,modalTitle:this.getModalTitle(this.props.showCreate,this.props.boardWithSection),pinDescription:this.props.pin&&this.props.pin.description||"",resolve:void 0,sharing:{facebook:!1,twitter:!1}}),I(this,"unmounted",!1),I(this,"setModalTitle",e=>this.safeSetState({modalTitle:e})),I(this,"updateDescription",e=>{this.safeSetState({pinDescription:e})}),I(this,"close",()=>{const{onClose:e,boardPickerStopwatch:t}=this.props;e&&e(),t&&t.abort("boardPickerClose"),Object(v.b)(2502,{component:5,element:610})}),I(this,"safeSetState",(e,t)=>{this.unmounted?t&&t():this.setState(e,t)}),I(this,"getPinResource",(e,t,n)=>{var i,o;const{color:r,location:a,pin:c,method:d,guid:u,additionalCreateFields:h,advertiser_id:p,previousHistory:b}=this.props;let m;c.id&&(m=Object(s.a)(c,a,b)||(c.tracking_params||"")+"~0");const g=c.id?"RepinResource":"PinResource",j=!c.id&&c.image_url?Object(x.b)(c.image_url,c.link):(null===(i=c.images)||void 0===i||null===(o=i.orig)||void 0===o?void 0:o.url)||"",f={...h,board_id:t||"",color:r||"",clientTrackingParams:m,description:this.state.pinDescription,guid:u||"",link:c.link,image_base64:c.image_base64,image_url:j,is_buyable_pin:!1,is_removable:c.promoted_is_removable,media_upload_id:c.media_upload_id,method:d||"",pin_id:c.id||"",section:n,title:c.title||"",...p?{advertiser_id:p}:{}};if(!e){const{facebook:e,twitter:t}=this.state.sharing;f.share_facebook=e,f.share_twitter=t}return l.a.create(g,f)}),I(this,"triggerPubSubs",e=>{d.a.instance.publish("currentUser","pinCreated",e),d.a.instance.publish(e.board.id,"pinCreated",{pin:e})}),I(this,"makeCancelablePromise",e=>{let t=!1;return{promise:new Promise((n,i)=>{e.then(e=>t?i({isCanceled:!0}):n(e)),e.catch(e=>i(t?{isCanceled:!0}:e))}),cancel(){t=!0}}}),I(this,"handleLogToastClick",()=>{Object(v.b)(101,{component:20,view:52})}),I(this,"showSuggestedBoardToast",(e,t,n,o)=>{const{toastManagerContext:r,shouldShowToast:a}=this.props;if(a&&e){const{name:t,url:n,image_thumbnail_url:o}=e;r.showOneToast(({onHide:e})=>Object(T.jsx)(h.a,{duration:y.a,onHide:e,text:Object(T.jsxs)(i.Fragment,{children:[Object(T.jsx)(f.Y,{children:c.a._("You might also like","Post repin suggested board","Post repin suggested board")}),Object(T.jsx)(f.Y,{weight:"bold",children:t})]}),href:n,imageUrl:o,onClick:this.handleLogToastClick}))}}),I(this,"showBoardSavedToast",(e,t)=>{const{toastManagerContext:n}=this.props;n.showToast(({onHide:n})=>{var i,o;return Object(T.jsx)(h.a,{duration:y.a,onHide:n,text:Object(x.a)(e.name,t),href:t?`${null!==(i=e.url)&&void 0!==i?i:""}${t.slug}`:e.url,imageUrl:null!==(o=e.image_cover_url)&&void 0!==o?o:"",onClick:this.handleLogToastClick})})}),I(this,"dismissModal",e=>{const{resolve:t,newPin:n}=this.state;t&&t(n)}),I(this,"fetchBoardRecommendation",e=>l.a.create("RelatedBoardForPinRandomFeedResource",{pin:e.id,page_size:1}).callGet({showError:!1}).then(e=>Promise.resolve(e.resource_response.error?null:e.resource_response.data[0]))),I(this,"handleBoardSaveSuccess",(e,t,n,i)=>{var o,r;const{action:s,dispatch:d,hideSuccessAnimation:l,homeTakeoverExperience:u,pin:h,setCompletionPromise:b,shouldShowToast:f,viewerUserId:x}=this.props;d(Object(m.d)());const y=e.resource_response.data,S=this.makeCancelablePromise(new Promise((e,o)=>{this.triggerPubSubs(y);const r=this.state.pinDescription.match(B)||[];r.length>0&&Object(v.b)(2,{element:10273,hashtags:JSON.stringify(r),objectId:this.props.pin.id});const a=l?()=>{}:()=>{f&&this.showBoardSavedToast(t,n),this.safeSetState({displaySuccessAnimation:!0,modalTitle:c.a._("Board created","Modal title after creating a new board","Modal title after creating a new board"),newPin:y,resolve:e})};"repin"===s?(this.fetchBoardRecommendation(y).then(e=>{this.showSuggestedBoardToast(e,y,n,i)}),i?a():e(y)):("create"===s&&u&&500840===u.experience_id&&(d({type:"PIN_CREATED_VIA_CREATOR_CHECKLIST",payload:{pin_created_via_creator_checklist:!0}}),Object(v.b)(7510,{component:13233})),i?a():e(y))}));if(i||d(Object(j.d)(h.id)),b(S),d(Object(_.d)(t)),d(Object(p.d)({boardId:t.id,sectionId:n&&n.id,increment:1})),x&&(d(Object(O.c)({userId:x,increment:1})),d(Object(m.d)())),n||!t.image_cover_url){const{image_url:e,images:n}=h;t.image_cover_url=e||n&&n["236x"]&&n["236x"].url||"",d(Object(_.e)({},t))}n&&d(Object(a.a)(n.id)),d(Object(g.a)(h.id,t.id,null!==(o=t.name)&&void 0!==o?o:"",null!==(r=t.url)&&void 0!==r?r:"",y.id))}),I(this,"handleSaveToBoard",(e,t,n)=>{const{boardPickerStopwatch:i,onToggleModal:o,shouldShowToast:a}=this.props;i&&i.abort("boardPickerSubmit"),a&&!n&&(this.close(),this.showBoardSavedToast(e,t));const s="secret"===(e.privacy||""),c={board:t?t.id:e.id,state:y.b.LOADING};this.safeSetState({boardSavedTo:c},()=>{this.getPinResource(s,e.id,(t||{}).id).callCreate({showError:!1}).then(i=>{this.safeSetState({boardSavedTo:Object.assign(c,{state:y.b.SUCCESS})},()=>this.handleBoardSaveSuccess(i,e,t,n)),o&&!n&&o(!1)}).catch(e=>{this.unmounted||this.safeSetState({boardSavedTo:null}),r.a.showError(e.message_detail||e.message);const t=this.makeCancelablePromise(Promise.reject(e));this.props.setCompletionPromise(t),o&&o(!1)})})}),I(this,"handleSocialConnectSet",(e,t)=>{const n=Object.assign({},this.state.sharing);e===u.a.FACEBOOK?n.facebook=t:e===u.a.TWITTER&&(n.twitter=t),this.safeSetState({sharing:n})}),I(this,"handleNewBoardAnimationCompletion",()=>{const{dispatch:e,pin:t}=this.props;e(Object(j.d)(t.id))})}getModalTitle(e,t){return e?t?c.a._("Create section","modal title for create section pane","modal title for create section pane"):c.a._("Create board","Repin title for making a new board","Repin title for making a new board"):t?c.a._("Choose section","modal title for choose section","modal title for choose section"):c.a._("Choose board","Repin title for choosing a board","Repin title for choosing a board")}componentDidUpdate(e){const{boardWithSection:t,showCreate:n,pin:i,description:o}=this.props,r={};i===e.pin&&o===e.description||(r.pinDescription=i.description||o||""),n===e.showCreate&&t===e.boardWithSection||(r.modalTitle=this.getModalTitle(n,t)),Object.keys(r).length>0&&this.safeSetState(r)}componentWillUnmount(){this.unmounted=!0}render(){const{close:e,dismissModal:t,handleNewBoardAnimationCompletion:n,handleSaveToBoard:i,handleSocialConnectSet:o,setModalTitle:r,updateDescription:a}=this,{boardSavedTo:s,displaySuccessAnimation:c,modalTitle:d,newPin:l}=this.state,{color:u,pin:h}=this.props;return this.props.children({boardSavedTo:s,color:u,dismissModal:t,displaySuccessAnimation:c,handleAbort:e,handleNewBoardAnimationCompletion:n,handleSaveToBoard:i,handleSocialConnectSet:o,modalTitle:d,newPin:l,pin:h,setModalTitle:r,updateDescription:a})}}const R=Object(b.compose)(Object(o.connect)(e=>{const{advertiser:t,viewer:n,history:i}=e,o=n.isAuth&&t&&t.owner_user_id!==n.id?t.id:null,r=e.experiences.eligibleExperiences[11],a=e.experiences.eligibleExperiences[33];return{homeTakeoverExperience:r,previousHistory:i.previous,repinTakeoverExperience:a,...o?{advertiser_id:o}:{},...n.isAuth?{viewerUserId:n.id}:{}}}),w.c,C.l)((function(e){const t=Object(S.c)();return Object(T.jsx)(P,{...e,boardPickerStopwatch:t})}))},mRg4:function(e,t,n){n.d(t,"a",(function(){return f}));let i=null;var o=(e,t)=>(i=i||{results:[],context:t},i.results.push(e),i),r=n("FZ8N"),a=n("LrH5"),s=n("bNC6"),c=n("3/Bf"),d=n("o9su"),l=n("FylZ");const u=(e,t)=>Object.keys(e).reduce((n,i)=>{const o=e[i];return o&&(n[i]={timestamp:t+o}),n},{}),h=({span:e,timeOrigin:t})=>{return{id:e.id,parent_id:e.parentId||null,result:1,name:e.name,timestamp:t+e.startTime,duration:e.endTime-e.startTime,annotations:u(e.annotationMap,t),binary_annotations:(n=e.binaryAnnotationMap,Object.keys(n).reduce((e,t)=>{const i=n[t];if(!i)return e;const{value:o,type:r}=i;return null==o?e:e.concat({name:t,value:o,annotation_type:r})},[]))};var n},p=(e,{startTime:t,endTime:n,annotationMap:i,binaryAnnotationMap:o,parentId:r,traceId:a})=>({name:"pwt/"+e,startTime:t,endTime:n,annotationMap:i,binaryAnnotationMap:o,parentId:r,id:a}),b=({annotations:e})=>e.reduce((e,{key:t,timestamp:n})=>({...e,["server_"+t]:{timestamp:n}}),{}),m=(e,t)=>({...e,annotations:{...b(t),...e.annotations},binary_annotations:[...t.binary_annotations,...e.binary_annotations]}),g=({traceId:e,actionName:t,result:n,timeOrigin:i,serverDataToJoin:o})=>{let r=h({span:p(t,n),timeOrigin:i}),a=null;return o&&(r=m(r,o),a=((e,t,n)=>{const i=Object(d.a)();return(null==i?void 0:i.responseEnd)?m(h({span:{name:"html",startTime:0,endTime:(null==i?void 0:i.responseEnd)||1,annotationMap:{},binaryAnnotationMap:{},id:e.server_span_id||Object(l.a)(),parentId:t},timeOrigin:n}),e):null})(o,e,i)),{trace_id:e,spans:[r,...a?[a]:[],...n.spans.map(e=>h({span:e,timeOrigin:i}))]}},j=Object(a.a)("reportResult");function f({metricId:e,pwtStaticContext:t,result:n,isAuth:i}){const{ajax:a,serverData:d}=t,l=Object(s.b)(e),u=`${n.type}.${l}`,h=void 0!==i&&{tags:{isAuth:i}}||void 0;if(Object(c.c)(n.reason?u.concat("."+n.reason):u,h),"COMPLETE"!==n.type)return void j("Abort metric "+l,n);const p=null!==(b=window.performance)&&void 0!==b&&b.now?Date.now()-window.performance.now():"unknown";var b,m;if("unknown"===p)return j(`Unable to convert to absolute times for ${l} due to missing time origin`),void Object(c.c)("missingTimeOrigin."+l,h);if(r.c&&(window.PWT_LAB_DATA=o(n,t)),n.spans.length&&(n.spans=n.spans.map(e=>(e.parentId||e.id===n.traceId||"network_resources"===e.name||(e.parentId=n.traceId),e))),!r.c){const i=e.navigationType&&"initial_app_load"===e.navigationType,o=n.traceId,s=g({traceId:o,actionName:l,result:n,timeOrigin:p,serverDataToJoin:i&&d||null});a({type:"POST",url:"/_/_/trace/trace/",data:{report_data:JSON.stringify(s),report_context:JSON.stringify((m=t,{debugTrace:r.a,locale:m.locale,stageName:m.stageName,userId:m.isAuthenticated?m.userId:null}))}}),j(`PinTrace ${l} will be available shortly: https://pintrace.pinadmin.com/zipkin/traces/${o}`,{duration:n.endTime-n.startTime,result:n,pwtStaticContext:t})}}},"mVx/":function(e,t,n){var i=n("XKAG")(n("JELi"));e.exports=i},mvLR:function(e,t,n){function i(e){let t=!1;return{promise:new Promise((n,i)=>{e.then(e=>t?i({isCanceled:!0}):n(e),e=>i(t?{isCanceled:!0}:e))}),cancel(){t=!0}}}n.d(t,"a",(function(){return i}))},nEAA:function(e,t,n){n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return r})),n.d(t,"d",(function(){return a})),n.d(t,"a",(function(){return s}));const i=e=>"number"==typeof e?Math.round(e):e,o=e=>({type:"I16",value:i(e)}),r=e=>({type:"I32",value:i(e)}),a=e=>({type:"STRING",value:e}),s=e=>({type:"BOOL",value:e})},nKlH:function(e,t,n){n.d(t,"a",(function(){return a}));var i=n("q1tI"),o=n("n6mq"),r=n("nKUr");function a(e){const{accessibilityLabel:t,focused:n,id:a,onBlur:s,onChange:c,onFocus:d,placeholder:l,value:u,size:h="lg"}=e,p=Object(i.useRef)(null);return Object(i.useEffect)(()=>{if(n){const e=p.current;window.requestAnimationFrame(()=>{const t=e&&e.querySelector("input");t instanceof HTMLInputElement&&t.focus()})}},[n]),Object(r.jsx)(o.e,{ref:p,children:Object(r.jsx)(o.N,{accessibilityLabel:t,id:a,onBlur:s,onChange:c,onFocus:d,placeholder:l,size:h,value:u})})}},o9su:function(e,t,n){var i=n("XtwW");t.a=()=>{const[e]=i.a?i.a.getEntriesByType("navigation"):[];return e}},oRM1:function(e,t,n){n.d(t,"a",(function(){return r}));var i=n("q1tI"),o=n("zQfT");function r({allowSearchOnMount:e,children:t,onTypeaheadSuggestionsChange:n,resourceName:r,resourceOptions:a,value:s}){const c=Object(o.a)({allowSearchOnMount:e,resourceName:r,resourceOptions:a,value:s});return Object(i.useEffect)(()=>{c.length&&n(c)},[c]),t||null}},ou9u:function(e,t,n){function i(e){const t=e.videos&&e.videos.video_list&&Object.keys(e.videos.video_list).length>0?e.videos.video_list:null;return t?t.V_HLSV3_MOBILE||t.V_HLSV4||t.V_720P:null}n.d(t,"a",(function(){return i}))},pody:function(e,t,n){t.a=e=>({connectEnd:e.connectEnd||0,connectStart:e.connectStart||0,domainLookupEnd:e.domainLookupEnd||0,domainLookupStart:e.domainLookupStart||0,fetchStart:e.fetchStart||0,requestStart:e.requestStart||0,redirectEnd:e.redirectEnd||0,redirectStart:e.redirectStart||0,responseEnd:e.responseEnd||0,responseStart:e.responseStart||0,secureConnectionStart:e.secureConnectionStart||0,startTime:e.startTime||0,workerStart:e.workerStart||0,unloadEventStart:e.unloadEventStart||0,unloadEventEnd:e.unloadEventEnd||0})},qnp8:function(e,t,n){n.d(t,"a",(function(){return d}));var i=n("Ye/N"),o=n("EC51"),r=n("M1Uz"),a=n("vvax"),s=n("n6mq"),c=n("nKUr");function d({boardName:e,boardUrl:t,isBoardlessPin:n,newPin:d,onChangeButtonClick:l,onHide:u,onUndo:h,pinImageUrl:p}){const b=Object(c.jsx)(s.e,{color:"lightGray",display:"flex",height:48,overflow:"hidden",width:48,children:Object(c.jsx)(s.e,{alignItems:"center",justifyContent:"center",padding:3,children:Object(c.jsx)(s.u,{accessibilityLabel:i.a._("Saved to profile thumbnail","PostSavedPinToast.thumbnail.accessibilityLabel","Thumbnail for saved to profile."),color:"darkGray",icon:"history",size:24})})}),m=(!!l||!!h)&&Object(c.jsx)(s.f,{inline:!0,text:d&&n&&l?i.a._("Change","PostSavedPinToast.ChangeButton","Change saved pin to a different destination"):i.a._("Undo","PostSavedPinToast.UndoButton","Undo Saved Pin"),size:"lg",onClick:d&&n&&l?()=>l(d):h},"button-key");return Object(c.jsx)(r.a,{button:m,duration:n?6e3:3e3,iconThumbnail:n?b:void 0,imageUrl:p,onHide:u,text:Object(c.jsx)(s.Y,{size:"md",truncate:!0,children:Object(a.b)(i.a._("Saved to {{ destination }}","PostSavedPinToast.SavedToBoardLabel","Saved to label for better save"),{destination:Object(c.jsx)(o.a,{href:n?"/me/":null!=t?t:"",children:Object(c.jsx)(s.Y,{size:"md",weight:"bold",truncate:!0,children:e},"PostSavedPinToastBoardName")})})})})}},qyR9:function(e,t,n){n.d(t,"a",(function(){return j}));var i=n("q1tI"),o=n("jdx6"),r=n("gONw"),a=n("Ye/N"),s=n("gdcG"),c=n("n6mq"),d=n("nKUr");var l=Object(s.a)((function(e){const{buttonLabel:t,isHovering:n,isRowItem:i,hasHoverState:o,hoverHandlers:r,name:s,onClick:l}=e,u=s||t||a.a._("Create board");return Object(d.jsx)(c.X,{onMouseEnter:r.onMouseOver,onMouseLeave:r.onMouseLeave,onTap:l,children:Object(d.jsxs)(c.e,{alignItems:"center",color:o&&n?"lightGray":"white",display:"flex",flex:i?"shrink":"none",height:64,width:"100%",children:[Object(d.jsx)(c.e,{marginStart:6,marginEnd:3,"data-test-id":"createBoardButton",children:Object(d.jsx)(c.u,{accessibilityLabel:a.a._("Add a board"),size:"32",icon:"add-circle",color:"red"})}),s?Object(d.jsx)(c.e,{margin:1,children:Object(d.jsxs)(c.Y,{inline:!0,overflow:"normal",children:[" ",a.a._("Create: ")," "]})}):null,Object(d.jsxs)(c.Y,{align:"center",inline:!0,truncate:!0,weight:"bold",children:[" ",u," "]})]})})})),u=n("9QW3"),h=n("NdQN"),p=n("IBrh"),b=n("seP0");function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class g extends i.Component{constructor(...e){super(...e),m(this,"state",{searchQuery:""}),m(this,"handleSelectItem",e=>{const{onCreate:t,onSelected:n}=this.props;if(!e&&t){const{searchQuery:e}=this.state;t(e)}else e&&n(e);(t||e)&&this.setState({searchQuery:""})}),m(this,"handleSearchQueryInput",e=>{this.setState({searchQuery:e})}),m(this,"renderSectionHeader",(e,t)=>e.title?Object(d.jsxs)(c.e,{children:[t>0&&Object(d.jsx)(c.o,{}),Object(d.jsx)(c.e,{paddingX:3,paddingY:1,children:Object(d.jsx)(c.Y,{size:"md",children:e.title})})]}):null),m(this,"renderRow",({item:e,hovered:t,sectionProps:n={}})=>{const{boardSavedTo:i,isSelectMode:r,disabledRowId:a}=this.props,{searchQuery:s}=this.state,{inSectionSelection:c=!1}=n,l=i&&i.board===e.id?i&&i.state:null,u="board_section"===e.type;return Object(d.jsx)(o.a,{disabled:e.id===a&&c,isSection:u,isSelectMode:r,isWithinSectionPicker:c,item:e,saveState:l,searchQuery:s,selected:t})})}componentDidUpdate(e){if(!e.isLoaded&&this.props.isLoaded){const{boardPickerStopwatch:e,hasLoadError:t}=this.props;e&&(t?e.error():e.stop())}}render(){const{boardSavedTo:e,createButtonLabel:t,hasLowBoardCount:n,getSections:i,isLoaded:o,onCreate:s,pinId:b}=this.props;if(o){const{searchQuery:o}=this.state,a=i(o);return this.indexManager=new u.a(a.map(e=>e.items)),this.indexManager.setSelectItem(this.handleSelectItem),Object(d.jsxs)(c.e,{minHeight:0,flex:"grow",height:"100%",overflow:"auto",display:"flex",direction:"column",dangerouslySetInlineStyle:{__style:{zIndex:0}},children:[!n&&Object(d.jsxs)(c.e,{children:[Object(d.jsx)(c.e,{paddingX:3,marginBottom:4,marginTop:1,children:Object(d.jsx)(h.a,{disabled:!!e,indexManager:this.indexManager,onChange:this.handleSearchQueryInput,value:o})}),Object(d.jsx)(c.o,{})]}),Object(d.jsx)(p.a,{disabled:!!e,grow:!n&&!o,indexManager:this.indexManager,onSelectItem:this.handleSelectItem,renderItem:this.renderRow,renderSectionHeader:this.renderSectionHeader,sections:a}),Object(d.jsx)(c.o,{}),s&&Object(d.jsx)(l,{buttonLabel:t,hasHoverState:!0,name:o,onClick:()=>s(o)}),n&&s&&b&&Object(d.jsx)(r.a,{onBoardSelected:s,pinId:b})]})}return Object(d.jsx)(c.e,{paddingY:5,children:Object(d.jsx)(c.R,{accessibilityLabel:a.a._("loading section picker","accessibility label for the loading spinner the repin picker","accessibility label for the loading spinner the repin picker"),show:!0})})}}function j(e){const t=Object(b.c)();return Object(d.jsx)(g,{...e,boardPickerStopwatch:t})}},s7xj:function(e,t,n){n.d(t,"a",(function(){return u}));var i=n("8Mj5"),o=n("xweI"),r=n.n(o),a=n("v/Q4"),s=n("QKYm"),c=n("nKUr");function d(e,t,n){const{collaborated_by_me:i,collaborating_users:o=[],owner:a}=e,c=[a];if(i||n){const e=o.findIndex(e=>t.isAuth&&e.id===t.id);if(-1!==e){const t=o.splice(e,1)[0];c.push(t)}else c.push(t)}const d=s.a-c.length,l=r()(o,"full_name").slice(0,d);return[...c,...l]}function l(e){var t,n;return{href:"/"+e.username,key:e.id,name:null!==(t=e.fullName)&&void 0!==t?t:e.full_name,src:null!==(n=e.imageMediumUrl)&&void 0!==n?n:e.image_medium_url}}function u({board:e,forceViewer:t,isCompact:n,ownerOnly:o}){const r=Object(a.a)();return Object(c.jsx)(i.a,{faces:o?[l(e.owner)]:d(e,r,t).map(l),faceSize:n?"xs":"sm",overlap:n?-3:-4})}},"sH+O":function(e,t,n){function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return r}));const o=(e,t)=>{const n=/^\d{1,3}\.\d{1,3}(?:\.\d{1,6})?$/;if(!e.match(n)||!t.match(n))return null;const i=e.split("."),o=t.split("."),r=Math.max(i.length,o.length);for(let a=0;a<r;a+=1){const e=a<i.length?parseInt(i[a],10):0,t=a<o.length?parseInt(o[a],10):0;if(e<t)return-1;if(e>t)return 1}return 0};class r{constructor(e,t,n){i(this,"start",Date.now()),i(this,"paused",!1),this.onProgress=e,this.onComplete=t,this.duration=n,this.remaining=n,"undefined"!=typeof window&&(this.intervalId=window.setInterval(()=>{const e=this.paused?this.duration-this.remaining:this.duration-this.remaining+(Date.now()-this.start);this.onProgress(e/this.duration)},500),this.resume())}currentTime(){return this.duration-this.remaining}pause(){this.paused=!0,window.clearTimeout(this.timerId),this.remaining-=Date.now()-this.start;const e=this.duration-this.remaining;this.onProgress(e/this.duration)}resume(){this.paused=!1,this.start=Date.now(),window.clearTimeout(this.timerId),this.timerId=window.setTimeout(this.onComplete,this.remaining)}clear(){window.clearTimeout(this.timerId),window.clearInterval(this.intervalId)}}},seP0:function(e,t,n){n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return c})),n.d(t,"c",(function(){return d}));var i=n("FZ8N"),o=n("F4HH");const{Provider:r,useHook:a}=Object(o.a)({name:"board_picker",v2LoggerMetricName:16,sampleRate:i.b?1:.1}),s=(e,t)=>{let n="unknown";null!=t&&t.includes("pin/")?n="PinCloseup":"/"===t?n="HomeFeed":"PinBookMarklet"===t&&(n="PinBookmarklet"),null==e||e.addBinaryAnnotation("source",n,"STRING")},c=r,d=a},"ut/Y":function(e,t,n){var i=n("ZCpW"),o=n("GDhZ"),r=n("zZ0H"),a=n("Z0cm"),s=n("+c4W");e.exports=function(e){return"function"==typeof e?e:null==e?r:"object"==typeof e?a(e)?o(e[0],e[1]):i(e):s(e)}},uyxo:function(e,t,n){n.d(t,"a",(function(){return a}));var i=n("jHGc"),o=n("n6mq"),r=n("nKUr");function a(e){const{children:t,currentCarouselIndex:n,onDeleteSavedState:a,onEditSubmit:s,onToggleModal:c,pinId:d,variant:l,viewParameter:u,shouldUseLegoStyles:h}=e,p="pin"===l?{bgColor:"white",iconColor:"darkGray",size:"sm"}:{bgColor:"transparent",iconColor:"darkGray",size:"sm"};return Object(r.jsxs)(o.e,{alignItems:"center",display:"flex",direction:"row",marginStart:"pin"===l?-1:void 0,marginEnd:"pin"===l?-1:void 0,paddingX:"closeup"!==l||h?void 0:2,width:"closeup"===l?"100%":void 0,children:[t&&Object(r.jsx)(o.e,{paddingX:1,"data-test-id":"saved-info",flex:"grow",children:t}),Object(r.jsx)(o.e,{paddingX:1,flex:"none",marginStart:"auto",children:Object(r.jsx)(i.default,{component:0,onDelete:a,onSubmit:s,pinId:d,onToggleModal:c,viewParameter:u,carouselSlotCurrentIndex:n,style:p,shouldUseLegoStyles:h,useLegoStyles:"pin"===l})})]})}},"v+PR":function(e,t,n){n.d(t,"a",(function(){return g}));var i=n("q1tI"),o=n("Ye/N"),r=n("w70y"),a=n("vvax"),s=n("n6mq"),c=n("nKUr");function d({pin:e}){const{data:t}=Object(r.a)({name:"PinSaveStatusResource",options:{id:e.id},allowStale:!1});return t&&t.pinned_to_board?Object(c.jsxs)(s.e,{children:[Object(c.jsx)(s.e,{color:"red","data-test-id":"already-pinned",display:"flex",padding:3,rounding:2,width:185,children:Object(c.jsx)(s.Y,{align:"center",color:"white",size:"md",weight:"bold",children:Object(a.b)(o.a._("Psst! You already saved this Pin to {{ board_name }} ","Toast for already having repinned pin","Toast for already having repinned pin"),{board_name:(t.pinned_to_board||{}).name}).join(" ")})}),Object(c.jsx)(s.e,{display:"flex",justifyContent:"center",marginTop:-3,children:Object(c.jsx)(s.u,{accessibilityLabel:"",color:"red",icon:"heart",size:26})})]}):null}var l=n("P6kd"),u=n("g/XF"),h=n("U4JR");function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const b=/#[^(. #,\/$%\^&\*;:{}=\`~()\[\]@|<>)]*/,m=/#[^(. #,\/$%\^&\*;:{}=\`~()\[\]@|<>)]*$/;class g extends i.Component{constructor(...e){super(...e),p(this,"state",{cursorIndex:-1,flyoutCursorIndex:-1,description:this.props.pin&&this.props.pin.description&&this.props.pin.description.trim()||"",editing:!1,hashtagQuery:"",isHashtagFlyoutOpen:!1,flyoutOpened:!1}),p(this,"onDescriptionChange",(e,t)=>{const n=new RegExp(b,"g");let i="";if(t<e.length){let o=n.exec(e),r=n.lastIndex<t;for(;o&&r;)o=n.exec(e),r=n.lastIndex<t;const a=!!o&&b.test(e.slice(o.index,t));r=!!o&&o.index<t,o&&a&&r&&(i=o[0])}else{const t=m.exec(e);i=t?t[0]:""}this.updateDescription(e);const o=b.test(i),r=this.state.isHashtagFlyoutOpen?this.state.flyoutCursorIndex:e.slice(0,t).lastIndexOf("#");this.setState({cursorIndex:t,flyoutCursorIndex:r,description:e,hashtagQuery:i,isHashtagFlyoutOpen:o,flyoutOpened:this.state.flyoutOpened||o})}),p(this,"onCursorChange",e=>{const{isHashtagFlyoutOpen:t,flyoutCursorIndex:n}=this.state;t&&e<n&&this.setState({isHashtagFlyoutOpen:!1})}),p(this,"updateDescription",e=>{this.props.updateDescription&&this.props.updateDescription(e)}),p(this,"handleDescriptionBlur",e=>{const t=e.target.value.trim(),{isHashtagFlyoutOpen:n}=this.state;this.updateDescription(t),this.setState({description:t,editing:n})}),p(this,"handleDescriptionEdit",()=>{this.setState({editing:!0})}),p(this,"handleHashtagAddition",e=>{const{pin:t}=this.props;Object(h.b)(101,{component:208,element:10249,hashtags:e,objectId:t.id});const n=this.state.flyoutCursorIndex,i=Number(n+this.state.hashtagQuery.length),o=this.state.description.slice(0,n)+e+" "+this.state.description.slice(i);this.updateDescription(o),this.setState({description:o,editing:!0,hashtagQuery:"",isHashtagFlyoutOpen:!1})}),p(this,"handleRefTextArea",e=>{this._textArea=e})}render(){const{color:e,isFirstPin:t,pin:n,pinImageRef:i}=this.props,{description:o,editing:r,flyoutOpened:a,hashtagQuery:h,isHashtagFlyoutOpen:p}=this.state,{images:b,link:m}=n,g=b&&b["236x"],j=g&&g.url||n.image_base64;return Object(c.jsxs)(s.e,{display:"flex",alignItems:"center",justifyContent:"center",position:"relative",width:t?"50%":"",dangerouslySetInlineStyle:{__style:a&&r?{transform:"translateY(-75px)"}:{}},children:[Object(c.jsxs)(s.e,{display:"flex",direction:"column",alignItems:"center",children:[n&&n.id&&Object(c.jsx)(d,{pin:n}),Object(c.jsx)(s.e,{paddingY:t?9:0,width:240,children:Object(c.jsx)(s.e,{ref:i,maxHeight:a&&r?220:335,rounding:4,overflow:"hidden",children:j?Object(c.jsx)(s.w,{alt:o,src:j,naturalHeight:(null==g?void 0:g.height)||1,naturalWidth:(null==g?void 0:g.width)||1}):!!m&&Object(c.jsx)(u.a,{color:e||"",description:o,url:m})})})]}),this.anchor&&p?Object(c.jsx)(l.a,{addHashtag:this.handleHashtagAddition,anchor:this.anchor,editing:r,query:h}):null]})}}},xfna:function(e,t,n){n.d(t,"a",(function(){return de})),n.d(t,"b",(function(){return le})),n.d(t,"c",(function(){return ue}));var i=n("q1tI"),o=n("EHyI");var r,a,s,c,d=e=>{const{deviceType:t,isBot:n,isSocialBot:i}=e;return`coreWebVitalsLite.v1.${(i?"socialBot":n&&"bot")||"nonbot"}.${t}`},l=n("7w6Q"),u=n("LrH5"),h=function(e,t){return{name:e,value:void 0===t?-1:0,delta:0,entries:[],id:"v1-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12)}},p=function(e,t){try{if(PerformanceObserver.supportedEntryTypes.includes(e)){var n=new PerformanceObserver((function(e){return e.getEntries().map(t)}));return n.observe({type:e,buffered:!0}),n}}catch(e){}},b=!1,m=function(e,t){b||"undefined"!=typeof InstallTrigger||(addEventListener("beforeunload",(function(){})),b=!0),addEventListener("visibilitychange",(function n(i){"hidden"===document.visibilityState&&(e(i),t&&removeEventListener("visibilitychange",n,!0))}),!0)},g=function(e){addEventListener("pageshow",(function(t){t.persisted&&e(t)}),!0)},j=new WeakSet,f=function(e,t,n){var i;return function(){t.value>=0&&(n||j.has(t)||"hidden"===document.visibilityState)&&(t.delta=t.value-(i||0),(t.delta||void 0===i)&&(i=t.value,e(t)))}},v=-1,O=function(){return"hidden"===document.visibilityState?0:1/0},x=function(){m((function(e){var t=e.timeStamp;v=t}),!0)},y=function(){return v<0&&(v=O(),x(),g((function(){setTimeout((function(){v=O(),x()}),0)}))),{get timeStamp(){return v}}},S={passive:!0,capture:!0},w=new Date,_=function(e,t){r||(r=t,a=e,s=new Date,I(removeEventListener),C())},C=function(){if(a>=0&&a<s-w){var e={entryType:"first-input",name:r.type,target:r.target,cancelable:r.cancelable,startTime:r.timeStamp,processingStart:r.timeStamp+a};c.map((function(t){t(e)})),c=[]}},T=function(e){if(e.cancelable){var t=(e.timeStamp>1e12?new Date:performance.now())-e.timeStamp;"pointerdown"==e.type?function(e,t){var n=function(){_(e,t),o()},i=function(){o()},o=function(){removeEventListener("pointerup",n,S),removeEventListener("pointercancel",i,S)};addEventListener("pointerup",n,S),addEventListener("pointercancel",i,S)}(t,e):_(t,e)}},I=function(e){["mousedown","keydown","touchstart","pointerdown"].map((function(t){return e(t,T,S)}))};const B=Object(u.a)("LayoutShiftDebugger"),P=e=>e instanceof HTMLElement&&e.dataset&&(e.dataset.layoutShiftBoundaryId||e.dataset.testId)||e.parentNode&&P(e.parentNode)||null;var R=({staticContext:e,getCurrentRoute:t,getLastNavigationTime:n})=>{let i=[];const o=d(e)+".CLS";let r=0;const a=()=>{var e;r=null!==(e=window.performance)&&void 0!==e&&e.now?window.performance.now():0};window.addEventListener("scroll",a),window.addEventListener("beforeunload",()=>window.removeEventListener("scroll",a)),function(e,t){var n,i=h("CLS",0),o=function(e){e.hadRecentInput||(i.value+=e.value,i.entries.push(e),n())},r=p("layout-shift",o);r&&(n=f(e,i,t),m((function(){r.takeRecords().map(o),n()})),g((function(){i=h("CLS",0),n=f(e,i,t)})))}(({entries:e})=>{const o=t(),a=n(),s=e.slice(i.length);i=i.concat(s.map(e=>({shift:e,route:o,hadRecentNavigation:a>0&&a+500>e.startTime,hadRecentScroll:r>0&&r+500>e.startTime})))},!0);let s=0;const c=setInterval(()=>{if(i.length===s)return;const e=i.slice(s);s=i.length;let t=Object.freeze({});e.forEach(({shift:{value:e,sources:n},route:i,hadRecentNavigation:o,hadRecentScroll:r})=>{if(!n||!n.length)return;const a=e/n.length;n.forEach(({node:e})=>{const n=e?P(e)||"ROOT":"NODE_REMOVED",s={route:i,boundaryId:n,hadRecentNavigation:o,hadRecentScroll:r},c=JSON.stringify(s);t={...t,[c]:{score:((t[c]||{}).score||0)+a,tags:s}}})}),Object.keys(t).forEach(e=>{const{score:n,tags:i}=t[e];l.a.count(o+".shifts",(e=>Math.round(1e3*e))(n),1,{...i})});const n=e.reduce((e,{shift:{value:t}})=>e+t,0);B("Debug CLS boundaries",n,t,e)},1e3);window.addEventListener("beforeunload",()=>clearInterval(c))};var k=e=>{switch(e){case"/":return"homefeed";case"/pin/:id":return"pin_closeup";case"/pin/:id/visual-search":return"flashlight";case"/:username/:slug":return"board";case"/:username":return"other_profile";case"/search/:scope":return"search";case"/topics/:interest":return"topic";default:return null}},E=n("gg0E"),A=n("SyXB"),L=n("FZ8N"),D=n("3/Bf"),M=n("+lzj"),N=n("HMdf"),F=n("o9su");var H=()=>Object(M.c)().reduce((e,{identifier:t,loadTime:n,renderTime:i})=>e[t+"_loadTime"]?e[t+"_dupe_loadTime"]?{...e,[t+"_dupe_loadTime"]:n,[t+"_dupe_renderTime"]:i}:e:{...e,[t+"_loadTime"]:n,[t+"_renderTime"]:i},Object.freeze({})),U=n("pody"),z=n("gz6+"),q=n("Og0o");var Y=e=>{switch(e){case"pin_closeup":{const e=Object(q.b)();return(e=>{const t=Object(N.d)();return e.reduce((e,{name:n,match:i})=>t.filter(e=>i(e)).slice(0,2).reduce((e,t,i)=>({...e,...Object(z.a)(`${n}${i?"_dupe1":""}_`,Object(U.a)(t))}),e),Object.freeze({}))})([{name:"mainImage",match:({name:t})=>t===e},{name:"PinResource",match:({name:e})=>e.includes("PinResource")}])}default:return{}}},W=n("B/lV"),G=n("vzKb"),K=n("FylZ"),V=n("mRg4"),$=n("LvPn"),X=n("fZG9");var Q=({annotateExperiments:e,annotateMarks:t,annotateResourceTimingForSurface:n,name:i,pwtStaticContext:o})=>{const r=(()=>{let e=[],t=null;if(window.PerformanceObserver){const n=1e3;t=Object(G.a)({entryTypes:["resource"]},t=>{e=e.concat(t.getEntries()),e.length>n&&(e=e.slice(-n))})}return{get:()=>e,disconnect:()=>{t&&t.disconnect()}}})();let a=!0;return Object(D.c)("TIMING."+i,{tags:{isAuth:o.isAuthenticated}}),{stop:s=>{if(!a)return;a=!1,r.disconnect();const c={type:"stopwatch",name:i,navigationType:"initial_app_load"},d=Object(K.a)(),l=Object(F.a)(),u=r.get(),h={type:"COMPLETE",traceId:Object(K.a)(),startTime:0,endTime:s,spans:[{name:"network_resources",id:d,startTime:0,endTime:s,annotationMap:{},binaryAnnotationMap:{},parentId:null},...u.map(e=>Object($.a)(Object(W.a)(e,[]),d)).filter(Boolean)],annotationMap:{...Object(z.a)("resource_",n?Y(n):{}),...Object(z.a)("element_",H()),...Object(z.a)("mark_",t&&t.length?Object(z.d)(Object(A.d)(),t):{}),...Object(z.a)("browser_",l?Object(z.b)(l):{})},binaryAnnotationMap:Object(X.a)({annotateExperiments:e,metricId:c,pwtStaticContext:o,performanceResourceTimings:u})};Object(V.a)({metricId:c,pwtStaticContext:o,result:h,isAuth:o.isAuthenticated})}}};const Z=()=>({current:0,entries:[],firstTs:Number.NEGATIVE_INFINITY,id:`v1-${Date.now()}-${Math.floor(8999999999999*Math.random())+1e12}`,max:0,prevTs:Number.NEGATIVE_INFINITY});var J=e=>{let t,n=Z();const i=()=>{"hidden"===document.visibilityState&&(void 0===t||n.max>t)&&(t=n.max,e({name:"CLS",value:n.max,delta:0,id:n.id,entries:n.entries}))},o=e=>{e.hadRecentInput||((e.startTime-n.firstTs>5e3||e.startTime-n.prevTs>1e3)&&(n.firstTs=e.startTime,n.current=0),n.prevTs=e.startTime,n.current+=e.value,n.max=Math.max(n.max,n.current),n.entries.push(e),i())},r=((e,t)=>{try{if(window.PerformanceObserver.supportedEntryTypes.includes(e)){const n=new window.PerformanceObserver(e=>e.getEntries().map(t));return n.observe({type:e,buffered:!0}),n}}catch(a){}return null})("layout-shift",o);var s;r&&((e=>{const t=t=>{"pagehide"!==t.type&&"hidden"!==document.visibilityState||e()};window.addEventListener("visibilitychange",t,!0),window.addEventListener("pagehide",t,!0)})(()=>{r.takeRecords().map(o),i()}),s=()=>{n=Z(),t=void 0},window.addEventListener("pageshow",e=>{e.persisted&&s()},!0))};const ee=Object(u.a)("Vitals"),te={pin_closeup:{LCP:"pin_closeup_lcp",FID:"pin_closeup_fid"},board:{LCP:"board_lcp",FID:"board_fid"}},ne=({surface:e,isAuthenticated:t})=>{if(t)return[];switch(e){case"pin_closeup":return["mweb_unauth_preload_main_pin_image","mweb_srcset_original_image","mweb_pin_page_appshell_unauth"];case"board":return["mweb_unauth_ssr_board_page"];default:return[]}},ie=({pwtStaticContext:e,surface:t})=>{const n="pin_closeup"===t||"board"===t?(({pwtStaticContext:e,surface:t})=>{const n=Q({annotateExperiments:ne({surface:t,isAuthenticated:e.isAuthenticated}),annotateResourceTimingForSurface:t,annotateMarks:["initialAppLoad","RenderReactContainer",...e.isAuthenticated?[]:["firstClientRenderUnauthPageWrapper","mountUnauthPageWrapper"],..."pin_closeup"===t?["firstClientRenderCloseupPage","firstClientRenderCloseupImage"]:[]],name:te[t].LCP,pwtStaticContext:e}),i=Q({name:te[t].FID,pwtStaticContext:e});return(e,t)=>{"LCP"===e?n.stop(t):"FID"===e&&i.stop(t)}})({pwtStaticContext:e,surface:t}):null,i={},o=(o,r)=>{if(!i[o]){i[o]=!0;const a=d(e);l.a.timing(`${a}.${t}.${o}`,r,1),n&&n(o,r)}};!function(e,t){var n,i=y(),o=h("FID"),s=function(e){e.startTime<i.timeStamp&&(o.value=e.processingStart-e.startTime,o.entries.push(e),j.add(o),n())},d=p("first-input",s);n=f(e,o,t),d&&m((function(){d.takeRecords().map(s),d.disconnect()}),!0),d&&g((function(){var i;o=h("FID"),n=f(e,o,t),c=[],a=-1,r=null,I(addEventListener),i=s,c.push(i),C()}))}(({value:e})=>o("FID",(e=>Number(e.toFixed(2)))(e))),function(e,t){var n,i=y(),o=h("LCP"),r=function(e){var t=e.startTime;t<i.timeStamp&&(o.value=t,o.entries.push(e)),n()},a=p("largest-contentful-paint",r);if(a){n=f(e,o,t);var s=function(){j.has(o)||(a.takeRecords().map(r),a.disconnect(),j.add(o),n())};["keydown","click"].map((function(e){addEventListener(e,s,{once:!0,capture:!0})})),m(s,!0),g((function(i){o=h("LCP"),n=f(e,o,t),requestAnimationFrame((function(){requestAnimationFrame((function(){o.value=performance.now()-i.timeStamp,j.add(o),n()}))}))}))}}(({value:e})=>{o("LCPCount",Object(M.d)()),o("LCP",(e=>10*Math.round(e/10))(e))}),function(e,t){var n,i=y(),o=h("FCP"),r=p("paint",(function(e){"first-contentful-paint"===e.name&&(r&&r.disconnect(),e.startTime<i.timeStamp&&(o.value=e.startTime,o.entries.push(e),j.add(o),n()))}));r&&(n=f(e,o,t),g((function(i){o=h("FCP"),n=f(e,o,t),requestAnimationFrame((function(){requestAnimationFrame((function(){o.value=performance.now()-i.timeStamp,j.add(o),n()}))}))})))}(({value:e})=>o("FCP",e))},oe=e=>{const{isAuthenticated:t}=e,n=d(e)+".CLS";let i=null;J(({id:e,value:o})=>{const r=(a=o)<=.1?"good":a<=.25?"adequate":"poor";var a,s;i&&e===i.id?o>i.value&&(i.invalidation||(i={...i,invalidation:"score"},l.a.increment(n+".firstReportScoreWasInvalid",1,{bucket:i.bucket,isAuthenticated:t}),ee("First record score was invalid")),"scoreAndBucket"!==!i.invalidation&&r!==i.bucket&&(i={...i,invalidation:"scoreAndBucket"},l.a.increment(n+".firstReportBucketWasInvalid",1,{bucket:i.bucket,isAuthenticated:t}),ee("First record bucket was invalid"))):(i={id:e,value:o,bucket:r},l.a.timing(n+".firstRecordScore",(s=o,Math.ceil(100*s)),1),l.a.increment(n+".firstRecord",1,{bucket:r,isAuthenticated:t}),ee("CLS report",o))})};var re=n("EC67"),ae=n("nKUr");const se=Object(i.createContext)(null),ce=Object(i.createContext)(null);function de({children:e,immutableLocation:t,resourceTimingCacheSize:n,routerHistoryAction:r,staticContext:a}){const s=Object(i.useRef)(null),c=Object(i.useRef)(null),d=Object(i.useRef)(t),l=Object(i.useRef)(!0),{path:u}=Object(re.k)(),h=Object(i.useRef)(u),p=Object(o.a)(a.deviceType);if(Object(i.useEffect)(()=>{h.current=u},[u]),Object(i.useEffect)(()=>{if(Object(N.f)({size:n||1e3}),Object(M.f)(),Object(D.c)("totalSessionVolume"),window.performance?["clearMarks","clearMeasures","clearResourceTimings","getEntries","getEntriesByName","getEntriesByType","mark","measure","now","setResourceTimingBufferSize"].forEach(e=>{window.performance[e]||Object(D.c)("not_supported.window.performance."+e)}):Object(D.c)("not_supported.window.performance"),window.PerformanceObserver||Object(D.c)("not_supported.window.PerformanceObserer"),Object(E.a)()||Object(D.c)("not_supported.grid_profiler"),l.current=!1,p&&"Chrome"===a.browserName&&!L.c){oe(a),R({staticContext:a,getCurrentRoute:()=>h.current,getLastNavigationTime:()=>c.current||0});const e=k(u);e&&ie({pwtStaticContext:a,surface:e})}},[]),d.current!==t){d.current=t,c.current=null!==(b=window.performance)&&void 0!==b&&b.now?window.performance.now():null;const{current:e}=c;if(!l.current){const t=!s.current;Object(D.c)("routeStart",{tags:{action:r}}),Object(N.a)(t),Object(M.a)(t),Object(M.b)(),Object(A.b)();const{customBufferSize:n,defaultBufferSize:i}=Object(N.e)();e&&(Object(D.c)("routeStart.customBufferSize",{count:n}),Object(D.c)("routeStart.defaultBufferSize",{count:i}),s.current={time:e,action:r})}}var b;return Object(ae.jsx)(se.Provider,{value:p?a:null,children:Object(ae.jsx)(ce.Provider,{value:s.current,children:e})})}const le=()=>Object(i.useContext)(ce),ue=()=>Object(i.useContext)(se)},xjIv:function(e,t,n){function i(e,t,n,i,o){return{type:"PIN_SAVE",payload:{pinId:e,boardId:t,title:n,url:i,localPinId:o}}}function o(e){return{type:"PIN_UNSAVE",payload:{pinId:e}}}n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return o}))},xweI:function(e,t,n){var i=n("XGnz"),o=n("alwl"),r=n("EA7m"),a=n("mv/X"),s=r((function(e,t){if(null==e)return[];var n=t.length;return n>1&&a(e,t[0],t[1])?t=[]:n>2&&a(t[0],t[1],t[2])&&(t=[t[0]]),o(e,i(t,1),[])}));e.exports=s},yKES:function(e,t,n){n.d(t,"a",(function(){return s}));var i=n("Ye/N"),o=n("US8k"),r=n("n6mq"),a=n("nKUr");function s({duration:e}){return Object(a.jsxs)(r.e,{alignItems:"center",color:"transparentDarkGray",display:"flex",height:24,justifyContent:"center",paddingX:2,rounding:"pill",children:[Object(a.jsx)(r.u,{accessibilityLabel:i.a._("Video camera icon","Video camera indicator icon for a Pin","Video camera indicator icon for a Pin"),color:"white",icon:"video-camera"}),Object(a.jsx)(r.e,{marginStart:1,children:Object(a.jsx)(r.Y,{color:"white",size:"sm",truncate:!0,children:Object(o.a)(e)})})]})}},yue5:function(e,t,n){var i=n("/9aa");e.exports=function(e,t){if(e!==t){var n=void 0!==e,o=null===e,r=e==e,a=i(e),s=void 0!==t,c=null===t,d=t==t,l=i(t);if(!c&&!l&&!a&&e>t||a&&s&&d&&!c&&!l||o&&s&&d||!n&&d||!r)return 1;if(!o&&!a&&!l&&e<t||l&&n&&r&&!o&&!a||c&&n&&r||!s&&r||!d)return-1}return 0}},zQfT:function(e,t,n){n.d(t,"a",(function(){return d}));var i=n("q1tI");const o=function(e,t){this.uid=e,this.item=t,this.next=null,this.prev=null},r=function(e){this._maxNumItems=e||10,this._uidToData={},this._numItems=0,this._firstData=null,this._lastData=null};r.prototype.set=function(e,t){let n=this._uidToData[e];n||(n=new o(e,t),this._uidToData[e]=n,this._numItems+=1),this._moveToFront(n),this._numItems>this._maxNumItems&&this._evict()},r.prototype.get=function(e){const t=this._uidToData[e];return t?(this._moveToFront(t),t.item):null},r.prototype.remove=function(e){const t=this._uidToData[e];t&&(delete this._uidToData[e],this._firstData===t&&(this._firstData=t.next),this._lastData===t&&(this._lastData=t.prev),t.prev&&(t.prev.next=t.next),t.next&&(t.next.prev=t.prev),this._numItems-=1)},r.prototype._moveToFront=function(e){this._firstData!==e&&(this._firstData?(this._lastData===e&&(this._lastData=e.prev),e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),this._firstData.prev=e,e.next=this._firstData,e.prev=null,this._firstData=e):(this._firstData=e,this._lastData=e))},r.prototype._evict=function(){delete this._uidToData[this._lastData.uid],this._firstData===this._lastData?(this._firstData=null,this._lastData=null):(this._lastData=this._lastData.prev,this._lastData.next=null),this._numItems-=1};var a=r,s=n("eOdZ");function c({resourceName:e,resourceOptions:t}){const n={...t,count:"count"in t?t.count:5},i=s.a.create(e,n),o=new a,r=()=>{i.abort()};return async function(e){const t=o.get(e);if(t){const n=t.items;if(n&&n.length){r();return{hint:t.hint,items:n,term:e}}}return e.length>=0?(async e=>{if(i.isCalling()){var t;if(e===(null===(t=i.options)||void 0===t?void 0:t.term))return;r()}const{bookmarks:n,...a}=i.options||{};i.options={...a,term:e};const s=(await i.callGet({showError:!1})).resource_response.data,c=s.items,d=s.hint||{},l={hint:d,items:c};return o.set(e,l),{term:e,items:c,hint:d}})(e):{hint:{},items:[],term:e}}}function d({allowSearchOnMount:e=!1,resourceName:t,resourceOptions:n={},value:o}){const r=Object(i.useRef)(!1),a=Object(i.useRef)({}),[s,d]=Object(i.useState)([]),l=function({resourceName:e,resourceOptions:t}){const n=Object(i.useRef)();return n.current||(n.current=c({resourceName:e,resourceOptions:t})),n.current}({resourceName:t,resourceOptions:n});return Object(i.useEffect)(()=>{(async()=>{if(null!=o&&(e||r.current))if(o in a.current)d(a.current[o]);else try{const e=await l(o);if(e){const{items:t}=e;a.current[o]=t,d(t)}}catch(t){if("Resource call aborted"===t)return;throw t}r.current||(r.current=!0)})()},[o]),s}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/PinBetterSaveCommon-a5f8ea2a9e85e9f0594d.mjs.map